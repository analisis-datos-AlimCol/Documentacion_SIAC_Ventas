<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SIAC_2_0 Ventas: c_CFDi_fm Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo-colpac1-260x117.png"/></td>
  <td id="projectalign">
   <div id="projectname">SIAC_2_0 Ventas<span id="projectnumber">&#160;2</span>
   </div>
   <div id="projectbrief">El SIAC es una solución empresarial que gestiona ventas, desde inventario hasta facturación electrónica.</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classc___c_f_di__fm.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">c_CFDi_fm Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a745812f02e70eef5fd9f3d782300d33d" id="r_a745812f02e70eef5fd9f3d782300d33d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a745812f02e70eef5fd9f3d782300d33d">c_CFDi_fm</a> ()</td></tr>
<tr class="separator:a745812f02e70eef5fd9f3d782300d33d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a77dc0fe360d5fca6bcb89466d2a4e" id="r_a36a77dc0fe360d5fca6bcb89466d2a4e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36a77dc0fe360d5fca6bcb89466d2a4e">cfdi_gcfdi_cpago_cli_crea_cfdi</a> ($anf, $eidf, $erfcf, $sidf, $cidf, $cnmf, $crfcf, $serief, $foliof, $df, $usnnf)</td></tr>
<tr class="separator:a36a77dc0fe360d5fca6bcb89466d2a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c14e75a4951d21f86ac8927c29a01f6" id="r_a7c14e75a4951d21f86ac8927c29a01f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c14e75a4951d21f86ac8927c29a01f6">cfdi_cpago_cancela_uuid</a> ($erfcf, $uuidf, $mvoidf, $uuidrlf, $userf, $passf, $urlf)</td></tr>
<tr class="separator:a7c14e75a4951d21f86ac8927c29a01f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeada046b468d2ebcb4e040897a31e04" id="r_abeada046b468d2ebcb4e040897a31e04"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abeada046b468d2ebcb4e040897a31e04">cfdi_gnotif_cancela_uuid</a> ($erfcf, $uuidf, $mvoidf, $uuidrlf, $userf, $passf, $urlf)</td></tr>
<tr class="separator:abeada046b468d2ebcb4e040897a31e04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c5a35f52ff0eaa1c38644297bd08caf" id="r_a7c5a35f52ff0eaa1c38644297bd08caf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c5a35f52ff0eaa1c38644297bd08caf">cfdi_gnotif_consulta_uuid</a> ($erfcf, $uuidf, $crfcf, $tvtaf, $userf, $passf, $urlf)</td></tr>
<tr class="separator:a7c5a35f52ff0eaa1c38644297bd08caf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff884654dadbd8dc4de36e7f0b04f814" id="r_aff884654dadbd8dc4de36e7f0b04f814"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff884654dadbd8dc4de36e7f0b04f814">cfdi_gcfdi_fg_doc_crea_factura</a> ($anf, $eidf, $erfcf, $sidf, $avidf, $osidf, $cidf, $cnmf, $docidf, $serief, $foliof, $exdocf, $ttdocf, $df, $usnnf)</td></tr>
<tr class="separator:aff884654dadbd8dc4de36e7f0b04f814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47c4b0f93c333fdbad079c6a4ea6e2c0" id="r_a47c4b0f93c333fdbad079c6a4ea6e2c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a47c4b0f93c333fdbad079c6a4ea6e2c0">cfdi_mdocs_vta_docs_crea_factura</a> ($anf, $eidf, $erfcf, $sidf, $avidf, $cidf, $cnmf, $serief, $foliof, $ttdocf, $df, $usnnf)</td></tr>
<tr class="separator:a47c4b0f93c333fdbad079c6a4ea6e2c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e3f7606727f913967fc639a3b607cb" id="r_a04e3f7606727f913967fc639a3b607cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a04e3f7606727f913967fc639a3b607cb">cfdi_gcfdi_doc_vta_crea_factura</a> ($anf, $eidf, $erfcf, $sidf, $avidf, $osidf, $cidf, $cnmf, $docidf, $serief, $foliof, $ttdocf, $df, $usnnf)</td></tr>
<tr class="separator:a04e3f7606727f913967fc639a3b607cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a082eb158001ba22e456d5cbf6008ac6b" id="r_a082eb158001ba22e456d5cbf6008ac6b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a082eb158001ba22e456d5cbf6008ac6b">cfdi_ticket_vta_crea_factura</a> ($anf, $eidf, $erfcf, $sidf, $avidf, $osidf, $cidf, $docidf, $serief, $foliof, $df, $usnnf)</td></tr>
<tr class="separator:a082eb158001ba22e456d5cbf6008ac6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503d1a7e95e60a16a49f42e3a6f6ed59" id="r_a503d1a7e95e60a16a49f42e3a6f6ed59"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a503d1a7e95e60a16a49f42e3a6f6ed59">cfdi_doc_venta_crea_factura</a> ($anf, $eidf, $erfcf, $sidf, $avidf, $osidf, $rnmf, $cidf, $cnmf, $docidf, $serief, $foliof, $usnnf)</td></tr>
<tr class="separator:a503d1a7e95e60a16a49f42e3a6f6ed59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a944037f661e81721673aef290babcacf" id="r_a944037f661e81721673aef290babcacf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a944037f661e81721673aef290babcacf">cfdi_crea_timbre_doc_venta</a> ($anf, $eidf, $erfcf, $sidf, $avidf, $avtf, $avvrf, $osidf, $ridf, $rnmf, $rvalf, $cidf, $docidf, $serief, $foliof, $usnnf)</td></tr>
<tr class="separator:a944037f661e81721673aef290babcacf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e51eb7d32e8a50a57268372c33c9f29" id="r_a4e51eb7d32e8a50a57268372c33c9f29"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e51eb7d32e8a50a57268372c33c9f29">cfdi_crea_layout_doc_venta</a> ($serief, $foliof, $fsatf, $cerf, $tcf, $tvtaf, $mpidf, $fpidf, $scpf, $monidf, $sbtotf, $dtof, $totf, $tdocf, $notaf, $emrfcf, $emrsf, $rfidf, $crfcf, $crfidf, $crsf, $usoidf, $ccpf, $tmprodf)</td></tr>
<tr class="separator:a4e51eb7d32e8a50a57268372c33c9f29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cd9da7cf94448df0f1cffc5819dbc65" id="r_a9cd9da7cf94448df0f1cffc5819dbc65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9cd9da7cf94448df0f1cffc5819dbc65">cfdi_crea_layout_cpago</a> ($serc, $folc, $fsatc, $ncerc, $ecpc, $tpcpc, $notac, $erfcc, $ersc, $rfidc, $crfcc, $crsc, $ccpc, $crfid, $scripgsc)</td></tr>
<tr class="separator:a9cd9da7cf94448df0f1cffc5819dbc65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1a598dc908bac1f28742297eece53d" id="r_a1a1a598dc908bac1f28742297eece53d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a1a598dc908bac1f28742297eece53d">cfdi_crea_txt_layout</a> ($rfilef, $cfdif)</td></tr>
<tr class="separator:a1a1a598dc908bac1f28742297eece53d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa067916e8f4ee4e05ed956e3d1600b2f" id="r_aa067916e8f4ee4e05ed956e3d1600b2f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa067916e8f4ee4e05ed956e3d1600b2f">cfdi_view_txt_layout</a> ($rftxtf)</td></tr>
<tr class="separator:aa067916e8f4ee4e05ed956e3d1600b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a745812f02e70eef5fd9f3d782300d33d" name="a745812f02e70eef5fd9f3d782300d33d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a745812f02e70eef5fd9f3d782300d33d">&#9670;&#160;</a></span>c_CFDi_fm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classc___c_f_di__fm.html">c_CFDi_fm</a> </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Constructor de la clase c_CFDi_fm
</pre><p>Inicializa la clase para la generación de CFDI de pagos. </p>

</div>
</div>
<a id="a7c14e75a4951d21f86ac8927c29a01f6" name="a7c14e75a4951d21f86ac8927c29a01f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c14e75a4951d21f86ac8927c29a01f6">&#9670;&#160;</a></span>cfdi_cpago_cancela_uuid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_cpago_cancela_uuid </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$uuidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$mvoidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$uuidrlf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$passf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$urlf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancela un CFDI de pago</p>
<p>Esta función cancela un CFDI de pago existente utilizando el servicio de Factura Moderna. Maneja diferentes motivos de cancelación y actualiza el estado del documento en el sistema. Los motivos de cancelación son:</p><ul>
<li>01: Complemento de Sustitución (requiere UUID relacionado)</li>
<li>02: Cancelación</li>
<li>03: Descarga</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$erfcf</td><td>RFC de la empresa emisora </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$uuidf</td><td>UUID del CFDI a cancelar </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$mvoidf</td><td>Motivo de cancelación (01, 02 o 03) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$uuidrlf</td><td>UUID del CFDI relacionado (solo para motivo 01) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$userf</td><td>Usuario del PAC </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$passf</td><td>Contraseña del PAC </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$urlf</td><td>URL del servicio web del PAC</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool Retorna true si la cancelación fue exitosa, false en caso de error</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Si hay un error en la cancelación</td></tr>
  </table>
  </dd>
</dl>
<p>Ejemplo de uso: // Cancelar un CFDI de pago con motivo de sustitución $resultado = cfdi_cpago_cancela_uuid($rfc_empresa, $uuid, '01', $uuid_nuevo, $usuario_pac, $pass_pac, $url_pac);</p>
<p>// Cancelar un CFDI de pago con motivo de cancelación $resultado = cfdi_cpago_cancela_uuid($rfc_empresa, $uuid, '02', '', $usuario_pac, $pass_pac, $url_pac); </p>

</div>
</div>
<a id="a9cd9da7cf94448df0f1cffc5819dbc65" name="a9cd9da7cf94448df0f1cffc5819dbc65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cd9da7cf94448df0f1cffc5819dbc65">&#9670;&#160;</a></span>cfdi_crea_layout_cpago()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_crea_layout_cpago </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$folc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fsatc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ncerc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ecpc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tpcpc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$notac</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ersc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$rfidc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$crfcc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$crsc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ccpc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$crfid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$scripgsc</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Crea el layout del CFDI de pago</p>
<p>Esta función genera el layout en formato TXT necesario para la creación de un CFDI de pago, siguiendo el formato requerido por Factura Moderna para el timbrado de recibos de pago.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$serc</td><td>Serie del recibo de pago </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$folc</td><td>Folio del recibo de pago </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fsatc</td><td>Fecha del SAT </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$ncerc</td><td>No. de certificado </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$ecpc</td><td>Lugar de expedición </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$tpcpc</td><td>Tipo de documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$notac</td><td>Notas </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$erfcc</td><td>RFC del emisor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$ersc</td><td>Razón social del emisor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$rfidc</td><td>Régimen fiscal del emisor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$crfcc</td><td>RFC del receptor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$crsc</td><td>Razón social del receptor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$ccpc</td><td>Código postal del receptor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$crfid</td><td>Régimen fiscal del receptor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$scripgsc</td><td>Script adicional (opcional)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string Layout del CFDI de pago en formato TXT</dd></dl>
<p>Ejemplo de uso: // Crear layout para un recibo de pago $layout_pago = $cfdi_fm-&gt;cfdi_crea_layout_cpago( 'P', // Serie '0001', // Folio '2024-06-03T15:49:26', // Fecha SAT '1234567890', // No. de certificado '01234', // Lugar de expedición 'PAGO', // Tipo de documento 'PAGO DE FACTURA', // Notas 'AAA010101AAA', // RFC emisor 'EMPRESA SA', // Razón social emisor '601', // Régimen fiscal emisor 'BBB010101BBB', // RFC receptor 'CLIENTE SA', // Razón social receptor '01234', // Código postal receptor '601', // Régimen fiscal receptor '' // Script adicional );</p>
<dl class="section note"><dt>Note</dt><dd>El layout generado sigue el formato requerido por Factura Moderna </dd>
<dd>
Incluye secciones para ReciboPagos20, DatosAdicionales, Emisor y Receptor </dd>
<dd>
Los campos son requeridos para la generación correcta del CFDI de pago </dd>
<dd>
El layout es utilizado por la función cfdi_crea_txt_layout para crear el archivo TXT </dd>
<dd>
La plantilla <a class="el" href="class_p_d_f.html">PDF</a> se establece como "pagos" por defecto </dd></dl>

</div>
</div>
<a id="a4e51eb7d32e8a50a57268372c33c9f29" name="a4e51eb7d32e8a50a57268372c33c9f29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e51eb7d32e8a50a57268372c33c9f29">&#9670;&#160;</a></span>cfdi_crea_layout_doc_venta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_crea_layout_doc_venta </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serief</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$foliof</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fsatf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cerf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tvtaf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$mpidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fpidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$scpf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$monidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sbtotf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$dtof</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$totf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tdocf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$notaf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$emrfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$emrsf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$rfidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$crfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$crfidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$crsf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$usoidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ccpf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tmprodf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Crea el layout del CFDI para un documento de venta</p>
<p>Esta función genera el layout en formato TXT necesario para la creación de un CFDI, incluyendo toda la información fiscal y comercial del documento de venta.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$serief</td><td>Serie del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$foliof</td><td>Folio del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fsatf</td><td>Fecha del SAT </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$cerf</td><td>Certificado </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$tcf</td><td>Tipo de comprobante </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$tvtaf</td><td>Términos de venta </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$mpidf</td><td>Método de pago </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fpidf</td><td>Forma de pago </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$scpf</td><td>Lugar de expedición </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$monidf</td><td>Moneda </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$sbtotf</td><td>Subtotal </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$dtof</td><td>Descuento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$totf</td><td>Total </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$tdocf</td><td>Tipo de documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$notaf</td><td>Notas </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$emrfcf</td><td>RFC del emisor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$emrsf</td><td>Razón social del emisor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$rfidf</td><td>Régimen fiscal del emisor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$crfcf</td><td>RFC del receptor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$crfidf</td><td>Régimen fiscal del receptor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$crsf</td><td>Razon social del receptor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$usoidf</td><td>Uso del CFDI </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$ccpf</td><td>Código postal del receptor </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$tmprodf</td><td>Términos de producción</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string Layout del CFDI en formato TXT</dd></dl>
<p>Ejemplo de uso: // Crear layout para un documento de venta $layout = $cfdi_fm-&gt;cfdi_crea_layout_doc_venta( 'F', // Serie '123456', // Folio '2024-06-03T15:48:39', // Fecha SAT '1234567890', // Certificado 'I', // Tipo de comprobante (I = Ingreso) 'CONTADO', // Términos de venta 'PUE', // Método de pago (PUE = Pago en una sola exhibición) '999', // Forma de pago (999 = Otros) '01234', // Lugar de expedición 'MXN', // Moneda '1000.00', // Subtotal '0.00', // Descuento '1000.00', // Total 'FACTURA', // Tipo de documento 'VENTA DE PRODUCTOS', // Notas 'AAA010101AAA', // RFC emisor 'EMPRESA SA', // Razón social emisor '601', // Régimen fiscal emisor 'BBB010101BBB', // RFC receptor '601', // Régimen fiscal receptor 'CLIENTE SA', // Razón social receptor 'G01', // Uso del CFDI (G01 = Adquisición de mercancias) '01234', // Código postal receptor '2024-06-03' // Términos de producción );</p>
<dl class="section note"><dt>Note</dt><dd>El layout generado sigue el formato requerido por Factura Moderna </dd>
<dd>
Incluye secciones para ComprobanteFiscalDigital, DatosAdicionales, Emisor y Receptor </dd>
<dd>
Los campos son requeridos para la generación correcta del CFDI </dd>
<dd>
El layout es utilizado por la función cfdi_crea_txt_layout para crear el archivo TXT </dd></dl>

</div>
</div>
<a id="a944037f661e81721673aef290babcacf" name="a944037f661e81721673aef290babcacf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a944037f661e81721673aef290babcacf">&#9670;&#160;</a></span>cfdi_crea_timbre_doc_venta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_crea_timbre_doc_venta </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$anf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$eidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$avidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$avtf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$avvrf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$osidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ridf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$rnmf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$rvalf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$docidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serief</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$foliof</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$usnnf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Genera el timbre para un documento de venta</p>
<p>Esta función genera el timbre fiscal para un documento de venta existente, utilizando el servicio de Factura Moderna. La función maneja el proceso de timbrado y actualización de estados en la base de datos.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$anf</td><td>Año del documento </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$eidf</td><td>ID de la empresa emisora </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$erfcf</td><td>RFC de la empresa emisora </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$sidf</td><td>ID de la sucursal </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$avidf</td><td>ID de la venta </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$avtf</td><td>Tipo de venta </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$avvrf</td><td>Valor de la venta </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$osidf</td><td>ID del documento de origen </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$ridf</td><td>ID del registro </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$rnmf</td><td>Razon social de la empresa </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$rvalf</td><td>Valor del documento </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$cidf</td><td>ID del cliente </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$docidf</td><td>ID del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$serief</td><td>Serie del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$foliof</td><td>Folio del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$usnnf</td><td>Usuario que realiza la operación</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void La función no retorna un valor directamente, pero actualiza el estado del CFDI en la base de datos</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Si ocurre un error durante el proceso de timbrado</td></tr>
  </table>
  </dd>
</dl>
<p>Ejemplo de uso: // Generar timbre para un documento de venta $cfdi_fm-&gt;cfdi_crea_timbre_doc_venta( '2024', // Año 1, // ID empresa 'AAA010101AAA', // RFC empresa 1, // ID sucursal 12345, // ID venta 'F', // Tipo de venta '1000.00', // Valor de venta 67890, // ID documento origen 123456, // ID registro 'Empresa SA', // Razon social '1000.00', // Valor documento 111, // ID cliente 23456, // ID documento 'F', // Serie '1234567890', // Folio 'usuario01' // Usuario );</p>
<dl class="section note"><dt>Note</dt><dd>La función utiliza la clase <a class="el" href="class_facturacion_moderna.html">FacturacionModerna</a> para el timbrado del CFDI </dd>
<dd>
Genera archivos XML, <a class="el" href="class_p_d_f.html">PDF</a> y PNG del CFDI en la carpeta archivos/cfdidoc/ </dd>
<dd>
Utiliza widgets para mostrar el estado del proceso al usuario </dd>
<dd>
Maneja diferentes estados de error y muestra mensajes apropiados </dd></dl>

</div>
</div>
<a id="a1a1a598dc908bac1f28742297eece53d" name="a1a1a598dc908bac1f28742297eece53d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a1a598dc908bac1f28742297eece53d">&#9670;&#160;</a></span>cfdi_crea_txt_layout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_crea_txt_layout </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$rfilef</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cfdif</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Guarda el layout del CFDI en un archivo TXT</p>
<p>Esta función guarda el layout generado en un archivo TXT, el cual será utilizado posteriormente para el timbrado del CFDI mediante el servicio de Factura Moderna.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$rfilef</td><td>Ruta completa del archivo TXT a crear </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$cfdif</td><td>Contenido del layout del CFDI</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void La función no retorna un valor directamente, pero crea el archivo TXT</dd></dl>
<p>Ejemplo de uso: // Guardar layout en archivo TXT $cfdi_fm-&gt;cfdi_crea_txt_layout( 'archivos/cfditxt/2024_123456.txt', // Ruta del archivo $layout_cfdi // Contenido del layout generado );</p>
<dl class="section note"><dt>Note</dt><dd>La función sobrescribe el archivo si ya existe </dd>
<dd>
Se utiliza para guardar tanto layouts de documentos como de pagos </dd>
<dd>
El archivo se crea en modo escritura ('w') </dd>
<dd>
Se asegura de cerrar el archivo correctamente después de escribir </dd>
<dd>
Es utilizada por las funciones cfdi_crea_layout_doc_venta y cfdi_crea_layout_cpago </dd></dl>

</div>
</div>
<a id="a503d1a7e95e60a16a49f42e3a6f6ed59" name="a503d1a7e95e60a16a49f42e3a6f6ed59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a503d1a7e95e60a16a49f42e3a6f6ed59">&#9670;&#160;</a></span>cfdi_doc_venta_crea_factura()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_doc_venta_crea_factura </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$anf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$eidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$avidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$osidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$rnmf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cnmf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$docidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serief</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$foliof</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$usnnf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Genera un CFDI para un documento de venta</p>
<p>Esta función genera un CFDI (Comprobante Fiscal Digital por Internet) para un documento de venta, utilizando el servicio de Factura Moderna para el timbrado. La función maneja la creación del archivo TXT con el layout, el timbrado del CFDI y el manejo de errores.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$anf</td><td>Año del documento </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$eidf</td><td>ID de la empresa emisora </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$erfcf</td><td>RFC de la empresa emisora </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$sidf</td><td>ID de la sucursal </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$avidf</td><td>ID de la venta </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$osidf</td><td>ID del documento de origen </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$rnmf</td><td>Razon social de la empresa </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$cidf</td><td>ID del cliente </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$cnmf</td><td>Nombre del cliente </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$docidf</td><td>ID del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$serief</td><td>Serie del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$foliof</td><td>Folio del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$usnnf</td><td>Usuario que realiza la operación</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void La función no retorna un valor directamente, pero actualiza el estado del CFDI en la base de datos</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Si ocurre un error durante el proceso de generación del CFDI</td></tr>
  </table>
  </dd>
</dl>
<p>Ejemplo de uso: // Generar CFDI para un documento de venta $cfdi_fm-&gt;cfdi_doc_venta_crea_factura( '2024', // Año 1, // ID empresa 'AAA010101AAA', // RFC empresa 1, // ID sucursal 12345, // ID venta 67890, // ID documento origen 'Empresa SA', // Razon social 111, // ID cliente 'Juan Pérez', // Nombre cliente 23456, // ID documento 'F', // Serie '1234567890', // Folio 'usuario01' // Usuario );</p>
<dl class="section note"><dt>Note</dt><dd>La función utiliza la clase <a class="el" href="class_facturacion_moderna.html">FacturacionModerna</a> para el timbrado del CFDI </dd>
<dd>
Genera archivos XML, <a class="el" href="class_p_d_f.html">PDF</a> y PNG del CFDI en la carpeta archivos/cfdidoc/ </dd>
<dd>
Maneja diferentes estados de error y muestra mensajes al usuario mediante widgets </dd></dl>

</div>
</div>
<a id="a36a77dc0fe360d5fca6bcb89466d2a4e" name="a36a77dc0fe360d5fca6bcb89466d2a4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a77dc0fe360d5fca6bcb89466d2a4e">&#9670;&#160;</a></span>cfdi_gcfdi_cpago_cli_crea_cfdi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_gcfdi_cpago_cli_crea_cfdi </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$anf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$eidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cnmf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$crfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serief</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$foliof</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$df</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$usnnf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Genera un CFDI de pago utilizando el servicio de Factura Moderna</p>
<p>Esta función se encarga de generar un CFDI de pago para un cliente específico, timbrarlo con Factura Moderna y actualizar los registros correspondientes en la base de datos.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$anf</td><td>Año del documento </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$eidf</td><td>ID de la empresa </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$erfcf</td><td>RFC de la empresa emisora </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$sidf</td><td>ID de la sucursal </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$cidf</td><td>ID del cliente </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$cnmf</td><td>Nombre del cliente </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$crfcf</td><td>RFC del cliente </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$serief</td><td>Serie del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$foliof</td><td>Folio del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$df</td><td>Modo de operación ('E' para error, otro valor para normal) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$usnnf</td><td>Usuario que realiza la operación</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void La función muestra mensajes de éxito o error según el resultado</dd></dl>
<p>Ejemplo de uso: $cfdi_fm-&gt;cfdi_gcfdi_cpago_cli_crea_cfdi( "2024", 1, "AAA010101AAA", 1, 123, "Juan Pérez", "AAA010101AAA", "A", "123", "E", "admin" ); </p>

</div>
</div>
<a id="a04e3f7606727f913967fc639a3b607cb" name="a04e3f7606727f913967fc639a3b607cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04e3f7606727f913967fc639a3b607cb">&#9670;&#160;</a></span>cfdi_gcfdi_doc_vta_crea_factura()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_gcfdi_doc_vta_crea_factura </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$anf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$eidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$avidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$osidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cnmf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$docidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serief</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$foliof</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ttdocf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$df</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$usnnf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Genera un CFDI de factura para un documento de venta</p>
<p>Esta función genera un CFDI de factura para un documento de venta específico, utilizando el servicio de Factura Moderna. Maneja la creación del layout, timbrado y almacenamiento de los archivos generados, así como la actualización de estados en la base de datos.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$anf</td><td>Año del documento </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$eidf</td><td>ID de la empresa </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$erfcf</td><td>RFC de la empresa emisora </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$sidf</td><td>ID de la sucursal </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$avidf</td><td>ID de la venta </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$osidf</td><td>ID del documento de origen </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$cidf</td><td>ID del cliente </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$cnmf</td><td>Nombre del cliente </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$docidf</td><td>ID del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$serief</td><td>Serie del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$foliof</td><td>Folio del documento </td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$ttdocf</td><td>Total del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$df</td><td>Modo de operación ('E' para error, otro valor para normal) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$usnnf</td><td>Usuario que realiza la operación</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void La función muestra mensajes de éxito o error al usuario</dd></dl>
<p>Ejemplo de uso: // Generar CFDI de factura para un documento de venta cfdi_gcfdi_doc_vta_crea_factura($año, $id_empresa, $rfc_empresa, $id_sucursal, $id_venta, $id_doc_origen, $id_cliente, $nombre_cliente, $id_doc, $serie, $folio, $total, 'N', $usuario); </p>

</div>
</div>
<a id="aff884654dadbd8dc4de36e7f0b04f814" name="aff884654dadbd8dc4de36e7f0b04f814"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff884654dadbd8dc4de36e7f0b04f814">&#9670;&#160;</a></span>cfdi_gcfdi_fg_doc_crea_factura()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_gcfdi_fg_doc_crea_factura </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$anf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$eidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$avidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$osidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cnmf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$docidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serief</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$foliof</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$exdocf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ttdocf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$df</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$usnnf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Genera un CFDI de factura para un documento</p>
<p>Esta función genera un CFDI de factura para un documento específico, utilizando el servicio de Factura Moderna. Maneja la creación del layout, timbrado y almacenamiento de los archivos generados.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$anf</td><td>Año del documento </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$eidf</td><td>ID de la empresa </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$erfcf</td><td>RFC de la empresa emisora </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$sidf</td><td>ID de la sucursal </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$avidf</td><td>ID de la venta </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$osidf</td><td>ID del documento de origen </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$cidf</td><td>ID del cliente </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$cnmf</td><td>Nombre del cliente </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$docidf</td><td>ID del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$serief</td><td>Serie del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$foliof</td><td>Folio del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$exdocf</td><td>Indicador de documento de venta </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$ttdocf</td><td>Total del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$df</td><td>Modo de operación ('E' para error, otro valor para normal) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$usnnf</td><td>Usuario que realiza la operación</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void La función muestra mensajes de éxito o error al usuario</dd></dl>
<p>Ejemplo de uso: // Generar CFDI de factura para una venta cfdi_gcfdi_fg_doc_crea_factura($año, $id_empresa, $rfc_empresa, $id_sucursal, $id_venta, $id_doc_origen, $id_cliente, $nombre_cliente, $id_doc, $serie, $folio, $indicador_documento_venta, $total, 'N', $usuario); </p>

</div>
</div>
<a id="abeada046b468d2ebcb4e040897a31e04" name="abeada046b468d2ebcb4e040897a31e04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeada046b468d2ebcb4e040897a31e04">&#9670;&#160;</a></span>cfdi_gnotif_cancela_uuid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_gnotif_cancela_uuid </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$uuidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$mvoidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$uuidrlf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$passf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$urlf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancela un CFDI de notificación</p>
<p>Esta función cancela un CFDI de notificación utilizando el servicio de Factura Moderna. Maneja diferentes motivos de cancelación y actualiza el estado del documento en el sistema. Los motivos de cancelación son:</p><ul>
<li>01: Complemento de Sustitución (requiere UUID relacionado)</li>
<li>02: Cancelación</li>
<li>03: Descarga</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$erfcf</td><td>RFC de la empresa emisora </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$uuidf</td><td>UUID del CFDI a cancelar </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$mvoidf</td><td>Motivo de cancelación (01, 02 o 03) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$uuidrlf</td><td>UUID del CFDI relacionado (solo para motivo 01) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$userf</td><td>Usuario del PAC </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$passf</td><td>Contraseña del PAC </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$urlf</td><td>URL del servicio web del PAC</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string Retorna "S - SOLICITUD ENVIADA" si la cancelación fue exitosa, o el mensaje de error</dd></dl>
<p>Ejemplo de uso: // Cancelar un CFDI de notificación con motivo de sustitución $resultado = cfdi_gnotif_cancela_uuid($rfc_empresa, $uuid, '01', $uuid_nuevo, $usuario_pac, $pass_pac, $url_pac);</p>
<p>// Cancelar un CFDI de notificación con motivo de cancelación $resultado = cfdi_gnotif_cancela_uuid($rfc_empresa, $uuid, '02', '', $usuario_pac, $pass_pac, $url_pac); </p>

</div>
</div>
<a id="a7c5a35f52ff0eaa1c38644297bd08caf" name="a7c5a35f52ff0eaa1c38644297bd08caf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c5a35f52ff0eaa1c38644297bd08caf">&#9670;&#160;</a></span>cfdi_gnotif_consulta_uuid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_gnotif_consulta_uuid </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$uuidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$crfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tvtaf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$passf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$urlf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Consulta el estado de un CFDI de notificación</p>
<p>Esta función consulta el estado actual de un CFDI de notificación en el servicio de Factura Moderna. Verifica si el CFDI está válido, cancelado o si existe algún error en su estado.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$erfcf</td><td>RFC de la empresa emisora </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$uuidf</td><td>UUID del CFDI a consultar </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$crfcf</td><td>RFC de la empresa receptora </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$tvtaf</td><td>Total de la factura </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$userf</td><td>Usuario del PAC </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$passf</td><td>Contraseña del PAC </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$urlf</td><td>URL del servicio web del PAC</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string Retorna el estado del CFDI o el mensaje de error correspondiente</dd></dl>
<p>Ejemplo de uso: // Consultar el estado de un CFDI de notificación $estado = cfdi_gnotif_consulta_uuid($rfc_empresa, $uuid, $usuario_pac, $pass_pac, $url_pac); </p>

</div>
</div>
<a id="a47c4b0f93c333fdbad079c6a4ea6e2c0" name="a47c4b0f93c333fdbad079c6a4ea6e2c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47c4b0f93c333fdbad079c6a4ea6e2c0">&#9670;&#160;</a></span>cfdi_mdocs_vta_docs_crea_factura()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_mdocs_vta_docs_crea_factura </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$anf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$eidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$avidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cnmf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serief</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$foliof</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$ttdocf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$df</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$usnnf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Genera un CFDI para múltiples documentos de venta</p>
<p>Esta función genera un CFDI que agrupa múltiples documentos de venta en una sola factura, utilizando el servicio de Factura Moderna. Maneja la creación del layout, timbrado y almacenamiento de los archivos generados, así como la actualización de estados en la base de datos.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$anf</td><td>Año del documento </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$eidf</td><td>ID de la empresa </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$erfcf</td><td>RFC de la empresa emisora </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$sidf</td><td>ID de la sucursal </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$avidf</td><td>ID de la venta </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$cidf</td><td>ID del cliente </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$cnmf</td><td>Nombre del cliente </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$serief</td><td>Serie del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$foliof</td><td>Folio del documento </td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$ttdocf</td><td>Total del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$df</td><td>Modo de operación ('E' para error, otro valor para normal) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$usnnf</td><td>Usuario que realiza la operación</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void La función muestra mensajes de éxito o error al usuario</dd></dl>
<p>Ejemplo de uso: // Generar CFDI para múltiples documentos de venta cfdi_mdocs_vta_docs_crea_factura($año, $id_empresa, $rfc_empresa, $id_sucursal, $id_venta, $id_cliente, $nombre_cliente, $serie, $folio, $total, 'N', $usuario); </p>

</div>
</div>
<a id="a082eb158001ba22e456d5cbf6008ac6b" name="a082eb158001ba22e456d5cbf6008ac6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a082eb158001ba22e456d5cbf6008ac6b">&#9670;&#160;</a></span>cfdi_ticket_vta_crea_factura()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_ticket_vta_crea_factura </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$anf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$eidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$erfcf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$avidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$osidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$docidf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serief</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$foliof</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$df</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$usnnf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Genera un CFDI de ticket de venta</p>
<p>Esta función genera un CFDI para un ticket de venta, utilizando el servicio de Factura Moderna. Maneja la creación del layout, timbrado y almacenamiento de los archivos generados, incluyendo <a class="el" href="class_p_d_f.html">PDF</a> y CBB.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$anf</td><td>Año del documento </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$eidf</td><td>ID de la empresa </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$erfcf</td><td>RFC de la empresa emisora </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$sidf</td><td>ID de la sucursal </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$avidf</td><td>ID de la venta </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$osidf</td><td>ID del documento de origen </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$cidf</td><td>ID del cliente </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$docidf</td><td>ID del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$serief</td><td>Serie del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$foliof</td><td>Folio del documento </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$df</td><td>Modo de operación ('E' para error, otro valor para normal) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$usnnf</td><td>Usuario que realiza la operación</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void La función muestra mensajes de éxito o error al usuario</dd></dl>
<p>Ejemplo de uso: // Generar CFDI de ticket de venta cfdi_ticket_vta_crea_factura($año, $id_empresa, $rfc_empresa, $id_sucursal, $id_venta, $id_doc_origen, $id_cliente, $id_doc, $serie, $folio, 'N', $usuario); </p>

</div>
</div>
<a id="aa067916e8f4ee4e05ed956e3d1600b2f" name="aa067916e8f4ee4e05ed956e3d1600b2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa067916e8f4ee4e05ed956e3d1600b2f">&#9670;&#160;</a></span>cfdi_view_txt_layout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cfdi_view_txt_layout </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$rftxtf</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lee el contenido de un archivo TXT con el layout del CFDI</p>
<p>Esta función lee y muestra el contenido de un archivo TXT que contiene el layout del CFDI a generar.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$rftxtf</td><td>Ruta del archivo TXT a leer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string Contenido del archivo TXT</dd></dl>
<p>Ejemplo de uso: $contenido = $cfdi_fm-&gt;cfdi_view_txt_layout('archivos/cpgtxt/2024_123.txt'); </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>ventas/clases/<b>class_cfdi.php</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classc___c_f_di__fm.html">c_CFDi_fm</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
