{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Documentaci\u00f3n T\u00e9cnica - SIAC 2.0 Ventas","text":""},{"location":"#1-introduccion","title":"1. Introducci\u00f3n","text":""},{"location":"#11-proposito-del-documento","title":"1.1 Prop\u00f3sito del Documento","text":"<p>Este documento t\u00e9cnico forma parte de la documentaci\u00f3n oficial del Sistema Integrado de Administraci\u00f3n de Comercio (SIAC) versi\u00f3n 2.0. Espec\u00edficamente, se centra en el m\u00f3dulo de Ventas, proporcionando una descripci\u00f3n detallada de las APIs y servicios que integran este componente con otros sistemas empresariales.</p>"},{"location":"#12-contexto-del-sistema","title":"1.2 Contexto del Sistema","text":"<p>El SIAC 2.0 es una soluci\u00f3n empresarial modular desarrollada en PHP nativo, siguiendo una arquitectura en capas que incluye:</p> <ul> <li>Capa de Presentaci\u00f3n: Interfaz de usuario, widgets, tablas y scripts AJAX</li> <li>Capa de Negocio: M\u00f3dulos especializados (Ventas, Facturaci\u00f3n, CEDIS, CRM, etc.)</li> <li>Capa de Base de Datos: MySQL con tablas, procedimientos y vistas</li> </ul>"},{"location":"#13-alcance-del-sistema","title":"1.3 Alcance del Sistema","text":"<p>Este documento t\u00e9cnico abarca la documentaci\u00f3n completa del Sistema Integrado de Administraci\u00f3n de Comercio (SIAC) versi\u00f3n 2.0, incluyendo todos sus m\u00f3dulos principales:</p> <ul> <li>CEDIS (Inventario)</li> <li>CRM (Gesti\u00f3n de Clientes)</li> <li>Ventas</li> <li>Facturaci\u00f3n</li> <li>Liquidaci\u00f3n</li> <li>Caja</li> <li>Reportes</li> <li>Configuraci\u00f3n del Sistema</li> </ul> <p>Cada m\u00f3dulo est\u00e1 integrado con servicios y APIs que permiten la comunicaci\u00f3n entre componentes y con sistemas externos, proporcionando una soluci\u00f3n empresarial completa y modular.</p>"},{"location":"#14-estructura-del-documento","title":"1.4 Estructura del Documento","text":"<p>El documento est\u00e1 organizado en secciones que describen cada servicio, incluyendo:</p> <p>Descripci\u00f3n general del servicio Par\u00e1metros de entrada y salida M\u00e9todos disponibles Ejemplos de uso Consideraciones de seguridad Manejo de errores</p>"},{"location":"#15-requisitos-previos","title":"1.5 Requisitos Previos","text":"<p>Para entender y utilizar correctamente la informaci\u00f3n proporcionada en este documento, se requiere:</p> <ul> <li>Conocimientos b\u00e1sicos de PHP y JavaScript</li> <li>Entendimiento de protocolos HTTP y HTTPS</li> <li>Familiaridad con el uso de APIs REST</li> <li>Conocimientos de seguridad en el manejo de datos sensibles</li> </ul>"},{"location":"#16-convenios-de-documentacion","title":"1.6 Convenios de Documentaci\u00f3n","text":"<ul> <li>Los nombres de las clases y m\u00e9todos siguen el patr\u00f3n de nomenclatura del sistema</li> <li>Los par\u00e1metros de entrada est\u00e1n en formato camelCase</li> <li>Las respuestas de los servicios se proporcionan en formato JSON</li> <li>Los c\u00f3digos de error siguen el est\u00e1ndar HTTP</li> <li>Se incluyen ejemplos de implementaci\u00f3n y uso</li> </ul>"},{"location":"#17-actualizaciones-del-documento","title":"1.7 Actualizaciones del Documento","text":"<p>Este documento ser\u00e1 actualizado peri\u00f3dicamente para reflejar cambios en las integraciones y servicios. Se mantendr\u00e1 una versi\u00f3n controlada con fecha de \u00faltima actualizaci\u00f3n.</p>"},{"location":"#18-contacto","title":"1.8 Contacto","text":"<p>Para consultas t\u00e9cnicas o reporte de errores en la documentaci\u00f3n, contactar al equipo de desarrollo de SIAC.</p>"},{"location":"asincronicos/","title":"Ficha T\u00e9cnica de Procesos Asincr\u00f3nicos - SIAC 2.0 Ventas","text":""},{"location":"asincronicos/#1-proposito-general","title":"1. Prop\u00f3sito General","text":"<p>Los procesos asincr\u00f3nicos en el sistema de ventas est\u00e1n dise\u00f1ados para mejorar la experiencia del usuario y optimizar la eficiencia del sistema, especialmente en operaciones que requieren tiempo de procesamiento o interacci\u00f3n con dispositivos externos.</p>"},{"location":"asincronicos/#2-componentes-principales","title":"2. Componentes Principales","text":""},{"location":"asincronicos/#21-modulo-de-tickets","title":"2.1 M\u00f3dulo de Tickets","text":"<p>Implementa operaciones asincr\u00f3nicas para la gesti\u00f3n de impresi\u00f3n: Archivos: ConectorJavaScript.js, ticket_venta.php</p> <ul> <li> <p>Funciones:</p> <ul> <li><code>obtenerImpresoras()</code>: Consulta asincr\u00f3nica de impresoras disponibles</li> <li><code>obtenerImpresorasRemotas()</code>: Consulta asincr\u00f3nica de impresoras remotas</li> <li><code>imprimirEnImpresoraRemota()</code>: Impresi\u00f3n as\u00edncrona en impresoras remotas</li> <li><code>imprimirEn()</code>: Impresi\u00f3n as\u00edncrona local</li> <li><code>obtenerListaDeImpresoras()</code>: Gesti\u00f3n as\u00edncrona de dispositivos</li> <li><code>init()</code>: Inicializaci\u00f3n as\u00edncrona del sistema de impresi\u00f3n</li> <li><code>demostrarCapacidades()</code>: Pruebas as\u00edncronas de impresi\u00f3n</li> </ul> </li> </ul>"},{"location":"asincronicos/#22-modulo-de-widgets","title":"2.2 M\u00f3dulo de Widgets","text":"<p>Realiza consultas as\u00edncronas para actualizaci\u00f3n de widgets en tiempo real:</p> <p>Archivos: vta_widgets.php, wk_widgets.php</p> <p>Funciones:</p> <ul> <li><code>vta_view_query_x_scrip()</code>: Consultas as\u00edncronas para widgets de ventas</li> <li><code>wk_view_work_pv_av_info_x_ids()</code>: Consultas as\u00edncronas para widgets de trabajo</li> <li><code>wk_view_work_pv_av_cza_abns_oper_x_ids()</code>: Consultas as\u00edncronas para zona de abono</li> </ul>"},{"location":"asincronicos/#23-modulo-de-graficas","title":"2.3 M\u00f3dulo de Gr\u00e1ficas","text":"<p>Genera datos as\u00edncronos para visualizaci\u00f3n:</p> <p>Archivos: wk_graficas.php</p> <p>Funciones:</p> <ul> <li><code>wk_view_av_vta_anual_oper_x_ids()</code>: Datos asincr\u00f3nicos para gr\u00e1ficas anuales</li> <li><code>wk_view_ws_eje_mes_x_ids()</code>: Datos asincr\u00f3nicos por mes</li> <li><code>wk_view_work_vta_mes_oper_x_ids()</code>: Datos asincr\u00f3nicos de ventas mensuales</li> </ul>"},{"location":"asincronicos/#3-arquitectura-tecnica","title":"3. Arquitectura T\u00e9cnica","text":""},{"location":"asincronicos/#31-patrones-de-diseno","title":"3.1 Patrones de Dise\u00f1o","text":"<ul> <li>Promesas (Promises): Utiliza el patr\u00f3n Promise para manejar operaciones as\u00edncronas</li> <li>Eventos as\u00edncronos: Implementaci\u00f3n de eventos que no bloquean la interfaz</li> <li>Manejo de errores: Sistema de captura de errores para operaciones as\u00edncronas</li> </ul>"},{"location":"asincronicos/#32-tecnologias","title":"3.2 Tecnolog\u00edas","text":"<ul> <li>JavaScript/ES6+</li> <li>AJAX para comunicaciones as\u00edncronas</li> <li>Tokens de seguridad para validaci\u00f3n de sesiones</li> <li>TCPDF para generaci\u00f3n de PDFs</li> </ul>"},{"location":"asincronicos/#4-casos-de-uso-principales","title":"4. Casos de Uso Principales","text":""},{"location":"asincronicos/#41-impresion","title":"4.1 Impresi\u00f3n","text":"<ul> <li>Detecci\u00f3n autom\u00e1tica de impresoras</li> <li>Impresi\u00f3n en m\u00faltiples dispositivos simult\u00e1neamente</li> <li>Manejo de errores en tiempo real</li> <li>Previsualizaci\u00f3n as\u00edncrona de tickets</li> </ul>"},{"location":"asincronicos/#42-operaciones-de-venta","title":"4.2 Operaciones de Venta","text":"<ul> <li>Validaci\u00f3n as\u00edncrona de existencias</li> <li>C\u00e1lculo as\u00edncrono de totales</li> <li>Actualizaci\u00f3n as\u00edncrona de inventario</li> <li>Generaci\u00f3n as\u00edncrona de documentos fiscales</li> </ul>"},{"location":"asincronicos/#43-actualizacion-de-widgets","title":"4.3 Actualizaci\u00f3n de Widgets","text":"<ul> <li>Actualizaci\u00f3n autom\u00e1tica de KPIs</li> <li>Consultas as\u00edncronas a base de datos</li> <li>Actualizaci\u00f3n de m\u00e9tricas en tiempo real</li> <li>Manejo de estados de carga</li> </ul>"},{"location":"asincronicos/#43-generacion-de-graficas","title":"4.3 Generaci\u00f3n de Gr\u00e1ficas","text":"<ul> <li>C\u00e1lculo as\u00edncrono de datos</li> <li>Generaci\u00f3n de gr\u00e1ficas en segundo plano</li> <li>Actualizaci\u00f3n autom\u00e1tica de visualizaciones</li> <li>Manejo de grandes vol\u00famenes de datos</li> </ul>"},{"location":"asincronicos/#5-consideraciones-de-seguridad","title":"5. Consideraciones de Seguridad","text":"<ul> <li>Validaci\u00f3n de sesiones en cada operaci\u00f3n as\u00edncrona</li> <li>Tokens de seguridad para cada petici\u00f3n</li> <li>Manejo seguro de errores para evitar informaci\u00f3n sensible</li> <li>Control de permisos en operaciones as\u00edncronas</li> </ul>"},{"location":"asincronicos/#6-manejo-de-errores","title":"6. Manejo de Errores","text":"<ul> <li>Captura de errores en operaciones as\u00edncronas</li> <li>Mensajes de error personalizados</li> <li>Sistema de logging para debugging</li> <li>Recuperaci\u00f3n autom\u00e1tica en casos de fallo</li> </ul>"},{"location":"asincronicos/#7-optimizacion","title":"7. Optimizaci\u00f3n","text":"<ul> <li>Minimizaci\u00f3n de llamadas al servidor</li> <li>Cach\u00e9 de datos para operaciones recurrentes</li> <li>Priorizaci\u00f3n de tareas as\u00edncronas</li> <li>Manejo eficiente de recursos</li> </ul>"},{"location":"asincronicos/#8-mejores-practicas","title":"8. Mejores Pr\u00e1cticas","text":"<ul> <li>Uso consistente de async/await</li> <li>Manejo adecuado de estados de carga</li> <li>Feedback visual para el usuario</li> <li>Documentaci\u00f3n clara de procesos as\u00edncronos</li> </ul>"},{"location":"errores/","title":"Ficha T\u00e9cnica de Manejo de Errores - SIAC 2.0 Ventas","text":""},{"location":"errores/#1-proposito-general","title":"1. Prop\u00f3sito General","text":"<p>El sistema de manejo de errores est\u00e1 dise\u00f1ado para proporcionar una experiencia robusta y confiable, manejando adecuadamente los errores en todas las capas del sistema.</p>"},{"location":"errores/#2-tipos-de-errores-manejados","title":"2. Tipos de Errores Manejados","text":""},{"location":"errores/#21-errores-de-base-de-datos","title":"2.1 Errores de Base de Datos","text":"<ul> <li>Errores de conexi\u00f3n</li> <li>Errores de consulta</li> <li>Errores de transacci\u00f3n</li> <li>Errores de integridad de datos</li> </ul>"},{"location":"errores/#22-errores-de-frontend","title":"2.2 Errores de Frontend","text":"<ul> <li>Errores de validaci\u00f3n de formulario</li> <li>Errores de AJAX</li> <li>Errores de impresi\u00f3n</li> <li>Errores de permisos</li> </ul>"},{"location":"errores/#23-errores-de-negocio","title":"2.3 Errores de Negocio","text":"<ul> <li>Errores de presupuesto</li> <li>Errores de permisos de usuario</li> <li>Errores de existencias</li> <li>Errores de validaci\u00f3n de datos</li> </ul>"},{"location":"errores/#3-sistema-de-manejo-de-errores","title":"3. Sistema de Manejo de Errores","text":""},{"location":"errores/#31-manejo-de-errores-en-php","title":"3.1 Manejo de Errores en PHP","text":"<pre><code>if (!$obj_up-&gt;vta_up_suc_comision_query_x_ids($eidv, $sidv, $queryv)) {\n    echo 'ERROR';\n}\n</code></pre>"},{"location":"errores/#32-manejo-de-errores-en-javascript","title":"3.2 Manejo de Errores en JavaScript","text":"<pre><code>try {\n    // C\u00f3digo que puede fallar\n} catch(e) {\n    try {\n        // Manejo de error alternativo\n    } catch(E) {\n        // Manejo final de error\n    }\n}\n</code></pre>"},{"location":"errores/#4-sistema-de-alertas","title":"4. Sistema de Alertas","text":""},{"location":"errores/#41-tipos-de-alertas","title":"4.1 Tipos de Alertas","text":"<ul> <li>Alertas de \u00e9xito</li> <li>Alertas de advertencia</li> <li>Alertas de error</li> <li>Alertas de informaci\u00f3n</li> </ul>"},{"location":"errores/#42-componentes-de-alertas","title":"4.2 Componentes de Alertas","text":"<pre><code>&lt;div class='alert alert-icon-left alert-danger alert-dismissible mb-2 text-center' role='alert'&gt;\n    &lt;span class='alert-icon'&gt;&lt;i class='ft ft-alert-octagon'&gt;&lt;/i&gt;&lt;/span&gt;\n    &lt;strong&gt;\u00a1ERROR! =&gt; DESCRIPCI\u00d3N DEL ERROR&lt;/strong&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"errores/#5-manejo-de-errores-en-ajax","title":"5. Manejo de Errores en AJAX","text":""},{"location":"errores/#51-errores-de-comunicacion","title":"5.1 Errores de Comunicaci\u00f3n","text":"<pre><code>$.ajax({\n    url: 'wk_ajax.php',\n    type: 'POST',\n    data: datos,\n    success: function(response) {\n        // Manejo de \u00e9xito\n    },\n    error: function(xhr, status, error) {\n        // Manejo de error\n    }\n});\n</code></pre>"},{"location":"errores/#52-errores-de-validacion","title":"5.2 Errores de Validaci\u00f3n","text":"<pre><code>if (error) {\n    $(\"#modal_msj_error\").html('\u00a1ERROR! =&gt; DESCRIPCI\u00d3N DEL ERROR');\n}\n</code></pre>"},{"location":"errores/#6-manejo-de-errores-en-impresion","title":"6. Manejo de Errores en Impresi\u00f3n","text":""},{"location":"errores/#61-errores-de-dispositivo","title":"6.1 Errores de Dispositivo","text":"<ul> <li>Detecci\u00f3n fallida de impresoras</li> <li>Impresi\u00f3n remota fallida</li> <li>Falta de papel</li> <li>Conexi\u00f3n fallida</li> </ul>"},{"location":"errores/#62-manejo-de-errores","title":"6.2 Manejo de Errores","text":"<pre><code>static async obtenerImpresoras(ruta) {\n    try {\n        const response = await fetch(ConectorPlugin.URL_PLUGIN_POR_DEFECTO + \"/impresoras\");\n        return await response.json();\n    } catch (error) {\n        // Manejo de error\n    }\n}\n</code></pre>"},{"location":"errores/#7-sistema-de-logging","title":"7. Sistema de Logging","text":""},{"location":"errores/#71-tipos-de-logs","title":"7.1 Tipos de Logs","text":"<ul> <li>Logs de error</li> <li>Logs de advertencia</li> <li>Logs de informaci\u00f3n</li> <li>Logs de depuraci\u00f3n</li> </ul>"},{"location":"errores/#72-manejo-de-logs","title":"7.2 Manejo de Logs","text":"<pre><code>// PHP\nerror_log(\"Error: \" . $errorMessage);\n\n// JavaScript\nconsole.error(\"Error: \" + errorMessage);\n</code></pre>"},{"location":"errores/#8-mejores-practicas","title":"8. Mejores Pr\u00e1cticas","text":""},{"location":"errores/#81-manejo-de-errores","title":"8.1 Manejo de Errores","text":"<ul> <li>Siempre usar try-catch para operaciones cr\u00edticas</li> <li>Proporcionar mensajes de error claros y descriptivos</li> <li>No mostrar informaci\u00f3n sensible en mensajes de error</li> <li>Implementar fallbacks para operaciones fallidas</li> </ul>"},{"location":"errores/#82-validacion","title":"8.2 Validaci\u00f3n","text":"<ul> <li>Validar datos antes de procesarlos</li> <li>Validar permisos antes de realizar operaciones</li> <li>Validar estados antes de cambios</li> <li>Validar integridad de datos</li> </ul>"},{"location":"errores/#83-recuperacion","title":"8.3 Recuperaci\u00f3n","text":"<ul> <li>Implementar mecanismos de rollback</li> <li>Proporcionar opciones de reintentar</li> <li>Mantener estados consistentes</li> <li>Implementar timeouts para operaciones largas</li> </ul>"},{"location":"errores/#9-referencias-de-codigo","title":"9. Referencias de C\u00f3digo","text":""},{"location":"errores/#91-archivos-principales","title":"9.1 Archivos Principales","text":"<ul> <li><code>wk_ajax.php</code>: Manejo de errores en AJAX</li> <li><code>wk_ajax.js</code>: Manejo de errores en JavaScript</li> <li><code>ConectorJavaScript.js</code>: Manejo de errores en impresi\u00f3n</li> <li><code>save_send.php</code>: Manejo de errores en operaciones</li> </ul>"},{"location":"errores/#92-funciones-principales","title":"9.2 Funciones Principales","text":"<pre><code>// PHP\nvta_up_suc_comision_query_x_ids()\nwk_f_user_workspace_x_ids()\ncds_up_gos_cedis_av_os_prod_cnt_mstk_x_ids()\n\n// JavaScript\nobtenerImpresoras()\nimprimirEnImpresoraRemota()\n</code></pre>"},{"location":"errores/#10-consideraciones-de-seguridad","title":"10. Consideraciones de Seguridad","text":"<ul> <li>No mostrar informaci\u00f3n sensible en mensajes de error</li> <li>Validar siempre los datos de entrada</li> <li>Implementar l\u00edmites de intentos</li> <li>Registrar intentos fallidos</li> <li>Implementar pol\u00edticas de seguridad para operaciones cr\u00edticas</li> </ul>"},{"location":"integraciones/","title":"Integraciones del Sistema SIAC 2.0","text":"<p>Este documento describe la las integraciones entre m\u00f3dulos del sistema SIAC 2.0 ventas, una soluci\u00f3n empresarial modular desarrollada principalmente en PHP. Est\u00e1 dise\u00f1ada bajo principios de escalabilidad, separaci\u00f3n de responsabilidades y facilidad de mantenimiento.</p>"},{"location":"integraciones/#1-modulos-principales-del-sistema","title":"1. M\u00f3dulos Principales del Sistema","text":"<p>Los m\u00f3dulos est\u00e1n organizados por dominio. Cada uno se documenta por separado con su funcionalidad, estructura de archivos y base de datos espec\u00edfica.</p> <ul> <li> <p>Caja: manejo de recibos, liquidaciones, cobros.</p> </li> <li> <p>CRM: gesti\u00f3n de clientes, visitas, rutas.</p> </li> <li> <p>CEDIS: control de inventario y distribuci\u00f3n.</p> </li> <li> <p>Ventas: pedidos, precios, promociones, facturaci\u00f3n.</p> </li> <li> <p>Facturaci\u00f3n: generaci\u00f3n y timbrado de CFDI.</p> </li> <li> <p>Liquidaci\u00f3n: comisiones, validaci\u00f3n de \u00f3rdenes, cierre mensual.</p> </li> </ul>"},{"location":"integraciones/#2-dependencias-entre-modulos","title":"2. Dependencias entre M\u00f3dulos","text":""},{"location":"integraciones/#21-dependencias-funcionales","title":"2.1 Dependencias Funcionales","text":"M\u00f3dulo Origen M\u00f3dulo Destino Dependencia Tipo de Dependencia Descripci\u00f3n CEDIS Ventas Stock Directa El m\u00f3dulo de ventas consulta el stock disponible en CEDIS antes de procesar un pedido. CRM Ventas Clientes Directa Las ventas dependen de la informaci\u00f3n de clientes proporcionada por CRM para generar pedidos. Ventas Facturaci\u00f3n Pedidos Directa La facturaci\u00f3n requiere informaci\u00f3n de pedidos de ventas para generar facturas. Ventas Liquidaci\u00f3n Comisiones Directa La liquidaci\u00f3n utiliza informaci\u00f3n de ventas para calcular comisiones. Caja Liquidaci\u00f3n Cobros Directa La liquidaci\u00f3n requiere informaci\u00f3n de cobros de caja para conciliar pagos. Reportes Todos Datos Indirecta Los reportes dependen de datos de todos los m\u00f3dulos para generar an\u00e1lisis. Configuraci\u00f3n Todos Par\u00e1metros Indirecta Todos los m\u00f3dulos dependen de la configuraci\u00f3n para obtener par\u00e1metros globales. CEDIS CEDIS Stock Directa Controla el movimiento de productos entre sucursales"},{"location":"integraciones/#22-flujo-de-datos","title":"2.2 Flujo de Datos","text":"<ol> <li>Flujo CEDIS - Ventas - Facturaci\u00f3n</li> </ol>  sequenceDiagram     participant CEDIS     participant Ventas     participant Facturaci\u00f3n     participant Cliente     CEDIS-&gt;&gt;Ventas: Stock disponible     Ventas-&gt;&gt;Facturaci\u00f3n: Pedido     Facturaci\u00f3n-&gt;&gt;Cliente: CFDI     Cliente-&gt;&gt;Facturaci\u00f3n: Pago     Facturaci\u00f3n-&gt;&gt;Caja: Registro de pago  <ol> <li>Flujo CRM - Ventas - Liquidaci\u00f3n</li> </ol>  sequenceDiagram     participant CRM     participant Ventas     participant Liquidaci\u00f3n     CRM-&gt;&gt;Ventas: Perfil Cliente     Ventas-&gt;&gt;Liquidaci\u00f3n: Venta Realizada     Liquidaci\u00f3n-&gt;&gt;Ventas: Comisi\u00f3n Calculada  <ol> <li>Flujo de Traslado de Productos</li> </ol>  sequenceDiagram     participant SucursalA     participant Traslados     participant CEDIS     participant SucursalB     participant Facturaci\u00f3n     participant Caja      SucursalA-&gt;&gt;Traslados: Solicitud de traslado     Traslados-&gt;&gt;CEDIS: Verifica stock en A     CEDIS-&gt;&gt;Traslados: Confirma disponibilidad     Traslados-&gt;&gt;SucursalB: Notifica recepci\u00f3n esperada     SucursalB-&gt;&gt;Traslados: Confirma recepci\u00f3n     Traslados-&gt;&gt;CEDIS: Actualiza inventarios     CEDIS-&gt;&gt;SucursalA: Actualiza stock A     CEDIS-&gt;&gt;SucursalB: Actualiza stock B     SucursalB-&gt;&gt;Facturaci\u00f3n: Genera CFDI (si aplica)     Facturaci\u00f3n-&gt;&gt;Caja: Registro de movimientos"},{"location":"integraciones/#23-dependencias-de-procesos","title":"2.3 Dependencias de Procesos","text":"<p>Proceso de Venta Completo</p>  graph LR     A[CRM - Cliente] --&gt; B[Ventas - Pedido]     B --&gt; C[CEDIS - Stock]     C --&gt; D[Facturaci\u00f3n - CFDI]     D --&gt; E[Caja - Cobro]     E --&gt; F[Liquidaci\u00f3n - Comisi\u00f3n]  <p>Proceso de Facturaci\u00f3n</p>  graph LR     A[Ventas - Pedido] --&gt; B[Facturaci\u00f3n - CFDI]     B --&gt; C[Caja - Pago]     C --&gt; D[Liquidaci\u00f3n - Conciliaci\u00f3n]  <p>Proceso de Orden de Traslado</p>  graph LR     A[Pedido en Sucursal B] --&gt; B[Verifica Stock en CEDIS]     B --&gt; C[Genera Orden de Traslado]     C --&gt; D[Notifica Sucursal A]     D --&gt; E[Prepara Traslado]     E --&gt; F[Confirma Recepci\u00f3n]     F --&gt; G[Actualiza Inventario]"},{"location":"integraciones/#24-puntos-de-integracion-criticos","title":"2.4 Puntos de Integraci\u00f3n Cr\u00edticos","text":"<ul> <li> <p>Integraci\u00f3n CEDIS-Ventas</p> <ul> <li>Verificaci\u00f3n de stock</li> <li>Actualizaci\u00f3n de inventario</li> <li>Notificaciones de stock bajo</li> </ul> </li> <li> <p>Integraci\u00f3n CRM-Ventas</p> <ul> <li>Validaci\u00f3n de cr\u00e9dito</li> <li>Historial de compras</li> <li>Segmentaci\u00f3n de clientes</li> </ul> </li> <li>Integraci\u00f3n Ventas-Facturaci\u00f3n<ul> <li>Generaci\u00f3n de CFDI</li> <li>Validaci\u00f3n fiscal</li> <li>Timbrado</li> </ul> </li> <li>Integraci\u00f3n Caja-Liquidaci\u00f3n<ul> <li>Conciliaci\u00f3n de pagos</li> <li>Distribuci\u00f3n de comisiones</li> <li>Reportes financieros</li> </ul> </li> </ul>"},{"location":"performance/","title":"Ficha T\u00e9cnica de Optimizaci\u00f3n y Performance - SIAC 2.0 Ventas","text":"<p>Esta ficha t\u00e9cnica proporciona una visi\u00f3n completa de la optimizaci\u00f3n y rendimiento en el SIAC 2.0 Ventas, cubriendo desde la base de datos hasta la interfaz de usuario, incluyendo seguridad y mejores pr\u00e1cticas.</p>"},{"location":"performance/#1-optimizacion-de-base-de-datos","title":"1. Optimizaci\u00f3n de Base de Datos","text":""},{"location":"performance/#11-indices","title":"1.1 \u00cdndices","text":"<ul> <li>\u00cdndices compuestos para consultas frecuentes</li> <li>\u00cdndices en campos de b\u00fasqueda</li> <li>\u00cdndices en campos de ordenamiento</li> <li>\u00cdndices en campos de relaci\u00f3n</li> </ul> <p>Ejemplo:</p> <pre><code>-- \u00cdndices compuestos para consultas frecuentes\nCREATE INDEX idx_ticket ON add_ticket_detalle (ide, ids, idav, idos, iddoc, idc);\n\n-- \u00cdndices para b\u00fasqueda de productos\nCREATE INDEX idx_productos ON add_comision_suc_av_prods_prom (ide, ids, idav, ano, idct);\n\n-- \u00cdndices para b\u00fasqueda de sucursales\nCREATE INDEX idx_sucursales ON add_sucursal (ide, ids, t_suc, adescuento, edo);\n</code></pre>"},{"location":"performance/#12-consultas-optimizadas","title":"1.2 Consultas Optimizadas","text":"<ul> <li>Uso de JOINs selectivos</li> <li>Limitaci\u00f3n de resultados con LIMIT</li> <li>Uso de \u00edndices en WHERE</li> <li>Evitar SELECT *</li> <li>Uso de \u00edndices en GROUP BY</li> </ul> <p>Ejemplo:  <pre><code>-- Consulta con JOIN selectivo\nSELECT tk.nmc, tk.fvta, tk.tpvta, tk.fcdoc, \n       (SELECT av.nmav FROM add_cc_myr AS av \n        WHERE av.ide = tk.ide \n          AND av.ids = tk.ids \n          AND av.rel = tk.idav) \nFROM add_ticket_titulo AS tk \nWHERE tk.ide = ? \n  AND tk.ids = ? \n  AND tk.idav = ? \n  AND tk.idos = ? \n  AND tk.idc = ? \n  AND tk.iddoc = ?;\n\n-- Consulta con GROUP BY optimizada\nSELECT razon_social, codsuc, nomsuc \nFROM add_sucursal \nWHERE ide = ? \n  AND (t_suc = 'S' OR t_suc = 'P') \n  AND adescuento = 'S' \n  AND edo = 'A' \nORDER BY nomsuc ASC;\n</code></pre></p>"},{"location":"performance/#13-cache-de-consultas","title":"1.3 Cache de Consultas","text":"<pre><code>// Uso de cache en AJAX\n$.ajax({\n    url: 'vta_forms.php',\n    cache: true,\n    ...\n});\n</code></pre>"},{"location":"performance/#2-optimizacion-de-memoria","title":"2. Optimizaci\u00f3n de Memoria","text":""},{"location":"performance/#21-manejo-de-recursos","title":"2.1 Manejo de Recursos","text":"<pre><code>// Liberaci\u00f3n de memoria en procesamiento de im\u00e1genes\nimagedestroy($image_res); //freeup memory\n\n// Manejo eficiente de resultados\nwhile ($rwprod = mysqli_fetch_array($rsprod)) {\n    // Procesamiento de datos\n}\n</code></pre>"},{"location":"performance/#22-sesiones","title":"2.2 Sesiones","text":"<ul> <li>Uso eficiente de sesiones</li> <li>Timeout de sesiones</li> <li>Limite de tama\u00f1o de sesi\u00f3n</li> <li>Sesiones basadas en cookies</li> </ul>"},{"location":"performance/#23-carga-lazy","title":"2.3 Carga Lazy","text":"<ul> <li>Carga diferida de im\u00e1genes</li> <li>Carga diferida de scripts</li> <li>Carga diferida de contenido</li> </ul> <p>Ejemplo:</p> <pre><code>// Carga diferida de scripts\n$(document).ready(function(){\n    $(\"#slsuc\").change(function(event){\n        var eidv = &lt;?php echo $eidf;?&gt;;\n        var comv = 'S';\n        var edov = 'A';\n        var tokenv = 1;\n        $(\"#view_prods_list\").html('');\n        var sidv = $(\"#slsuc\").find(':selected').val();\n        $('#slan').empty();\n        $(\"#slav\").load('vta_select.php?eids='+eidv+'&amp;sids='+sidv+'&amp;coms='+comv+'&amp;edos='+edov+'&amp;token='+tokenv);\n    });\n});\n</code></pre>"},{"location":"performance/#3-optimizacion-frontend","title":"3. Optimizaci\u00f3n Frontend","text":""},{"location":"performance/#31-ajax","title":"3.1 AJAX","text":"<ul> <li>Cache de peticiones AJAX</li> <li>Batch de peticiones</li> <li>Timeout de peticiones</li> <li>Manejo de errores as\u00edncronos</li> </ul>"},{"location":"performance/#32-uiux","title":"3.2 UI/UX","text":"<ul> <li>Loading states</li> <li>Feedback visual</li> <li>Optimizaci\u00f3n de renderizado</li> <li>Minimizaci\u00f3n de recursos</li> </ul> <p>Ejemplo:</p> <pre><code>&lt;!-- Tabla optimizada con scroll --&gt;\n&lt;div class='table-responsive scrollme' id='ckprods'&gt;\n    &lt;table class='table table-xs'&gt;\n        &lt;!-- Optimizaci\u00f3n de columnas --&gt;\n        &lt;thead class='bg-blue-grey white'&gt;\n            &lt;tr&gt;\n                &lt;th style='width: 14%' class='text-center font-small-3'&gt;CANTIDAD&lt;/th&gt;\n                &lt;!-- ... --&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"performance/#33-scripts","title":"3.3 Scripts","text":"<ul> <li>Minificaci\u00f3n de archivos</li> <li>Concatenaci\u00f3n de archivos</li> <li>Carga diferida</li> <li>Cache de scripts</li> </ul>"},{"location":"performance/#4-optimizacion-de-rendimiento","title":"4. Optimizaci\u00f3n de Rendimiento","text":""},{"location":"performance/#41-paginacion","title":"4.1 Paginaci\u00f3n","text":"<ul> <li>Paginaci\u00f3n en listados</li> <li>Carga diferida de datos</li> <li>Optimizaci\u00f3n de scroll</li> <li>Cache de resultados</li> </ul> <p>Ejemplo:</p> <pre><code>// Paginaci\u00f3n en AJAX\n$('.slclie').select2({\n    placeholder: 'Selecciona un Cliente',\n    minimumInputLength: 3,\n    ajax: {\n        url: 'vta_select2.php?eidv=&lt;?php echo $eidf; ?&gt;&amp;sidv=&lt;?php echo $sidf; ?&gt;&amp;token=9',\n        cache: true,\n        data: function (params) {\n            var query = {\n                search: params.term,\n                page: params.page || 1\n            }\n            return query;\n        }\n    }\n});\n</code></pre>"},{"location":"performance/#42-timeouts","title":"4.2 Timeouts","text":"<pre><code>toastr.options = { \n    \"closeButton\": true,\n    \"debug\": true,\n    \"newestOnTop\": false,\n    \"progressBar\": true,\n    \"positionClass\": \"toast-top-right\",\n    \"preventDuplicates\": false,\n    \"showDuration\": \"300\",\n    \"hideDuration\": \"1000000\",\n    \"timeOut\": \"3000\",\n    \"extendedTimeOut\": \"1000\"\n};\n</code></pre>"},{"location":"performance/#43-optimizacion-de-red","title":"4.3 Optimizaci\u00f3n de Red","text":"<ul> <li>Comprimici\u00f3n de datos</li> <li>Minimizaci\u00f3n de peticiones</li> <li>Cache de recursos est\u00e1ticos</li> <li>Optimizaci\u00f3n de transferencias</li> </ul> <p>Ejemplo:</p> <pre><code>// Optimizaci\u00f3n de transferencias\nheader('Content-Encoding: gzip');\nob_start('ob_gzhandler');\n</code></pre>"},{"location":"performance/#5-optimizacion-de-seguridad","title":"5. Optimizaci\u00f3n de Seguridad","text":""},{"location":"performance/#51-sesiones","title":"5.1 Sesiones","text":"<ul> <li>Timeout de sesiones</li> <li>Validaci\u00f3n de tokens</li> <li>Protecci\u00f3n contra sesiones</li> <li>L\u00edmite de intentos</li> </ul>"},{"location":"performance/#52-cookies","title":"5.2 Cookies","text":"<pre><code>if ($_COOKIE['siacventas'] == '') { \n    header('location: index.php'); \n}\n// Timeout de sesiones\nsession_start();\nsession_destroy();\n</code></pre>"},{"location":"performance/#53-validacion","title":"5.3 Validaci\u00f3n","text":"<ul> <li>Validaci\u00f3n de entrada</li> <li>Validaci\u00f3n de permisos</li> <li>Validaci\u00f3n de estados</li> <li>Validaci\u00f3n de datos</li> </ul>"},{"location":"performance/#6-mejores-practicas","title":"6. Mejores Pr\u00e1cticas","text":""},{"location":"performance/#61-codigo","title":"6.1 C\u00f3digo","text":"<ul> <li>Reutilizaci\u00f3n de c\u00f3digo</li> <li>Modularizaci\u00f3n</li> <li>Separaci\u00f3n de responsabilidades</li> <li>Documentaci\u00f3n</li> </ul>"},{"location":"performance/#62-rendimiento","title":"6.2 Rendimiento","text":"<ul> <li>Optimizaci\u00f3n continua</li> <li>Monitoreo de rendimiento</li> <li>Testing de carga</li> <li>An\u00e1lisis de rendimiento</li> </ul>"},{"location":"performance/#63-seguridad","title":"6.3 Seguridad","text":"<ul> <li>Validaci\u00f3n de datos</li> <li>Protecci\u00f3n contra inyecciones</li> <li>Manejo de sesiones</li> <li>Protecci\u00f3n de recursos</li> </ul>"},{"location":"performance/#7-herramientas-de-optimizacion","title":"7. Herramientas de Optimizaci\u00f3n","text":""},{"location":"performance/#71-monitoreo","title":"7.1 Monitoreo","text":"<ul> <li>Tiempo de respuesta</li> <li>Uso de memoria</li> <li>Uso de CPU</li> <li>Tiempo de carga</li> </ul>"},{"location":"performance/#72-testing","title":"7.2 Testing","text":"<ul> <li>Testing de carga</li> <li>Testing de rendimiento</li> <li>Testing de seguridad</li> <li>Testing de funcionalidad</li> </ul>"},{"location":"performance/#73-optimizacion","title":"7.3 Optimizaci\u00f3n","text":"<ul> <li>Optimizaci\u00f3n de consultas</li> <li>Optimizaci\u00f3n de c\u00f3digo</li> <li>Optimizaci\u00f3n de UI</li> <li>Optimizaci\u00f3n de red</li> </ul>"},{"location":"performance/#8-consideraciones-de-seguridad","title":"8. Consideraciones de Seguridad","text":"<ul> <li>Protecci\u00f3n contra inyecciones</li> <li>Validaci\u00f3n de datos</li> <li>Protecci\u00f3n de sesiones</li> <li>Manejo de errores</li> </ul>"},{"location":"global/arquitectura/","title":"Arquitectura del Sistema SIAC 2.0","text":"<p>Este documento describe la arquitectura del sistema SIAC 2.0, una soluci\u00f3n empresarial modular desarrollada principalmente en PHP. Est\u00e1 dise\u00f1ada bajo principios de escalabilidad, separaci\u00f3n de responsabilidades y facilidad de mantenimiento.</p>"},{"location":"global/arquitectura/#1-vision-general","title":"1. Visi\u00f3n General","text":"<p>El desarrollo del backend se realiz\u00f3 sin el uso de frameworks PHP, utilizando PHP nativo con una arquitectura personalizada basada en el patr\u00f3n MVC.</p>"},{"location":"global/arquitectura/#2-arquitectura-en-capas","title":"2. Arquitectura en Capas","text":"graph TB   subgraph CapaPresentacion[\"Capa de Presentaci\u00f3n\"]     UI[Interfaz de Usuario]     UI --&gt;|Formularios| F[Forms]     UI --&gt;|Widgets| W[Widgets]     UI --&gt;|Tablas| T[Tablas]     UI --&gt;|Modales| M[Modals]     UI --&gt;|Workspaces| WS[Workspaces]     UI --&gt;|Scripts AJAX| S[Scripts]   end    subgraph TB CapaNegocio[\"Capa de Especificaciones del Negocio\"]     subgraph ModulosPrincipales[\"M\u00f3dulos Principales\"]       CEDIS[CEDIS - Inventario]       CRM[CRM - Clientes]       VENTAS[Ventas]       FACT[Facturaci\u00f3n]       LIQ[Liquidaci\u00f3n]       CAJA[Caja]       REP[Reportes]       CONF[Configuraci\u00f3n]     end      subgraph Clases[\"Clases\"]       CLASSES[Clases PHP]       CLASSES --&gt;|Controladores| CTRL[Controladores]       CLASSES --&gt;|Modelos| MDL[Modelos]       CLASSES --&gt;|Vistas| VIEWS_CLASES[Views]     end   end    subgraph TB CapaBD[\"Capa de Base de Datos\"]     DB[MySQL]     DB --&gt;|Tablas Principales| TABLAS[Tablas]     DB --&gt;|Procedimientos| SP[Procedimientos]     DB --&gt;|Vistas| VIEWS_DB[Vistas]     DB --&gt;|Indices| IDX[Indices]   end    %% Conexiones entre capas   UI --&gt;|Interact\u00faa con| ModulosPrincipales   ModulosPrincipales --&gt;|Utiliza| Clases   Clases --&gt;|Accede a| DB   DB --&gt;|Almacena| ModulosPrincipales    %% Conexiones entre componentes   CEDIS --&gt;|Integra con| VENTAS   CRM --&gt;|Integra con| VENTAS   VENTAS --&gt;|Integra con| FACT   CAJA --&gt;|Integra con| LIQ   REP --&gt;|Depende de| ModulosPrincipales   CONF --&gt;|Configura| ModulosPrincipales    %% Estilos   classDef capa fill:#f9f,stroke:#333,stroke-width:2px;   classDef modulo fill:#bbf,stroke:#333,stroke-width:2px;   classDef componente fill:#dfd,stroke:#333,stroke-width:2px;   class UI,CEDIS,CRM,VENTAS,FACT,LIQ,CAJA,REP,CONF modulo;   class F,W,T,M,WS,S,CTRL,MDL,VIEWS_CLASES,TABLAS,SP,VIEWS_DB,IDX componente;   <p>El sistema sigue una arquitectura en capas tradicional:</p>"},{"location":"global/arquitectura/#21-capa-de-presentacion-frontend","title":"2.1 Capa de Presentaci\u00f3n (Frontend)","text":"<p>Implementada en PHP con HTML5, utilizando tecnolog\u00edas modernas para interacci\u00f3n din\u00e1mica:</p> <ul> <li>Bootstrap 4.x: dise\u00f1o responsivo, componentes de UI</li> <li>jQuery 3.x: manipulaci\u00f3n del DOM, validaciones, llamadas AJAX</li> <li>Select2, iCheck, Datepicker, SweetAlert2: para formularios enriquecidos</li> <li>DataTables: tablas din\u00e1micas con ordenamiento, b\u00fasqueda y exportaci\u00f3n</li> <li>Chart.js: visualizaci\u00f3n de datos con gr\u00e1ficos</li> </ul> <p>La estructura del frontend se divide en componentes reutilizables: - Formularios (<code>*.forms.php</code>) - Widgets (<code>*.widgets.php</code>) - Tablas (<code>*.tablas.php</code>) - Modales (<code>*.modals.php</code>) - Scripts AJAX (<code>*.ajax.js</code>)</p> <p>Cada m\u00f3dulo tiene su espacio de trabajo en <code>*.wspace.php</code>, donde se integran las vistas y funcionalidades.</p>"},{"location":"global/arquitectura/#22-capa-de-logica-de-negocio-backend","title":"2.2 Capa de L\u00f3gica de Negocio (Backend)","text":"<p>El backend est\u00e1 desarrollado en PHP nativo, sin frameworks externos, y sigue el patr\u00f3n MVC:</p> <ul> <li>Modelos: clases PHP en <code>/clases/</code> que manejan reglas de negocio, acceso a datos y validaciones.</li> <li>Controladores: scripts AJAX (<code>*.ajax.php</code>) que act\u00faan como intermediarios entre frontend y backend.</li> <li>Vistas: archivos <code>.php</code> en <code>forms</code>, <code>widgets</code>, <code>tablas</code> que contienen el HTML renderizado.</li> </ul> <p>Se emplean los siguientes patrones de dise\u00f1o:</p> <ul> <li>Singleton: para conexiones persistentes a la base de datos.</li> <li>Factory: para instanciar din\u00e1micamente vistas o procesos seg\u00fan el m\u00f3dulo.</li> <li>Token-Based Routing: los controladores AJAX interpretan tokens en las solicitudes para ejecutar acciones espec\u00edficas.</li> </ul>"},{"location":"global/arquitectura/#23-capa-de-datos","title":"2.3 Capa de Datos","text":"<p>La capa de datos utiliza MySQL como sistema gestor de base de datos. Caracter\u00edsticas clave:</p> <ul> <li>Dise\u00f1o relacional optimizado para consultas de alto rendimiento.</li> <li>Amplio uso de procedimientos almacenados (<code>sp_*</code>) para encapsular l\u00f3gica compleja del negocio.</li> <li>Exportaci\u00f3n y respaldo de datos en formatos JSON y PDF.</li> <li>Generaci\u00f3n de reportes en Excel.</li> <li>Integraci\u00f3n con archivos TXT y XML para procesos de facturaci\u00f3n electr\u00f3nica y PAC.</li> </ul>"},{"location":"global/arquitectura/#3-convenciones-generales","title":"3. Convenciones Generales","text":"<ul> <li>Naming: prefijos por m\u00f3dulo (<code>cds_</code>, <code>crm_</code>, <code>vta_</code>, etc.), y sufijos por tipo de archivo (<code>_forms</code>, <code>_tablas</code>, <code>_ajax</code>, <code>_modals</code>, <code>_wspace</code>).</li> <li>Modularidad: cada m\u00f3dulo mantiene independencia funcional con puntos de integraci\u00f3n bien definidos.</li> <li>Seguridad: cada llamada AJAX incluye validaci\u00f3n de sesi\u00f3n, tokens y control de permisos por rol y sucursal.</li> <li>Reusabilidad: widgets, modales, validaciones y scripts est\u00e1n dise\u00f1ados para ser reutilizados.</li> </ul>"},{"location":"global/arquitectura/#4-interaccion-general-cliente-servidor","title":"4. Interacci\u00f3n General Cliente-Servidor","text":"sequenceDiagram     participant Usuario     participant Navegador     participant JSFrontend     participant AJAXPHP     participant ClasesPHP     participant BaseDatos      Usuario-&gt;&gt;Navegador: Interacci\u00f3n UI     Navegador-&gt;&gt;JSFrontend: Captura evento     JSFrontend-&gt;&gt;AJAXPHP: Env\u00edo de datos (token)     AJAXPHP-&gt;&gt;ClasesPHP: Instanciaci\u00f3n y l\u00f3gica     ClasesPHP-&gt;&gt;BaseDatos: Consulta / actualizaci\u00f3n     BaseDatos--&gt;&gt;ClasesPHP: Resultados     ClasesPHP--&gt;&gt;AJAXPHP: Datos procesados     AJAXPHP--&gt;&gt;JSFrontend: Respuesta JSON/XML     JSFrontend--&gt;&gt;Navegador: Renderiza resultados"},{"location":"global/base_datos_global/","title":"Base de Datos Global - SIAC 2.0","text":"<p>Este documento presenta la estructura relacional y tem\u00e1tica de las principales tablas utilizadas en el sistema SIAC 2.0. Su objetivo es servir como gu\u00eda general sobre c\u00f3mo se organiza y relaciona la informaci\u00f3n a nivel de base de datos, sin documentar exhaustivamente cada campo. Las tablas de uso com\u00fan se explican aqu\u00ed. Las tablas espec\u00edficas se abordan en las fichas t\u00e9cnicas de cada m\u00f3dulo.</p>"},{"location":"global/base_datos_global/#1-entidades-principales","title":"1. Entidades Principales","text":"<p>Estas tablas representan entidades fundamentales y son reutilizadas por varios m\u00f3dulos:</p> Tabla Descripci\u00f3n M\u00f3dulos que la usan <code>add_clientes</code> Contiene informaci\u00f3n general de clientes: identificaci\u00f3n, contacto, ubicaci\u00f3n y asignaci\u00f3n comercial. CRM, Ventas, Liquidaci\u00f3n, Facturaci\u00f3n <code>add_productos</code> Cat\u00e1logo central de productos, incluye descripci\u00f3n, precio, estado, y categor\u00eda. Inventario, Ventas, Producci\u00f3n, Facturaci\u00f3n <code>add_remision</code> Encabezado de remisiones de producto: cliente, fecha, estatus y totales. Ventas, CEDIS, Liquidaci\u00f3n, Facturaci\u00f3n <code>add_remision_productos_orden</code> Detalle de productos asociados a una remisi\u00f3n: cantidades, precios, descuentos. Ventas, Liquidaci\u00f3n, Facturaci\u00f3n <code>liquidacion</code> Registra operaciones validadas (\u00f3rdenes cerradas) con resumen de ventas por agente. Liquidaci\u00f3n <code>add_cfdi_cpago</code> Almacena los complementos de pago emitidos para uno o m\u00e1s CFDIs. Facturaci\u00f3n, Caja <code>add_stock_ajuste</code> Contiene la informaci\u00f3n actualizada del stock. CEDIS, Ventas"},{"location":"global/base_datos_global/#descripcion-detallada-de-tablas-nucleo","title":"Descripci\u00f3n Detallada de Tablas N\u00facleo","text":""},{"location":"global/base_datos_global/#add_clientes","title":"<code>add_clientes</code>","text":"<p>Tabla principal de clientes con datos personales, comerciales y fiscales.</p> <ul> <li>Campos principales: <code>idc</code>, <code>codigo</code>, <code>nombre</code>, <code>mail</code>, <code>idr</code>, <code>ide</code>, <code>ids</code></li> <li>Relaciones:</li> <li><code>add_credito_clientes</code>: condiciones de cr\u00e9dito</li> <li><code>add_clientes_maps</code>, <code>add_emails_clientes</code>: contacto y geolocalizaci\u00f3n</li> <li><code>add_remision</code>, <code>add_cfdi_cpago</code>: historial de ventas y pagos</li> <li><code>add_clientes_tipos</code>: clasificaci\u00f3n comercial</li> <li>Usos: validaci\u00f3n de cr\u00e9dito, asignaci\u00f3n de rutas, facturaci\u00f3n:contentReference[oaicite:0]{index=0}</li> </ul>"},{"location":"global/base_datos_global/#add_productos","title":"<code>add_productos</code>","text":"<p>Cat\u00e1logo maestro de productos disponibles para remisi\u00f3n y facturaci\u00f3n.</p> <ul> <li>Campos comunes: <code>idprod</code>, <code>clave</code>, <code>nombre</code>, <code>categoria</code>, <code>precio</code>, <code>activo</code></li> <li>Relaciones:</li> <li><code>add_ct_productos</code>: categor\u00edas</li> <li><code>add_stock</code>: control de inventario</li> <li><code>add_remision_productos_orden</code>, <code>add_cfdi_venta_productos</code>: historial de ventas</li> <li>Usos: generaci\u00f3n de pedidos, control de stock, reporte de productos:contentReference[oaicite:1]{index=1}</li> </ul>"},{"location":"global/base_datos_global/#add_remision","title":"<code>add_remision</code>","text":"<p>Encabezado de remisi\u00f3n con informaci\u00f3n de cliente, monto, fecha y estatus.</p> <ul> <li>Campos: <code>idrem</code>, <code>idc</code>, <code>fecha</code>, <code>total</code>, <code>estatus</code></li> <li>Relaciones:</li> <li><code>add_remision_productos_orden</code>: detalle por producto</li> <li><code>liquidacion</code>: relaci\u00f3n con cierre de ventas</li> <li><code>add_cfdi_venta_clientes</code>: relaci\u00f3n con facturaci\u00f3n CFDI</li> <li>Usos: confirmaci\u00f3n de entregas, base para CFDI, cierre de ventas:contentReference[oaicite:2]{index=2}</li> </ul>"},{"location":"global/base_datos_global/#add_remision_productos_orden","title":"<code>add_remision_productos_orden</code>","text":"<p>Detalle de productos por remisi\u00f3n: cantidades, unidad, descuentos, precio unitario.</p> <ul> <li>Clave compuesta: <code>idrem</code>, <code>idprod</code></li> <li>Usos: generaci\u00f3n de CFDI, c\u00e1lculo de comisiones, an\u00e1lisis de ventas netas:contentReference[oaicite:3]{index=3}</li> </ul>"},{"location":"global/base_datos_global/#liquidacion","title":"<code>liquidacion</code>","text":"<p>Tabla resumen de procesos de validaci\u00f3n de ventas (por agente, sucursal, producto).</p> <ul> <li>Campos: <code>idliq</code>, <code>idrem</code>, <code>idvendedor</code>, <code>total</code>, <code>estado</code>, <code>fecha</code></li> <li>Relaciones:</li> <li><code>add_remision</code>: fuente primaria</li> <li><code>add_comision_suc_meses</code>: c\u00e1lculo de comisiones</li> <li>Usos: reporte de cierre mensual, generaci\u00f3n de comisiones, auditor\u00eda de ventas:contentReference[oaicite:4]{index=4}</li> </ul>"},{"location":"global/base_datos_global/#add_cfdi_cpago","title":"<code>add_cfdi_cpago</code>","text":"<p>Complemento de pago asociado a m\u00faltiples CFDIs, conforme a normativa SAT.</p> <ul> <li>Campos: <code>idcpago</code>, <code>uuid</code>, <code>idcliente</code>, <code>monto</code>, <code>fecha_pago</code></li> <li>Relaciones:</li> <li><code>add_cfdi_cpago_info</code>: m\u00e9todo y forma de pago</li> <li><code>add_cfdi_cpago_rel_cfdis</code>: relaci\u00f3n con CFDIs origen</li> <li><code>add_cfdi_cpago_cancel</code>: cancelaciones</li> <li>Usos: gesti\u00f3n de pagos parciales, cumplimiento fiscal, conciliaci\u00f3n con remisiones:contentReference[oaicite:5]{index=5}</li> </ul>"},{"location":"global/base_datos_global/#2-agrupacion-funcional-de-tablas","title":"2. Agrupaci\u00f3n Funcional de Tablas","text":""},{"location":"global/base_datos_global/#21-clientes-y-crm","title":"2.1 Clientes y CRM","text":"<p>Incluye informaci\u00f3n de clientes, clasificaci\u00f3n, cr\u00e9dito, y visitas.</p> <ul> <li><code>add_clientes</code>, <code>add_clientes_tipos</code></li> <li><code>add_credito_clientes</code>, <code>add_datos_facturas_clientes</code></li> <li><code>add_rutas</code>, <code>add_frec_visita_clientes</code></li> <li><code>add_emails_clientes</code>, <code>add_clientes_maps</code></li> <li><code>add_clientes_cred_check</code>, <code>add_clientes_archivos</code></li> </ul>"},{"location":"global/base_datos_global/#22-productos-y-stock","title":"2.2 Productos y Stock","text":"<p>Cat\u00e1logo de productos y control de inventario.</p> <ul> <li><code>add_productos</code>, <code>add_ct_productos</code></li> <li><code>add_stock</code>, <code>add_stock_ajuste</code>, <code>add_backup_stock_almacen</code></li> <li><code>add_mini_stock_vendedor</code>, <code>prodts_pedido_stock</code></li> <li><code>traslado_stock</code>, <code>add_no_salida_stock</code></li> </ul>"},{"location":"global/base_datos_global/#23-ventas-y-remisiones","title":"2.3 Ventas y Remisiones","text":"<p>Pedidos, remisiones y control de documentos de venta.</p> <ul> <li><code>pedido_clientes</code>, <code>producto_pedido_clientes</code></li> <li><code>add_remision</code>, <code>add_remision_productos</code></li> <li><code>add_remision_venta_neta</code>, <code>add_remision_productos_orden</code></li> <li><code>venta_curso</code>, <code>venta_neta_sucursal</code>, <code>liquidacion</code></li> </ul>"},{"location":"global/base_datos_global/#24-cobranza-y-caja","title":"2.4 Cobranza y Caja","text":"<p>Gesti\u00f3n de pagos, recibos y conciliaciones.</p> <ul> <li><code>add_no_recibo_print</code>, <code>lista_recibos_x_cancelar</code></li> <li><code>add_pagos_noor_rem</code>, <code>add_cxc_abona</code>, <code>add_cxc_docs_cobrar_av</code></li> <li><code>add_cxc_cza_doc_pago</code>, <code>add_cxc_cza_rbo_av</code></li> </ul>"},{"location":"global/base_datos_global/#25-facturacion-electronica-cfdi","title":"2.5 Facturaci\u00f3n Electr\u00f3nica (CFDI)","text":"<p>CFDIs emitidos, complementos de pago y cancelaciones.</p> <ul> <li><code>add_cfdi_info</code>, <code>add_cfdi_cpago</code>, <code>add_cfdi_cancel</code></li> <li><code>add_cfdi_venta_clientes</code>, <code>add_cfdi_venta_productos</code></li> <li><code>add_cfdi_rel_cfdis_cfdi</code>, <code>add_cfdi_cpago_rel_cfdis</code></li> </ul>"},{"location":"global/base_datos_global/#26-comisiones-y-presupuesto","title":"2.6 Comisiones y Presupuesto","text":"<p>Asignaci\u00f3n y c\u00e1lculo de comisiones y metas.</p> <ul> <li><code>add_comision_suc_meses</code>, <code>add_comision_producto</code></li> <li><code>add_comision_pje_suc</code>, <code>add_comision_docs_cobranza</code></li> <li><code>add_presupuesto_suc_mes</code>, <code>add_presupuesto_av_anual</code></li> </ul>"},{"location":"global/base_datos_global/#27-recursos-humanos","title":"2.7 Recursos Humanos","text":"<p>Datos de empleados y administraci\u00f3n laboral.</p> <ul> <li><code>add_empleados</code>, <code>add_rh_docs</code>, <code>add_rh_bajas</code></li> <li><code>add_empleado_bien_inmb</code>, <code>add_vacas_emplea</code></li> </ul>"},{"location":"global/base_datos_global/#28-seguridad-y-usuarios","title":"2.8 Seguridad y Usuarios","text":"<p>Control de accesos, roles y permisos.</p> <ul> <li><code>add_user</code>, <code>add_user_empresa</code>, <code>add_user_tipo</code></li> <li><code>roles_usuar</code>, <code>roles_usuar_menu</code></li> <li><code>add_permiso_app_siac</code>, <code>add_user_menu_hijo</code></li> </ul>"},{"location":"global/base_datos_global/#29-geografia-y-localizacion","title":"2.9 Geograf\u00eda y Localizaci\u00f3n","text":"<p>Divisi\u00f3n territorial y de sucursales.</p> <ul> <li><code>pais</code>, <code>pais_estados</code>, <code>pais_municipios</code></li> <li><code>add_sucursal</code>, <code>add_rel_zonas_suc</code></li> </ul>"},{"location":"global/base_datos_global/#3-consideraciones","title":"3. Consideraciones","text":"<ul> <li>Cada m\u00f3dulo define sus propias tablas auxiliares que no se listan aqu\u00ed si su uso es exclusivo.</li> <li>Para campos espec\u00edficos, \u00edndices y procedimientos almacenados, consultar el diccionario t\u00e9cnico de base de datos o la documentaci\u00f3n de cada m\u00f3dulo.</li> <li>Se recomienda usar este documento como gu\u00eda conceptual para comprender la arquitectura de datos y las relaciones transversales del sistema.</li> </ul>"},{"location":"global/estructura_archivos/","title":"Estructura de Archivos del Sistema SIAC 2.0","text":"<p>Este documento describe la convenci\u00f3n general para la organizaci\u00f3n de archivos en el sistema SIAC 2.0. Cada m\u00f3dulo del sistema sigue esta estructura, aunque algunos archivos pueden variar seg\u00fan las necesidades del m\u00f3dulo.</p>"},{"location":"global/estructura_archivos/#1-organizacion-por-carpeta","title":"1. Organizaci\u00f3n por Carpeta","text":"<p>Los archivos del sistema se agrupan en el directorio principal <code>frontend/</code>, el cual contiene subcarpetas especializadas seg\u00fan su funci\u00f3n:</p>"},{"location":"global/estructura_archivos/#11-frontendajax","title":"1.1 <code>/frontend/ajax/</code>","text":"<p>Archivos JavaScript que manejan la comunicaci\u00f3n asincr\u00f3nica (AJAX) con el backend. - Ejemplos: <code>cds_ajax.js</code>, <code>crm_ajax.js</code>, <code>pv_ajax.js</code> - Funci\u00f3n: Captura eventos de interfaz, realiza peticiones HTTP, y gestiona respuestas JSON/XML.</p>"},{"location":"global/estructura_archivos/#12-frontendforms","title":"1.2 <code>/frontend/forms/</code>","text":"<p>Formularios PHP utilizados para entrada de datos y vistas estructuradas. - Ejemplos: <code>crm_forms.php</code>, <code>cds_forms.php</code>, <code>pv_forms.php</code> - Funci\u00f3n: Contienen la l\u00f3gica HTML y elementos de entrada del sistema.</p>"},{"location":"global/estructura_archivos/#13-frontendmodals","title":"1.3 <code>/frontend/modals/</code>","text":"<p>Ventanas emergentes reutilizables en el sistema. - Ejemplos: <code>crm_modals.php</code>, <code>cds_modals.php</code> - Funci\u00f3n: Interfaz secundaria para edici\u00f3n, confirmaci\u00f3n o vistas r\u00e1pidas.</p>"},{"location":"global/estructura_archivos/#14-frontendtablas","title":"1.4 <code>/frontend/tablas/</code>","text":"<p>Tablas din\u00e1micas utilizadas para mostrar datos con opciones de filtrado y exportaci\u00f3n. - Ejemplos: <code>crm_tablas.php</code>, <code>cds_tablas.php</code> - Funci\u00f3n: Implementadas con DataTables para ordenamiento, b\u00fasqueda y paginaci\u00f3n.</p>"},{"location":"global/estructura_archivos/#15-frontendwidgets","title":"1.5 <code>/frontend/widgets/</code>","text":"<p>Componentes visuales reutilizables para KPIs, gr\u00e1ficos y estados. - Ejemplos: <code>crm_widgets.php</code>, <code>cds_widgets.php</code> - Funci\u00f3n: Proveen visualizaciones en paneles de control y dashboards.</p>"},{"location":"global/estructura_archivos/#16-frontendselect-y-frontendselect2","title":"1.6 <code>/frontend/select/</code> y <code>/frontend/select2/</code>","text":"<p>Selectores simples (<code>select</code>) y avanzados (<code>select2</code>) para entrada de datos. - Funci\u00f3n: Carga de listas din\u00e1micas, autocompletado y b\u00fasqueda avanzada.</p>"},{"location":"global/estructura_archivos/#17-frontendwspace","title":"1.7 <code>/frontend/wspace/</code>","text":"<p>Espacios de trabajo integrados del usuario. - Ejemplos: <code>cds_wspace.php</code>, <code>crm_wspace.php</code> - Funci\u00f3n: Consolidan vistas y funcionalidades en una sola interfaz.</p>"},{"location":"global/estructura_archivos/#18-frontendclases","title":"1.8 <code>/frontend/clases/</code>","text":"<p>Clases PHP backend que contienen la l\u00f3gica de negocio de cada m\u00f3dulo. - Ejemplos: <code>class_crm.php</code>, <code>class_cds.php</code>, <code>class_vtas.php</code></p>"},{"location":"global/estructura_archivos/#2-uso-en-fichas-de-modulo","title":"2. Uso en Fichas de M\u00f3dulo","text":"<p>Cada m\u00f3dulo de SIAC 2.0 describe \u00fanicamente los archivos relevantes a su funcionamiento espec\u00edfico, omitiendo estructura repetitiva. Se recomienda consultar esta secci\u00f3n global para comprender el patr\u00f3n general y facilitar el desarrollo de nuevos m\u00f3dulos.</p>"},{"location":"global/frontend/","title":"Ficha T\u00e9cnica Frontend - SIAC 2.0 Ventas","text":""},{"location":"global/frontend/#1-estructura-general","title":"1. Estructura General","text":""},{"location":"global/frontend/#11-componentes-principales","title":"1.1 Componentes Principales","text":"<ul> <li> <p>Formularios (<code>*.forms.php</code>)</p> <ul> <li>Validaciones  </li> <li>Eventos  </li> <li>Integraci\u00f3n con backend  </li> <li>Manejo de estados  </li> </ul> </li> <li> <p>Widgets (<code>*.widgets.php</code>)</p> <ul> <li>Componentes reutilizables  </li> <li>Visualizaci\u00f3n de datos  </li> <li>KPIs y estad\u00edsticas  </li> </ul> </li> <li> <p>Tablas (<code>*.tablas.php</code>)</p> <ul> <li>Paginaci\u00f3n  </li> <li>Filtros  </li> <li>Ordenamiento  </li> <li>Exportaci\u00f3n  </li> </ul> </li> <li> <p>Selects (<code>*.select.php</code>)</p> <ul> <li>B\u00fasqueda  </li> <li>Autocompletado  </li> <li>Carga din\u00e1mica  </li> </ul> </li> <li> <p>Select2 (<code>*.select2.php</code>)</p> <ul> <li>B\u00fasqueda avanzada  </li> <li>Autocompletado  </li> <li>Multi-selecci\u00f3n  </li> </ul> </li> <li> <p>Modales (<code>*.modals.php</code>)</p> <ul> <li>Formularios emergentes  </li> <li>Mensajes  </li> <li>Confirmaciones  </li> </ul> </li> <li> <p>AJAX (<code>*.ajax.js</code>)</p> <ul> <li>Comunicaci\u00f3n asincr\u00f3nica  </li> <li>Manejo de eventos  </li> <li>Validaciones  </li> <li>Actualizaci\u00f3n din\u00e1mica </li> </ul> </li> </ul>"},{"location":"global/frontend/#12-estructura-de-archivos-y-rutas","title":"1.2 Estructura de Archivos y Rutas","text":"<pre><code>/frontend/\n\u251c\u2500\u2500 ajax/                         # Archivos AJAX\n\u2502   \u251c\u2500\u2500 ajax_send_txt_info.js    # AJAX para env\u00edo de texto\n\u2502   \u251c\u2500\u2500 cds_ajax.js              # AJAX para control de CEDIS\n\u2502   \u251c\u2500\u2500 cds_ajax_1.js            # AJAX auxiliar CEDIS\n\u2502   \u251c\u2500\u2500 conf_ajax.js             # AJAX para configuraci\u00f3n\n\u2502   \u251c\u2500\u2500 cont_ajax.js             # AJAX para contabilidad\n\u2502   \u251c\u2500\u2500 mtz_ajax.js              # AJAX para matriz reportes de presupuesto\n\u2502   \u251c\u2500\u2500 pv_ajax.js               # AJAX para punto de venta\n\u2502   \u251c\u2500\u2500 pv_ajax_vm.js            # AJAX para vista m\u00f3vil\n\u2502   \u251c\u2500\u2500 rh_ajax.js               # AJAX para recursos humanos\n\u2502   \u251c\u2500\u2500 rp_ajax.js               # AJAX para reportes\n\u2502   \u2514\u2500\u2500 wk_ajax.js               # AJAX para workspace\n\u2502\n\u251c\u2500\u2500 forms/                        # Formularios\n\u2502   \u251c\u2500\u2500 cat_forms.php            # Formularios de cat\u00e1logos\n\u2502   \u251c\u2500\u2500 cds_forms.php            # Formularios de CEDIS\n\u2502   \u251c\u2500\u2500 cds_forms_1.php          # Formularios CEDIS\n\u2502   \u251c\u2500\u2500 conf_forms.php           # Formularios de configuraci\u00f3n\n\u2502   \u251c\u2500\u2500 cont_forms.php           # Formularios de contabilidad\n\u2502   \u251c\u2500\u2500 crm_forms.php            # Formularios de CRM\n\u2502   \u251c\u2500\u2500 mtz_forms.php            # Formularios de matriz reportes\n\u2502   \u251c\u2500\u2500 pv_forms.php             # Formularios de punto de venta\n\u2502   \u251c\u2500\u2500 rh_forms.php             # Formularios de recursos humanos\n\u2502   \u251c\u2500\u2500 rp_forms.php             # Formularios de reportes\n\u2502   \u2514\u2500\u2500 vta_forms.php            # Formularios de ventas\n\u2502\n\u251c\u2500\u2500 js/                           # Archivos JavaScript\n\u2502   \u251c\u2500\u2500 cds_validations.js       # Validaciones\n\u2502   \u251c\u2500\u2500 jquery_jeditable.js      # jQuery editable\n\u2502   \u2514\u2500\u2500 js_send.js               # Env\u00edo de datos\n\u2502\n\u251c\u2500\u2500 modals/                       # Modales\n\u2502   \u251c\u2500\u2500 cat_modals.php           # Modales de cat\u00e1logos\n\u2502   \u251c\u2500\u2500 cds_modals.php           # Modales de CEDIS\n\u2502   \u251c\u2500\u2500 conf_modals.php          # Modales de configuraci\u00f3n\n\u2502   \u251c\u2500\u2500 cont_modals.php          # Modales de contabilidad\n\u2502   \u251c\u2500\u2500 crm_modals.php           # Modales de CRM\n\u2502   \u251c\u2500\u2500 mtz_modals.php           # Modales de matriz reportes\n\u2502   \u251c\u2500\u2500 pv_modals.php            # Modales de punto de venta\n\u2502   \u251c\u2500\u2500 pv_modals_vm.php         # Modales de vista m\u00f3vil\n\u2502   \u251c\u2500\u2500 rh_modals.php            # Modales de recursos humanos\n\u2502   \u2514\u2500\u2500 wk_modals.php            # Modales de workspace\n\u2502\n\u251c\u2500\u2500 select/                       # Selects\n\u2502   \u251c\u2500\u2500 cat_select.php           # Selects de cat\u00e1logos\n\u2502   \u251c\u2500\u2500 cds_select.php           # Selects de CEDIS\n\u2502   \u251c\u2500\u2500 conf_select.php          # Selects de configuraci\u00f3n\n\u2502   \u251c\u2500\u2500 cont_select.php          # Selects de contabilidad\n\u2502   \u251c\u2500\u2500 pv_select.php            # Selects de punto de venta\n\u2502   \u2514\u2500\u2500 vta_select.php           # Selects de ventas\n\u2502\n\u251c\u2500\u2500 select2/                      # Select2 mejorados\n\u2502   \u251c\u2500\u2500 cat_select2.php          # Select2 de cat\u00e1logos\n\u2502   \u251c\u2500\u2500 cds_select2.php          # Select2 de CEDIS\n\u2502   \u251c\u2500\u2500 conf_select2.php         # Select2 de configuraci\u00f3n\n\u2502   \u251c\u2500\u2500 cont_select2.php         # Select2 de contabilidad\n\u2502   \u251c\u2500\u2500 crm_select2.php          # Select2 de CRM\n\u2502   \u251c\u2500\u2500 mtz_select2.php          # Select2 de matriz reportes\n\u2502   \u251c\u2500\u2500 pv_select2.php           # Select2 de punto de venta\n\u2502   \u2514\u2500\u2500 vta_select2.php          # Select2 de ventas\n\u2502\n\u251c\u2500\u2500 tablas/                       # Tablas din\u00e1micas\n\u2502   \u251c\u2500\u2500 cds_tablas.php           # Tablas de CEDIS\n\u2502   \u251c\u2500\u2500 cds_tablas_1.php         # Tablas auxiliares CEDIS\n\u2502   \u251c\u2500\u2500 conf_tablas.php          # Tablas de configuraci\u00f3n\n\u2502   \u251c\u2500\u2500 cont_tablas.php          # Tablas de contabilidad\n\u2502   \u251c\u2500\u2500 crm_tablas.php           # Tablas de CRM\n\u2502   \u251c\u2500\u2500 mtz_tablas.php           # Tablas de matriz reportes\n\u2502   \u251c\u2500\u2500 pv_tablas.php            # Tablas de punto de venta\n\u2502   \u251c\u2500\u2500 pv_tablas_vm.php         # Tablas de vista m\u00f3vil\n\u2502   \u2514\u2500\u2500 vta_tablas.php           # Tablas de ventas\n\u2502\n\u251c\u2500\u2500 widgets/                      # Widgets y componentes\n\u2502   \u251c\u2500\u2500 cat_widgets.php          # Widgets de cat\u00e1logos\n\u2502   \u251c\u2500\u2500 cds_widgets.php          # Widgets de CEDIS\n\u2502   \u251c\u2500\u2500 conf_widgets.php         # Widgets de configuraci\u00f3n\n\u2502   \u251c\u2500\u2500 cont_widgets.php         # Widgets de contabilidad\n\u2502   \u251c\u2500\u2500 crm_widgets.php          # Widgets de CRM\n\u2502   \u251c\u2500\u2500 mtz_widgets.php          # Widgets de matriz reportes\n\u2502   \u251c\u2500\u2500 pv_widgets.php           # Widgets de punto de venta\n\u2502   \u251c\u2500\u2500 pv_widget_vm.php         # Widgets de vista m\u00f3vil\n\u2502   \u2514\u2500\u2500 vta_widgets.php          # Widgets de ventas\n\u2502\n\u251c\u2500\u2500 wspace/                       # Espacios de trabajo\n\u2502   \u251c\u2500\u2500 cat_wspace.php           # Espacio de cat\u00e1logos\n\u2502   \u251c\u2500\u2500 cds_wspace.php           # Espacio de CEDIS\n\u2502   \u251c\u2500\u2500 cds_wspace_1.php         # Espacio auxiliar CEDIS\n\u2502   \u251c\u2500\u2500 conf_wspace.php          # Espacio de configuraci\u00f3n\n\u2502   \u251c\u2500\u2500 cont_wspace.php          # Espacio de contabilidad\n\u2502   \u251c\u2500\u2500 crm_wspace.php           # Espacio de CRM\n\u2502   \u251c\u2500\u2500 mtz_wspace.php           # Espacio de matriz reportes\n\u2502   \u251c\u2500\u2500 pv_wspace.php            # Espacio de punto de venta\n\u2502   \u2514\u2500\u2500 wk_workspace.php         # Workspace principal\n\u2502\n\u251c\u2500\u2500 clases/                       # Clases PHP\n\u2502   \u251c\u2500\u2500 class_pv.php             # Clase punto de venta\n\u2502   \u251c\u2500\u2500 class_cat.php            # Clase cat\u00e1logos\n\u2502   \u251c\u2500\u2500 class_conf.php           # Clase configuraci\u00f3n\n\u2502   \u251c\u2500\u2500 class_cont.php           # Clase contabilidad\n\u2502   \u251c\u2500\u2500 class_crm.php            # Clase CRM\n\u2502   \u251c\u2500\u2500 class_mtz.php            # Clase matriz reportes\n\u2502   \u251c\u2500\u2500 class_rh.php             # Clase recursos humanos\n\u2502   \u2514\u2500\u2500 class_rp.php             # Clase reportes\n\u2502\n\u251c\u2500\u2500 assets/                       # Recursos est\u00e1ticos\n\u2502   \u251c\u2500\u2500 css/                     # Estilos CSS\n\u2502   \u2502   \u2514\u2500\u2500 custom.css          # Estilos personalizados\n\u2502   \u251c\u2500\u2500 js/                      # JavaScript\n\u2502   \u2502   \u2514\u2500\u2500 validations.js      # Validaciones\n\u2502   \u2514\u2500\u2500 images/                  # Im\u00e1genes\n\u2502       \u251c\u2500\u2500 icons/              # Iconos\n\u2502       \u2514\u2500\u2500 logos/              # Logos\n\u2502\n\u2514\u2500\u2500 vendors/                      # Librer\u00edas externas\n    \u251c\u2500\u2500 bootstrap/               # Bootstrap 4\n    \u251c\u2500\u2500 jquery/                  # jQuery 3.x\n    \u251c\u2500\u2500 select2/                # Select2 4.x\n    \u251c\u2500\u2500 datatables/             # DataTables 1.10.x\n    \u251c\u2500\u2500 sweetalert2/            # SweetAlert2 11.x\n    \u251c\u2500\u2500 icheck/                 # iCheck\n    \u251c\u2500\u2500 datepicker/            # Datepicker\n    \u2514\u2500\u2500 chart.js/              # Chart.js 2.x\n</code></pre>"},{"location":"global/frontend/#2-librerias-principales","title":"2. Librer\u00edas Principales","text":""},{"location":"global/frontend/#21-jquery","title":"2.1 jQuery","text":"<ul> <li>Versi\u00f3n: 3.x  </li> <li>Documentaci\u00f3n: https://api.jquery.com/ </li> <li>Uso Principal: Manipulaci\u00f3n del DOM, eventos, AJAX, animaciones, validaciones  </li> </ul>"},{"location":"global/frontend/#22-bootstrap","title":"2.2 Bootstrap","text":"<ul> <li>Versi\u00f3n: 4.x  </li> <li>Documentaci\u00f3n: https://getbootstrap.com/docs/4.6/ </li> <li>Uso Principal: Grid system, componentes UI, formularios, modal, alertas, cards  </li> </ul>"},{"location":"global/frontend/#23-select2","title":"2.3 Select2","text":"<ul> <li>Versi\u00f3n: 4.x  </li> <li>Documentaci\u00f3n: https://select2.org/ </li> <li>Uso Principal: Selects mejorados, b\u00fasqueda, autocompletado, multi-selecci\u00f3n  </li> </ul>"},{"location":"global/frontend/#24-datatables","title":"2.4 DataTables","text":"<ul> <li>Versi\u00f3n: 1.10.x  </li> <li>Documentaci\u00f3n: https://datatables.net/ </li> <li>Uso Principal: Tablas din\u00e1micas, paginaci\u00f3n, filtros, ordenamiento, exportaci\u00f3n  </li> </ul>"},{"location":"global/frontend/#25-sweetalert","title":"2.5 SweetAlert","text":"<ul> <li>Versi\u00f3n: 1.x  </li> <li>Documentaci\u00f3n: https://lipis.github.io/bootstrap-sweetalert/ </li> <li>Uso Principal: Alertas y mensajes de confirmaci\u00f3n personalizados  </li> </ul>"},{"location":"global/frontend/#26-sweetalert2","title":"2.6 SweetAlert2","text":"<ul> <li>Versi\u00f3n: 11.x  </li> <li>Documentaci\u00f3n: https://sweetalert2.github.io/ </li> <li>Uso Principal: Notificaciones modernas, alertas interactivas  </li> </ul>"},{"location":"global/frontend/#27-icheck","title":"2.7 iCheck","text":"<ul> <li>Versi\u00f3n: 1.x  </li> <li>Documentaci\u00f3n: https://fronteed.com/iCheck/ </li> <li>Uso Principal: Checkboxes y radios personalizados, estilos personalizados  </li> </ul>"},{"location":"global/frontend/#28-jquery-ui-datepicker","title":"2.8 jQuery UI Datepicker","text":"<ul> <li>Versi\u00f3n: 1.x  </li> <li>Documentaci\u00f3n: https://jqueryui.com/datepicker/ </li> <li>Uso Principal: Selecci\u00f3n de fechas, formatos personalizados, validaciones  </li> </ul>"},{"location":"global/frontend/#29-chartjs","title":"2.9 Chart.js","text":"<ul> <li>Versi\u00f3n: 2.x  </li> <li>Documentaci\u00f3n: https://www.chartjs.org/ </li> <li>Uso Principal: Visualizaci\u00f3n de datos, KPIs, gr\u00e1ficos estad\u00edsticos  </li> </ul>"},{"location":"global/frontend/#210-prismjs","title":"2.10 Prism.js","text":"<ul> <li>Versi\u00f3n: 1.x  </li> <li>Documentaci\u00f3n: https://prismjs.com/ </li> <li>Uso Principal: Resaltado de sintaxis en bloques de c\u00f3digo  </li> </ul>"},{"location":"global/frontend/#211-jquery-vector-map","title":"2.11 jQuery Vector Map","text":"<ul> <li>Versi\u00f3n: 2.0.3  </li> <li>Documentaci\u00f3n: https://jvectormap.com/ </li> <li>Uso Principal: Mapas interactivos, visualizaci\u00f3n geogr\u00e1fica de datos  </li> </ul>"},{"location":"global/frontend/#212-unslider","title":"2.12 Unslider","text":"<ul> <li>Versi\u00f3n: 2.x  </li> <li>Documentaci\u00f3n: https://unslider.com/ </li> <li>Uso Principal: Sliders simples, carruseles de contenido  </li> </ul>"},{"location":"global/frontend/#213-clndrjs","title":"2.13 CLNDR.js","text":"<ul> <li>Versi\u00f3n: 1.x  </li> <li>Documentaci\u00f3n: https://kylestetz.github.io/CLNDR/ </li> <li>Uso Principal: Calendarios interactivos, manejo de eventos  </li> </ul>"},{"location":"global/frontend/#214-climacons","title":"2.14 Climacons","text":"<ul> <li>Versi\u00f3n: -  </li> <li>Documentaci\u00f3n: https://adamwhitcroft.com/climacons/ </li> <li>Uso Principal: \u00cdconos meteorol\u00f3gicos para interfaces  </li> </ul>"},{"location":"global/frontend/#215-morrisjs","title":"2.15 Morris.js","text":"<ul> <li>Versi\u00f3n: 0.5.x  </li> <li>Documentaci\u00f3n: https://morrisjs.github.io/morris.js/ </li> <li>Uso Principal: Gr\u00e1ficos de l\u00edneas, barras y \u00e1reas  </li> </ul>"},{"location":"global/frontend/#216-datatables-bootstrap-integration","title":"2.16 DataTables Bootstrap Integration","text":"<ul> <li>Versi\u00f3n: 1.10+  </li> <li>Documentaci\u00f3n: https://datatables.net/manual/styling/bootstrap4 </li> <li>Uso Principal: Estilizaci\u00f3n y compatibilidad con Bootstrap  </li> </ul>"},{"location":"global/frontend/#217-bootstrap-datepicker","title":"2.17 Bootstrap Datepicker","text":"<ul> <li>Versi\u00f3n: 1.x  </li> <li>Documentaci\u00f3n: https://bootstrap-datepicker.readthedocs.io/en/latest/ </li> <li>Uso Principal: Selecci\u00f3n de fechas con soporte Bootstrap  </li> </ul>"},{"location":"global/frontend/#218-meteocons","title":"2.18 Meteocons","text":"<ul> <li>Versi\u00f3n: -  </li> <li>Documentaci\u00f3n: https://www.alessioatzeni.com/meteocons/ </li> <li>Uso Principal: \u00cdconos meteorol\u00f3gicos estilo flat  </li> </ul>"},{"location":"global/frontend/#3-consideraciones-de-frontend-comunes","title":"3. Consideraciones de Frontend Comunes","text":""},{"location":"global/frontend/#31-diferencias-entre-version-desktop-y-movil","title":"3.1 Diferencias entre Versi\u00f3n Desktop y M\u00f3vil","text":""},{"location":"global/frontend/#311-estructura-de-componentes","title":"3.1.1 Estructura de Componentes","text":"<ul> <li> <p>Formularios</p> <ul> <li>Desktop: Layout en columnas con campos agrupados</li> <li>M\u00f3vil: Layout vertical con campos en una sola columna</li> <li>Uso de <code>form-group</code> de Bootstrap para ambos casos</li> </ul> </li> <li> <p>Tablas</p> <ul> <li>Desktop: Tablas completas con todas las columnas visibles</li> <li>M\u00f3vil: Tablas responsivas con columnas ocultas y bot\u00f3n de detalles</li> <li>Implementaci\u00f3n de <code>dataTables</code> con configuraci\u00f3n espec\u00edfica para m\u00f3vil</li> </ul> </li> <li> <p>Selects y Select2</p> <ul> <li>Desktop: Select2 con b\u00fasqueda y multi-selecci\u00f3n</li> <li>M\u00f3vil: Select2 con men\u00fa desplegable optimizado</li> <li>Uso de <code>select2-container--mobile</code> para estilos espec\u00edficos</li> </ul> </li> <li> <p>Modales</p> <ul> <li>Desktop: Modales con tama\u00f1o fijo y scroll interno</li> <li>M\u00f3vil: Modales full-screen con scroll de la p\u00e1gina</li> <li>Implementaci\u00f3n de <code>modal-dialog-scrollable</code> para m\u00f3vil</li> </ul> </li> </ul>"},{"location":"global/frontend/#312-optimizaciones-de-rendimiento","title":"3.1.2 Optimizaciones de Rendimiento","text":"<ul> <li>Carga diferida de im\u00e1genes en m\u00f3vil</li> <li>Reducci\u00f3n de elementos DOM en m\u00f3vil</li> <li>Optimizaci\u00f3n de AJAX para m\u00f3vil (menos datos)</li> <li>Implementaci\u00f3n de <code>lazy-loading</code> en tablas</li> </ul>"},{"location":"global/frontend/#313-interacciones","title":"3.1.3 Interacciones","text":"<ul> <li>Desktop: Uso de hover y tooltips</li> <li>M\u00f3vil: Uso de touch y gestos</li> <li>Adaptaci\u00f3n de eventos (click vs touch)</li> <li>Implementaci\u00f3n de <code>touch-action</code> para mejor rendimiento</li> </ul>"},{"location":"global/frontend/#32-componentes-comunes","title":"3.2 Componentes Comunes","text":""},{"location":"global/frontend/#321-validaciones","title":"3.2.1 Validaciones","text":"<ul> <li>Validaciones en tiempo real</li> <li>Mensajes de error consistentes</li> <li>Uso de <code>jQuery.validate()</code></li> <li>Implementaci\u00f3n de <code>data-validation</code> para personalizaci\u00f3n</li> </ul>"},{"location":"global/frontend/#322-manejo-de-estados","title":"3.2.2 Manejo de Estados","text":"<ul> <li>Estado de carga (loading)</li> <li>Estado de error</li> <li>Estado de \u00e9xito</li> <li>Implementaci\u00f3n de <code>state-manager.js</code></li> </ul>"},{"location":"global/frontend/#323-eventos-globales","title":"3.2.3 Eventos Globales","text":"<ul> <li>Eventos personalizados</li> <li>Sistema de notificaciones</li> <li>Manejo de sesiones</li> <li>Implementaci\u00f3n de <code>event-bus.js</code></li> </ul>"},{"location":"global/frontend/#324-estilos-comunes","title":"3.2.4 Estilos Comunes","text":"<ul> <li>Variables CSS compartidas</li> <li>Mixins y componentes reutilizables</li> <li>Sistema de colores consistente</li> <li>Implementaci\u00f3n de <code>custom.scss</code></li> </ul>"},{"location":"global/frontend/#33-consideraciones-de-seguridad","title":"3.3 Consideraciones de Seguridad","text":"<ul> <li>Validaci\u00f3n de entrada</li> <li>Protecci\u00f3n contra XSS</li> <li>Manejo seguro de datos sensibles</li> <li>Implementaci\u00f3n de <code>security.js</code></li> </ul>"},{"location":"global/frontend/#34-accesibilidad","title":"3.4 Accesibilidad","text":"<ul> <li>Etiquetas ARIA</li> <li>Soporte para lectores de pantalla</li> <li>Contraste adecuado</li> <li>Implementaci\u00f3n de <code>accessibility.js</code><ul> <li>Gr\u00e1ficos estad\u00edsticos  </li> <li>Visualizaci\u00f3n de datos  </li> <li>KPIs  </li> </ul> </li> </ul>"},{"location":"global/frontend/#3-patrones-de-diseno","title":"3. Patrones de Dise\u00f1o","text":""},{"location":"global/frontend/#31-templates","title":"3.1 Templates","text":"<ul> <li>Estructura com\u00fan para formularios  </li> <li>Componentes reutilizables  </li> <li>Sistema de eventos  </li> <li>Manejo de estados  </li> </ul>"},{"location":"global/frontend/#32-componentes-reutilizables","title":"3.2 Componentes Reutilizables","text":"<ul> <li>Formularios base  </li> <li>Tablas din\u00e1micas  </li> <li>Selects con b\u00fasqueda  </li> <li>Modales  </li> <li>Widgets estad\u00edsticos  </li> </ul>"},{"location":"global/frontend/#33-sistema-de-eventos","title":"3.3 Sistema de Eventos","text":"<ul> <li>AJAX requests  </li> <li>Validaciones  </li> <li>Manejo de errores  </li> <li>Actualizaci\u00f3n din\u00e1mica  </li> </ul>"},{"location":"global/frontend/#4-integracion-con-backend","title":"4. Integraci\u00f3n con Backend","text":""},{"location":"global/frontend/#41-manejo-de-datos","title":"4.1 Manejo de Datos","text":"<ul> <li>Formateo  </li> <li>Validaci\u00f3n  </li> <li>Exportaci\u00f3n  </li> <li>Importaci\u00f3n  </li> </ul>"},{"location":"global/frontend/#42-comunicacion-ajax","title":"4.2 Comunicaci\u00f3n AJAX","text":"<ul> <li>Tokens  </li> <li>Validaci\u00f3n de sesi\u00f3n  </li> <li>Manejo de errores  </li> <li>Carga as\u00edncrona  </li> <li>M\u00e9todo: POST  </li> <li>Formato: JSON  </li> </ul> <p>Ejemplo de petici\u00f3n:</p> <pre><code>$.ajax({\n    url: 'pv_ajax.php',\n    type: 'POST',\n    data: JSON.stringify({\n        anf: a\u00f1o,\n        eidf: id_empresa,\n        sidf: id_sucursal,\n        // ... otros par\u00e1metros\n    }),\n    contentType: 'application/json',\n    success: function(response) {\n        // Manejo de respuesta\n    },\n    error: function(xhr, status, error) {\n        // Manejo de errores\n    }\n});\n</code></pre>"},{"location":"global/frontend/#43-manejo-de-errores","title":"4.3 Manejo de Errores","text":"<p>Status HTTP:</p> <ul> <li><code>200</code>: \u00c9xito  </li> <li><code>400</code>: Error de validaci\u00f3n  </li> <li><code>401</code>: Sesi\u00f3n expirada  </li> <li><code>500</code>: Error del servidor  </li> </ul> <p>Estructura de errores:</p> <pre><code>{\n  \"status\": \"error\",\n  \"code\": \"400\",\n  \"message\": \"Error de validaci\u00f3n\",\n  \"errors\": {\n    \"campo1\": \"Error en campo 1\",\n    \"campo2\": \"Error en campo 2\"\n  }\n}\n</code></pre>"},{"location":"global/frontend/#44-estructura-de-payloads","title":"4.4 Estructura de Payloads","text":"<p>Petici\u00f3n:</p> <p><pre><code>CopyInsert\n{\n    \"action\": \"pv_gv_av_os_doc_unlock_send_x_ids\",\n    \"params\": {\n        \"anf\": a\u00f1o,\n        \"eidf\": id_empresa,\n        \"sidf\": id_sucursal,\n        // ... otros par\u00e1metros\n    }\n}\n</code></pre> Respuesta:</p> <pre><code>CopyInsert\n{\n    \"status\": \"success/error\",\n    \"data\": {\n        // datos de respuesta\n    },\n    \"message\": \"Mensaje de \u00e9xito/error\"\n}\n</code></pre>"},{"location":"global/frontend/#45-flujo-de-validacion","title":"4.5 Flujo de Validaci\u00f3n","text":"<ul> <li>Validaci\u00f3n de sesi\u00f3n</li> <li>Validaci\u00f3n de permisos</li> <li>Validaci\u00f3n de datos</li> <li>Procesamiento del negocio</li> <li>Respuesta al cliente</li> </ul>"},{"location":"global/frontend/#5-componentes-personalizados","title":"5. Componentes Personalizados","text":""},{"location":"global/frontend/#51-convenciones-de-nombres","title":"5.1 Convenciones de Nombres","text":"<p>Prefijos:</p> <ul> <li>f_: Formularios</li> <li>sl_: Selects</li> <li>txt_: Textos</li> <li>btn_: Botones</li> <li>ck_: Checkboxes</li> <li>rd_: Radios</li> </ul> <p>Clases:</p> <ul> <li>form-control: Campos de entrada</li> <li>slmun: Select m\u00faltiple</li> <li>minimal: Estilo minimalista</li> <li>icheckbox_minimal-blue: Checkbox</li> <li>iradio_minimal-blue: Radio</li> </ul>"},{"location":"global/frontend/#52-estados-de-componentes","title":"5.2 Estados de Componentes","text":"<ul> <li>Activo: iCheck('enable')</li> <li>Deshabilitado: iCheck('disable')</li> <li>Validado: class=\"has-success\"</li> <li>Error: class=\"has-error\"</li> </ul>"},{"location":"global/frontend/#53-inicializacion","title":"5.3 Inicializaci\u00f3n","text":"<pre><code>CopyInsert\n$(function () {\n    // Inicializaci\u00f3n de iCheck\n    $('input[type=\"checkbox\"].minimal, input[type=\"radio\"].minimal').iCheck({\n        checkboxClass: 'icheckbox_minimal-blue',\n        radioClass: 'iradio_minimal-blue'\n    });\n\n    // Inicializaci\u00f3n de Select2\n    $('.select2').select2({\n        placeholder: 'Selecciona',\n        allowClear: true\n    });\n});\n</code></pre>"},{"location":"global/frontend/#6-responsividad-y-adaptabilidad","title":"6. Responsividad y Adaptabilidad","text":""},{"location":"global/frontend/#61-breakpoints-bootstrap-4","title":"6.1 Breakpoints Bootstrap 4:","text":"<ul> <li>xs: &lt;576px</li> <li>sm: \u2265576px</li> <li>md: \u2265768px</li> <li>lg: \u2265992px</li> <li>xl: \u22651200px</li> </ul>"},{"location":"global/frontend/#62-reglas-personalizadas","title":"6.2 Reglas Personalizadas","text":"<p>Grid personalizado:</p> <pre><code>CopyInsert\n.col-xl-10 {\n    flex: 0 0 83.333333%;\n    max-width: 83.333333%;\n}\n</code></pre>"},{"location":"global/frontend/#63-consideraciones-moviles","title":"6.3 Consideraciones M\u00f3viles","text":"<ul> <li>Formularios adaptativos</li> <li>Men\u00fas responsivos</li> <li>Tablas scrollables</li> <li>Botones grandes para touch</li> </ul>"},{"location":"global/frontend/#7-accesibilidad-a11y","title":"7. Accesibilidad (a11y)","text":""},{"location":"global/frontend/#71-etiquetado-de-formularios","title":"7.1 Etiquetado de Formularios","text":"<pre><code>CopyInsert\n&lt;div class=\"form-group\"&gt;\n    &lt;label for=\"txtconm\" class=\"text-bold-700\"&gt;CONTACTO&lt;/label&gt;\n    &lt;div class=\"input-group\"&gt;\n        &lt;div class=\"input-group-prepend\"&gt;\n            &lt;span class=\"input-group-text\" id=\"basic-addon3\"&gt;\n                &lt;i class=\"fa fa-asterisk\"&gt;&lt;/i&gt;\n            &lt;/span&gt;\n        &lt;/div&gt;\n        &lt;input type=\"text\" id=\"txtconm\" name=\"txtconm\" class=\"form-control\"&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"global/frontend/#72-aria","title":"7.2 ARIA","text":"<ul> <li>aria-label: Etiquetas descriptivas</li> <li>aria-describedby: Descripciones adicionales</li> <li>aria-expanded: Estados de elementos</li> <li>aria-hidden: Elementos ocultos</li> </ul>"},{"location":"global/frontend/#73-navegacion-por-teclado","title":"7.3 Navegaci\u00f3n por Teclado","text":"<ul> <li>Focus visible</li> <li>Tab index</li> <li>Role attributes</li> </ul>"},{"location":"global/frontend/#8-control-de-versiones-y-entorno","title":"8. Control de Versiones y Entorno","text":""},{"location":"global/frontend/#81-gestion-de-dependencias","title":"8.1 Gesti\u00f3n de Dependencias","text":"<ul> <li>jQuery: Versi\u00f3n 3.x</li> <li>Bootstrap: Versi\u00f3n 4.x</li> <li>Select2: Versi\u00f3n 4.x</li> <li>DataTables: Versi\u00f3n 1.10.x</li> <li>SweetAlert2: Versi\u00f3n 11.x</li> </ul>"},{"location":"global/frontend/#82-entorno","title":"8.2 Entorno","text":"<p>Navegadores soportados:</p> <ul> <li>Chrome (\u00faltima versi\u00f3n)</li> <li>Firefox (\u00faltima versi\u00f3n)</li> <li>Edge (\u00faltima versi\u00f3n)</li> </ul>"},{"location":"global/interaccion_cliente_servidor/","title":"Interacci\u00f3n Cliente-Servidor en SIAC 2.0","text":"<p>Este documento detalla c\u00f3mo se comunican las capas frontend y backend del sistema SIAC 2.0, centr\u00e1ndose en el flujo de informaci\u00f3n, validaciones, uso de AJAX y el manejo de tokens como controladores de l\u00f3gica de negocio.</p>"},{"location":"global/interaccion_cliente_servidor/#1-modelo-de-comunicacion-asincrona","title":"1. Modelo de Comunicaci\u00f3n As\u00edncrona","text":"<p>El sistema SIAC 2.0 est\u00e1 dise\u00f1ado para operar de forma altamente interactiva mediante AJAX. Esto permite que la interfaz de usuario se actualice sin recargar toda la p\u00e1gina, proporcionando una experiencia fluida y eficiente.</p>"},{"location":"global/interaccion_cliente_servidor/#11-flujo-general","title":"1.1 Flujo General","text":"sequenceDiagram     participant Usuario     participant Navegador     participant JSFrontend as JavaScript Frontend     participant AJAXPHP as AJAX PHP Controller     participant Backend as Clase PHP     participant DB as Base de Datos      Usuario-&gt;&gt;Navegador: Interacci\u00f3n (clic, cambio, submit)     Navegador-&gt;&gt;JSFrontend: Captura evento     JSFrontend-&gt;&gt;AJAXPHP: Env\u00edo v\u00eda POST con token     AJAXPHP-&gt;&gt;Backend: Validaci\u00f3n de token y l\u00f3gica     Backend-&gt;&gt;DB: Acceso a datos     DB--&gt;&gt;Backend: Resultado de la consulta     Backend--&gt;&gt;AJAXPHP: Resultado procesado     AJAXPHP--&gt;&gt;JSFrontend: Respuesta JSON o HTML     JSFrontend--&gt;&gt;Navegador: Actualizaci\u00f3n de UI"},{"location":"global/interaccion_cliente_servidor/#2-componentes-clave","title":"2. Componentes Clave","text":""},{"location":"global/interaccion_cliente_servidor/#21-javascript-frontend-ajaxjs","title":"2.1 JavaScript Frontend (<code>*.ajax.js</code>)","text":"<ul> <li>Capta eventos (por ejemplo, <code>onClick</code>, <code>onSubmit</code>).</li> <li>Realiza peticiones <code>$.ajax()</code> con <code>type: \"POST\"</code>, <code>dataType: \"json\"</code> o <code>\"html\"</code>.</li> <li>Usa token como selector l\u00f3gico que determina la acci\u00f3n que ejecutar\u00e1 el backend.</li> <li>Maneja <code>success</code>, <code>error</code> y <code>complete</code> para:</li> <li>Actualizar la UI.</li> <li>Mostrar mensajes (Toastr, SweetAlert2).</li> <li>Redirigir.</li> </ul>"},{"location":"global/interaccion_cliente_servidor/#22-controlador-ajax-php-ajaxphp","title":"2.2 Controlador AJAX PHP (<code>*.ajax.php</code>)","text":"<ul> <li>Cada archivo contiene una estructura <code>switch ($_POST['token']) { ... }</code>.</li> <li>Se validan los datos de entrada y la sesi\u00f3n de usuario.</li> <li>Se llaman m\u00e9todos de clases espec\u00edficas seg\u00fan el m\u00f3dulo (por ejemplo, <code>class_crm</code>, <code>class_cds</code>).</li> <li>Retornan arrays codificados en JSON o bloques HTML directamente para insertar en el DOM.</li> </ul>"},{"location":"global/interaccion_cliente_servidor/#23-clases-de-negocio-class_php","title":"2.3 Clases de Negocio (<code>class_*.php</code>)","text":"<ul> <li>Contienen m\u00e9todos p\u00fablicos para manejar operaciones de negocio:</li> <li>Inserciones.</li> <li>Consultas.</li> <li>Actualizaciones.</li> <li>Validaciones.</li> <li>Utilizan conexiones MySQL mediante PDO o mysqli, con protecci\u00f3n contra inyecciones SQL.</li> <li>Algunos m\u00e9todos incluyen l\u00f3gica de auditor\u00eda, control de errores y logs.</li> </ul>"},{"location":"global/interaccion_cliente_servidor/#3-token-based-routing","title":"3. Token-Based Routing","text":"<p>Cada acci\u00f3n se identifica mediante un n\u00famero entero llamado token, enviado desde el frontend.</p>"},{"location":"global/interaccion_cliente_servidor/#31-ejemplo","title":"3.1 Ejemplo","text":"<p><pre><code>$.ajax({\n    type: \"POST\",\n    url: \"crm_ajax.php\",\n    data: {\n        token: 14,\n        idcliente: 1283,\n        email: 'nuevo@cliente.com'\n    },\n    success: function(response) {\n        // procesar respuesta\n    }\n});\n</code></pre> <pre><code>// En crm_ajax.php\nswitch ($_POST['token']) {\n    case 14:\n        $crm = new class_crm();\n        echo json_encode($crm-&gt;actualizarEmail($_POST['idcliente'], $_POST['email']));\n        break;\n}\n</code></pre></p>"},{"location":"global/interaccion_cliente_servidor/#32-convenciones","title":"3.2 Convenciones","text":"<ul> <li>Los tokens se documentan en cada m\u00f3dulo.</li> <li>Deben ser \u00fanicos por archivo AJAX.</li> <li>Cada token debe tener su documentaci\u00f3n funcional.</li> </ul>"},{"location":"global/interaccion_cliente_servidor/#4-validaciones-en-el-ciclo-de-comunicacion","title":"4. Validaciones en el Ciclo de Comunicaci\u00f3n","text":""},{"location":"global/interaccion_cliente_servidor/#41-en-el-cliente","title":"4.1 En el Cliente","text":"<ul> <li>Validaci\u00f3n de formularios con HTML5 (<code>required</code>, <code>pattern</code>).</li> <li>Validaci\u00f3n din\u00e1mica con JavaScript (<code>onblur</code>, <code>keyup</code>).</li> <li>Confirmaciones antes de env\u00edo (SweetAlert2, modals).</li> </ul>"},{"location":"global/interaccion_cliente_servidor/#42-en-el-servidor","title":"4.2 En el Servidor","text":"<ul> <li>Verificaci\u00f3n de sesi\u00f3n activa.</li> <li>Validaci\u00f3n de estructura y tipo de datos (<code>is_numeric</code>, <code>filter_var</code>).</li> <li>Sanitizaci\u00f3n y escape para proteger contra XSS y SQLi.</li> <li>Verificaci\u00f3n de permisos por usuario/sucursal.</li> </ul>"},{"location":"global/interaccion_cliente_servidor/#5-manejo-de-respuestas","title":"5. Manejo de Respuestas","text":"<p>Las respuestas desde PHP pueden ser de dos tipos:</p> <ul> <li>JSON: Estructura con <code>status</code>, <code>message</code>, <code>data</code>, usada para actualizar din\u00e1micamente la interfaz.</li> <li>HTML: Fragmentos renderizados que se insertan directamente en el DOM.</li> </ul>"},{"location":"global/interaccion_cliente_servidor/#ejemplo-json","title":"Ejemplo JSON","text":"<pre><code>{\n    \"status\": \"success\",\n    \"message\": \"Correo actualizado correctamente\",\n    \"data\": {\n        \"idcliente\": 1283,\n        \"email\": \"nuevo@cliente.com\"\n    }\n}\n</code></pre>"},{"location":"global/interaccion_cliente_servidor/#6-seguridad-en-la-interaccion","title":"6. Seguridad en la Interacci\u00f3n","text":"<ul> <li>Todos los controladores AJAX inician con validaci\u00f3n de sesi\u00f3n (<code>$_SESSION</code>).</li> <li>Se verifica que el token sea v\u00e1lido para el usuario y el m\u00f3dulo correspondiente.</li> <li>Se utilizan funciones de acceso a base de datos con par\u00e1metros preparados (PDO, <code>mysqli_stmt</code>) para evitar SQL Injection.</li> <li>Se pueden emplear tokens CSRF adicionales para acciones cr\u00edticas.</li> </ul>"},{"location":"global/seguridad_validaciones/","title":"Seguridad y Validaciones en SIAC 2.0","text":"<p>Este documento detalla los mecanismos de control de acceso, validaci\u00f3n de datos y protecci\u00f3n contra amenazas comunes que se implementan en el sistema SIAC 2.0. Incluye tanto medidas en el cliente como en el servidor, con enfoque en la integridad, confidencialidad y disponibilidad de los datos.</p>"},{"location":"global/seguridad_validaciones/#1-control-de-acceso","title":"1. Control de Acceso","text":""},{"location":"global/seguridad_validaciones/#11-autenticacion","title":"1.1 Autenticaci\u00f3n","text":"<ul> <li>Basada en sesiones PHP (<code>$_SESSION</code>).</li> <li>Login requiere usuario, contrase\u00f1a y empresa/sucursal.</li> <li>Contrase\u00f1as almacenadas con hash y validadas en el backend.</li> <li>Expiraci\u00f3n configurable de sesi\u00f3n por inactividad.</li> </ul>"},{"location":"global/seguridad_validaciones/#12-autorizacion","title":"1.2 Autorizaci\u00f3n","text":"<ul> <li>Cada usuario tiene un perfil definido por tipo (<code>add_user_tipo</code>).</li> <li>Los permisos se asignan por rol en <code>roles_usuar</code> y se vinculan con men\u00fas en <code>roles_usuar_menu</code>.</li> <li>El acceso a cada m\u00f3dulo se controla en tiempo de ejecuci\u00f3n mediante validaciones en scripts AJAX y men\u00fas din\u00e1micos.</li> </ul>"},{"location":"global/seguridad_validaciones/#13-control-multisucursal","title":"1.3 Control Multisucursal","text":"<ul> <li>Cada acci\u00f3n verifica el contexto de empresa (<code>ide</code>) y sucursal (<code>ids</code>) activa.</li> <li>Se emplean filtros para limitar la visibilidad de datos a usuarios autorizados.</li> </ul>"},{"location":"global/seguridad_validaciones/#2-validacion-de-sesiones-y-tokens","title":"2. Validaci\u00f3n de Sesiones y Tokens","text":""},{"location":"global/seguridad_validaciones/#21-validacion-de-sesion","title":"2.1 Validaci\u00f3n de Sesi\u00f3n","text":"<ul> <li>Todos los controladores AJAX inician con verificaci\u00f3n de existencia y validez de <code>$_SESSION</code>.</li> <li>Si la sesi\u00f3n no est\u00e1 activa, se retorna error y se redirige a login.</li> </ul>"},{"location":"global/seguridad_validaciones/#22-validacion-por-token","title":"2.2 Validaci\u00f3n por Token","text":"<ul> <li>Cada solicitud AJAX lleva un <code>token</code> (<code>$_POST['token']</code>), que determina la acci\u00f3n a ejecutar.</li> <li>Los scripts como <code>crm_ajax.php</code>, <code>cds_ajax.php</code> emplean <code>switch(token)</code> para controlar el flujo.</li> <li>Tokens son \u00fanicos por archivo y se documentan en cada m\u00f3dulo.</li> <li>Verificaciones adicionales por tipo de usuario y permisos espec\u00edficos.</li> </ul>"},{"location":"global/seguridad_validaciones/#3-validaciones-de-datos","title":"3. Validaciones de Datos","text":""},{"location":"global/seguridad_validaciones/#31-validaciones-en-frontend-javascript","title":"3.1 Validaciones en Frontend (JavaScript)","text":"<ul> <li>HTML5: <code>required</code>, <code>pattern</code>, <code>maxlength</code>, <code>min</code>, <code>max</code>.</li> <li>Validaciones din\u00e1micas con jQuery para formularios (<code>*.forms.php</code>).</li> <li>Plugins: iCheck, Toastr, SweetAlert2 para interacci\u00f3n visual.</li> </ul>"},{"location":"global/seguridad_validaciones/#32-validaciones-en-backend-php","title":"3.2 Validaciones en Backend (PHP)","text":"<ul> <li>Sanitizaci\u00f3n de datos de entrada: <code>htmlspecialchars()</code>, <code>filter_var()</code>.</li> <li>Validaci\u00f3n de tipos (<code>is_numeric</code>, <code>is_string</code>, <code>DateTime::createFromFormat</code>).</li> <li>Prevenci\u00f3n de SQL Injection con consultas preparadas (<code>mysqli</code>, <code>PDO</code>).</li> <li>Verificaci\u00f3n de integridad l\u00f3gica: no duplicaci\u00f3n, rangos v\u00e1lidos, estado consistente.</li> </ul>"},{"location":"global/seguridad_validaciones/#4-seguridad-en-transporte-y-almacenamiento","title":"4. Seguridad en Transporte y Almacenamiento","text":""},{"location":"global/seguridad_validaciones/#41-transporte","title":"4.1 Transporte","text":"<ul> <li>Implementaci\u00f3n de HTTPS recomendada.</li> <li>Uso de <code>$.ajax</code> con m\u00e9todo <code>POST</code> para evitar exposici\u00f3n en URL.</li> </ul>"},{"location":"global/seguridad_validaciones/#42-almacenamiento","title":"4.2 Almacenamiento","text":"<ul> <li>Contrase\u00f1as con hashing (por ejemplo, <code>bcrypt</code>).</li> <li>Control de acceso a archivos por permisos del sistema operativo.</li> <li>Archivos de configuraci\u00f3n (conexiones, claves) fuera del directorio p\u00fablico.</li> </ul>"},{"location":"global/seguridad_validaciones/#5-prevencion-de-amenazas-comunes","title":"5. Prevenci\u00f3n de Amenazas Comunes","text":"Amenaza Mecanismo de Prevenci\u00f3n SQL Injection Consultas preparadas, validaci\u00f3n de entradas Cross-Site Scripting (XSS) <code>htmlspecialchars</code>, <code>strip_tags</code>, validaciones JS Session Hijacking Regeneraci\u00f3n de session ID, expiraci\u00f3n de sesiones CSRF (Cross-Site Request Forgery) Validaci\u00f3n de sesi\u00f3n, tokens \u00fanicos AJAX Fuerza Bruta L\u00edmite de intentos, captcha (opcional)"},{"location":"global/seguridad_validaciones/#6-buenas-practicas-de-desarrollo","title":"6. Buenas Pr\u00e1cticas de Desarrollo","text":"<ul> <li>Validar todos los datos del lado servidor, incluso si ya fueron validados en frontend.</li> <li>Documentar y versionar tokens de AJAX.</li> <li>Utilizar roles m\u00ednimos necesarios para usuarios nuevos.</li> <li>Revisar y limpiar sesiones obsoletas peri\u00f3dicamente.</li> <li>Nunca confiar en datos del cliente sin validaci\u00f3n interna.</li> </ul> <p>Este documento sirve como referencia para desarrolladores y auditores de seguridad para garantizar que el sistema SIAC 2.0 cumple con buenas pr\u00e1cticas de protecci\u00f3n de datos y control de acceso.</p>"},{"location":"modulos/caja/","title":"Ficha T\u00e9cnica del M\u00f3dulo de Caja","text":""},{"location":"modulos/caja/#1-proposito-general","title":"1. Prop\u00f3sito General","text":"<p>El m\u00f3dulo de Caja es un componente fundamental del sistema de ventas que gestiona todas las operaciones relacionadas con el manejo de efectivo y movimientos financieros en las sucursales. Proporciona una interfaz completa para la administraci\u00f3n de recibos, cobranzas y liquidaciones.</p>"},{"location":"modulos/caja/#2-arquitectura-tecnica","title":"2. Arquitectura T\u00e9cnica","text":"<p>Este m\u00f3dulo implementa la arquitectura est\u00e1ndar del sistema SIAC 2.0 definida en Arquitectura del Sistema, incluyendo:</p> <ul> <li>Separaci\u00f3n por capas (presentaci\u00f3n, l\u00f3gica de negocio, datos)</li> <li>Uso de AJAX con tokens para interacci\u00f3n din\u00e1mica</li> <li>Validaciones integradas de sesi\u00f3n, permisos y datos</li> </ul>"},{"location":"modulos/caja/#3-estructura-de-archivos-clave","title":"3. Estructura de Archivos Clave","text":"Archivo Funcionalidad cont_g_caja.php Gestor principal de caja cont_wspace.php Espacio de trabajo <code>cont_forms.php</code> Formularios de caja <code>cont_ajax.js</code> AJAX para caja <code>cont_graficas.php</code> Gr\u00e1ficos y reportes"},{"location":"modulos/caja/#4-funcionalidades-principales","title":"4. Funcionalidades Principales","text":""},{"location":"modulos/caja/#41-gestion-de-recibos","title":"4.1 Gesti\u00f3n de Recibos","text":"<p>Permite el control completo de los diferentes tipos de recibos en el sistema de caja.</p> <p>Caracter\u00edsticas: - Manejo de recibos de ingresos, liquidaci\u00f3n y cobranza. - Validaci\u00f3n de datos y estados. - Generaci\u00f3n de movimientos. - Notificaciones autom\u00e1ticas.</p> <p>Referencias t\u00e9cnicas: - L\u00f3gica principal: <code>cont_ajax.php</code> - Clase: <code>class_cont.php</code>, m\u00e9todos <code>cont_gcj_rbo_*</code> - Vistas: <code>cont_g_caja.php</code>, <code>cont_forms.php</code></p>"},{"location":"modulos/caja/#42-movimientos-financieros","title":"4.2 Movimientos Financieros","text":"<p>Controla todos los movimientos de efectivo y otros medios de pago.</p> <p>Caracter\u00edsticas: - Tipos de movimientos (efectivo, cr\u00e9dito, descuentos). - Validaci\u00f3n de montos. - Actualizaci\u00f3n de estados. - Historial de movimientos.</p> <p>Referencias t\u00e9cnicas: - L\u00f3gica: <code>cont_ajax.php</code> - Clase: <code>class_cont.php</code>, m\u00e9todos <code>cont_up_*</code> - Formularios: <code>cont_forms.php</code></p>"},{"location":"modulos/caja/#43-sistema-de-notificaciones","title":"4.3 Sistema de Notificaciones","text":"<p>Gestiona todas las notificaciones relacionadas con la caja.</p> <p>Caracter\u00edsticas: - Notificaciones de tickets de venta. - Complementos de pago.</p> <p>Referencias t\u00e9cnicas: - L\u00f3gica: <code>cont_ajax.php</code> - Clase: <code>class_mails.php</code> - Vistas: <code>cont_widgets1.php</code></p>"},{"location":"modulos/caja/#44-reportes-y-analisis","title":"4.4 Reportes y An\u00e1lisis","text":"<p>Generaci\u00f3n de reportes y an\u00e1lisis financieros.</p> <p>Caracter\u00edsticas: - Reportes de ingresos. - Estado de caja.</p> <p>Referencias t\u00e9cnicas: - L\u00f3gica: <code>cont_ajax.php</code> - Clase: <code>class_cont.php</code>, m\u00e9todos <code>cont_view_*</code> - Vistas: <code>cont_graficas.php</code></p>"},{"location":"modulos/caja/#5-integraciones","title":"5. Integraciones","text":""},{"location":"modulos/caja/#51-modulos-internos","title":"5.1 M\u00f3dulos Internos","text":""},{"location":"modulos/caja/#modulo-de-ventas","title":"M\u00f3dulo de Ventas","text":"<p>Integraci\u00f3n con el m\u00f3dulo de ventas para liquidaciones y cobranzas.</p> <ul> <li>Caracter\u00edsticas: Validaci\u00f3n de ventas, sincronizaci\u00f3n de estados.</li> <li>Referencia: <code>cont_ajax.php</code>, l\u00edneas relacionadas con liquidaciones.</li> </ul>"},{"location":"modulos/caja/#modulo-de-cfdi","title":"M\u00f3dulo de CFDI","text":"<p>Integraci\u00f3n con el m\u00f3dulo de facturaci\u00f3n electr\u00f3nica.</p> <ul> <li>Caracter\u00edsticas: Generaci\u00f3n de CFDI, complementos de pago.</li> <li>Referencia: <code>cont_ajax.php</code>, l\u00edneas relacionadas con CFDI.</li> </ul>"},{"location":"modulos/caja/#modulo-de-auditoria","title":"M\u00f3dulo de Auditor\u00eda","text":"<p>Integraci\u00f3n con el sistema de auditor\u00eda.</p> <ul> <li>Caracter\u00edsticas: Registro de operaciones, seguimiento.</li> <li>Referencia: <code>cont_ajax.php</code>, l\u00edneas relacionadas con auditor\u00eda.</li> </ul>"},{"location":"modulos/caja/#modulo-de-usuarios","title":"M\u00f3dulo de Usuarios","text":"<p>Integraci\u00f3n con el sistema de usuarios y permisos.</p> <ul> <li>Caracter\u00edsticas: Control de acceso, permisos por sucursal.</li> <li>Referencia: <code>cont_ajax.php</code>, l\u00edneas relacionadas con validaci\u00f3n.</li> </ul>"},{"location":"modulos/caja/#6-cliente-servidor","title":"6. Cliente - Servidor","text":"<p>Para detalles sobre el patr\u00f3n de comunicaci\u00f3n cliente-servidor utilizado en este proceso, consulta la secci\u00f3n Interacci\u00f3n Cliente-Servidor.</p>"},{"location":"modulos/caja/#7-base-de-datos","title":"7. Base de datos","text":""},{"location":"modulos/caja/#tablas-de-recibos","title":"Tablas de Recibos","text":"<ul> <li>add_no_recibo_print: Manejo de recibos.</li> <li>lista_recibos_x_cancelar: Recibos pendientes de cancelaci\u00f3n.</li> <li>add_pagos_noor_rem: Pagos no relacionados con remisiones.</li> </ul>"},{"location":"modulos/caja/#tablas-de-liquidacion","title":"Tablas de Liquidaci\u00f3n","text":"<ul> <li>liquidacion: Informaci\u00f3n de liquidaciones.</li> <li>add_remision: Remisiones relacionadas con caja.</li> <li>add_remision_venta_neta: Ventas netas.</li> </ul>"},{"location":"modulos/caja/#tablas-de-stock","title":"Tablas de Stock","text":"<ul> <li>add_stock_ajuste: Ajustes de stock.</li> <li>add_ct_productos: Categor\u00edas de productos.</li> </ul>"},{"location":"modulos/caja/#tablas-de-clientes-y-credito","title":"Tablas de Clientes y Cr\u00e9dito","text":"<ul> <li>add_clientes: Informaci\u00f3n de clientes.</li> <li>add_credito_clientes: Cr\u00e9dito de clientes.</li> </ul>"},{"location":"modulos/caja/#tablas-de-sucursales","title":"Tablas de Sucursales","text":"<ul> <li>add_sucursal: Informaci\u00f3n de sucursales.</li> <li>add_rutas: Rutas de distribuci\u00f3n.</li> </ul>"},{"location":"modulos/caja/#tablas-de-cfdi","title":"Tablas de CFDI","text":"<ul> <li>add_cfdi_cpago: Complementos de pago.</li> <li>add_cfdi_cpago_info: Informaci\u00f3n de CFDI.</li> <li>add_cfdi_cpago_cancel: Cancelaciones de CFDI.</li> </ul>"},{"location":"modulos/caja/#8-diagrama-de-flujo-del-modulo","title":"8. Diagrama de flujo del m\u00f3dulo","text":"graph TD     %% Nodos principales     A[Inicio] --&gt; B[Verificaci\u00f3n de Sesi\u00f3n]     B --&gt; C[Validaci\u00f3n de Permisos]     C --&gt; D[Gestor de Caja]      %% Gestor de Caja     D --&gt; E[Men\u00fa Principal]     E --&gt; F[Recibo de Ingresos]     E --&gt; G[Recibo de Liquidaci\u00f3n]     E --&gt; H[Recibo de Cobranza]     E --&gt; I[Recibo de Establecimientos]     E --&gt; J[Corte de Caja]      %% Flujo de Recibo de Ingresos     F --&gt; K[Crear Recibo]     K --&gt; L[Validar Datos]     L --&gt; M[Guardar Recibo]     M --&gt; N[Generar Movimientos]     N --&gt; O[Actualizar Estado]     O --&gt; P[Notificar]      %% Flujo de Recibo de Liquidaci\u00f3n     G --&gt; Q[Crear Recibo]     Q --&gt; R[Validar Datos]     R --&gt; S[Guardar Recibo]     S --&gt; T[Generar Movimientos]     T --&gt; U[Actualizar Estado]     U --&gt; V[Notificar]      %% Flujo de Recibo de Cobranza     H --&gt; W[Crear Recibo]     W --&gt; X[Validar Datos]     X --&gt; Y[Guardar Recibo]     Y --&gt; Z[Generar Movimientos]     Z --&gt; AA[Actualizar Estado]     AA --&gt; AB[Notificar]      %% Flujo de Recibo de Establecimientos     I --&gt; AC[Crear Recibo]     AC --&gt; AD[Validar Datos]     AD --&gt; AE[Guardar Recibo]     AE --&gt; AF[Generar Movimientos]     AF --&gt; AG[Actualizar Estado]     AG --&gt; AH[Notificar]      %% Flujo de Corte de Caja     J --&gt; AI[Generar Reporte]     AI --&gt; AJ[Validar Datos]     AJ --&gt; AK[Guardar Corte]     AK --&gt; AL[Actualizar Estado]     AL --&gt; AM[Notificar]      %% Subprocesos comunes     subgraph \"Proceso de Validaci\u00f3n\"     L --&gt; L1[Validar Usuario]     L --&gt; L2[Validar Datos]     L --&gt; L3[Validar Estado]     end      subgraph \"Proceso de Notificaci\u00f3n\"     P --&gt; P1[Enviar Email]     P --&gt; P2[Actualizar Estado]     P --&gt; P3[Generar Reporte]     end      %% Estilos homog\u00e9neos     classDef startend fill:#c8e6c9,stroke:#2e7d32,color:#000;     classDef process fill:#e1f5fe,stroke:#01579b,color:#000;     classDef decision fill:#fff3e0,stroke:#e65100,color:#000;     classDef subprocess fill:#d1c4e9,stroke:#512da8,color:#000;      %% Asignaci\u00f3n de estilos     class A startend;     class B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,AA,AB,AC,AD,AE,AF,AG,AH,AI,AJ,AK,AL,AM process;     class L1,L2,L3,P1,P2,P3 subprocess;"},{"location":"modulos/cedis/","title":"Ficha T\u00e9cnica del M\u00f3dulo CEDIS - SIAC 2.0 Ventas","text":""},{"location":"modulos/cedis/#1-proposito-general","title":"1. Prop\u00f3sito General","text":"<p>El m\u00f3dulo CEDIS (Centro de Distribuci\u00f3n) administra el inventario de producto terminado en almacenes principales. Su funcionalidad abarca el registro, control, ajuste y seguimiento de productos que ingresan y salen del almac\u00e9n, adem\u00e1s de gestionar transferencias internas y respaldos de datos.</p> <p>Este m\u00f3dulo es fundamental para garantizar la trazabilidad del inventario y su disponibilidad en operaciones de ventas, compras, producci\u00f3n y log\u00edstica.</p>"},{"location":"modulos/cedis/#2-arquitectura-tecnica","title":"2. Arquitectura T\u00e9cnica","text":"<p>Este m\u00f3dulo implementa la arquitectura est\u00e1ndar del sistema SIAC 2.0 definida en Arquitectura del Sistema, incluyendo:</p> <ul> <li>Separaci\u00f3n por capas (presentaci\u00f3n, l\u00f3gica de negocio, datos)</li> <li>Uso de AJAX con tokens para interacci\u00f3n din\u00e1mica</li> <li>Validaciones integradas de sesi\u00f3n, permisos y datos</li> </ul>"},{"location":"modulos/cedis/#3-estructura-de-archivos-del-modulo","title":"3. Estructura de Archivos del M\u00f3dulo","text":"Archivos Funcionalidad <code>cds_ajax.php</code> Puente AJAX entre frontend y backend, validaci\u00f3n. <code>cds_forms.php</code> Formularios para entradas, salidas, consultas. <code>cds_tablas.php</code> Renderizaci\u00f3n de tablas HTML. <code>cds_widgets.php</code> Visualizaci\u00f3n de KPIs. <code>cds_modals.php</code> Ventanas emergentes. <code>cds_g_orden_salida.php</code> Gesti\u00f3n de \u00f3rdenes de salida. <code>cds_g_inventarios.php</code> Vista principal de inventario. <code>cds_wspace.php</code> Espacio de trabajo del usuario. <code>cds_select.php</code> Carga de datos en selects din\u00e1micos. <code>view_cds_stk_ent_loc_pt.php</code> Respaldo de stock desde JSON. <code>cds_ajax.js</code> Eventos y validaciones principales. <code>cds_ajax_1.js</code> Eventos adicionales y funciones auxiliares. <code>cds_g_texturizados.js</code> Gesti\u00f3n de texturizados. <code>cds_g_stock.js</code> Control de stock. <code>cds_g_orden_salida.js</code> Eventos de \u00f3rdenes de salida. <code>cds_g_inventarios.js</code> Eventos de inventario. <code>cds_g_tarimas.js</code> Gesti\u00f3n de tarimas. <code>cds_g_movimientos.js</code> Control de movimientos. <code>cds_g_reportes.js</code> Generaci\u00f3n de reportes. <code>cds_g_config.js</code> Configuraci\u00f3n del m\u00f3dulo. <code>cds_g_validaciones.js</code> Validaciones espec\u00edficas. <code>cds_g_widgets.js</code> Eventos de widgets. <code>cds_g_graficas.js</code> Generaci\u00f3n de gr\u00e1ficas. <code>cds_g_util.js</code> Funciones utilitarias."},{"location":"modulos/cedis/#4-funcionalidades-principales","title":"4. Funcionalidades Principales","text":""},{"location":"modulos/cedis/#41-gestor-de-ordenes-de-salida","title":"4.1 Gestor de \u00d3rdenes de Salida","text":"<p>Gesti\u00f3n completa del proceso de despacho de productos desde el CEDIS. Permite crear \u00f3rdenes, asignar productos y generar documentos de salida.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Creaci\u00f3n de \u00f3rdenes de salida</li> <li>Edici\u00f3n de \u00f3rdenes existentes</li> <li>Validaci\u00f3n de existencias vs. pedidos</li> <li>C\u00e1lculo de efectividad (porcentaje de solicitud cubierta)</li> <li>Generaci\u00f3n de reportes y PDFs</li> <li>Impresi\u00f3n de documentos</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>Tokens: 100-107</li> <li>Archivos: <code>cds_g_orden_salida.php</code>, <code>cds_ajax.php</code></li> <li>Clases: <code>c_Up_cds</code>, <code>c_Rmv_cds</code>, <code>c_View_cds</code></li> </ul> <p>Funciones principales:</p> <ul> <li><code>cds_add_gos_cedis_os_tit_reg</code>: Creaci\u00f3n de \u00f3rdenes</li> <li><code>cds_up_gos_cedis_os_tit_reg</code>: Edici\u00f3n de \u00f3rdenes</li> <li><code>cds_view_query_x_scrip</code>: Validaci\u00f3n de existencias</li> <li><code>cds_add_gos_cedis_os_prod</code>: Asignaci\u00f3n de productos</li> </ul> <p>Diagrama</p>   graph TD     %% Nodos principales     OS[Gestor de \u00d3rdenes de Salida] --&gt; OS1[Crear Orden]     OS --&gt; OS2[Editar Orden]     OS --&gt; OS3[Generar Reporte]      %% Procesos comunes     SUB1[Validar Existencias] --&gt; SUB11[Consultar Stock]     SUB11 --&gt; SUB12[Comparar con Pedido]     SUB12 --&gt; SUB13[Actualizar Efectividad]      %% Crear Orden     OS1 --&gt; OS11[Asociar Pedido]     OS11 --&gt; SUB1     SUB1 --&gt; OS14[Guardar Orden]      %% Editar Orden     OS2 --&gt; OS21[Seleccionar Orden]     OS21 --&gt; OS22[Modificar Productos]     OS22 --&gt; SUB1     SUB1 --&gt; OS23[Guardar Cambios]      %% Generar Reporte     OS3 --&gt; OS31[Seleccionar Tipo]     OS31 --&gt; OS32[Generar PDF]     OS32 --&gt; OS33[Mostrar Documento]      %% Estilos     classDef proceso fill:#bbf,stroke:#333,stroke-width:1px     classDef subproceso fill:#fbb,stroke:#333,stroke-width:1px     classDef documento fill:#bfb,stroke:#333,stroke-width:1px      class OS1,OS2,OS3 proceso     class OS11,OS14,OS21,OS22,OS23,OS31,OS32,OS33 proceso     class SUB1,OS11,OS12,OS13 subproceso"},{"location":"modulos/cedis/#42-existencias-de-productos-terminados","title":"4.2 Existencias de Productos Terminados","text":"<p>Control y visualizaci\u00f3n de inventario de productos terminados en el CEDIS.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Consulta de existencias en tiempo real</li> <li>Gr\u00e1ficas por categor\u00edas</li> <li>Respaldo de informaci\u00f3n</li> <li>Historial de movimientos</li> <li>Generaci\u00f3n de reportes</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>Tokens: 95-98</li> <li>Archivos: <code>cds_g_stock.php</code>, <code>cds_ajax.php</code></li> <li>Clases: <code>c_View_cds</code>, <code>c_Add_cds</code></li> </ul> <p>Funciones principales:</p> <ul> <li><code>cds_view_query_x_scrip</code>: Consulta de existencias</li> <li><code>cds_add_ginv_stock_bk_prod</code>: Respaldo de stock</li> <li><code>cds_add_gtex_cedis_ent_pt_prod</code>: Entrada de productos</li> <li><code>cds_up_gtex_prod_stk_cant_x_ids</code>: Ajustes de stock</li> </ul> <p>Diagrama</p>   graph TD     %% Nodos principales     ST[Existencias de Productos Terminados] --&gt; ST1[Consultar Existencias]     ST --&gt; ST2[Ver Gr\u00e1ficas]     ST --&gt; ST3[Realizar Respaldo]     ST --&gt; ST4[Consultar Movimientos]      %% Consulta de Existencias     ST1 --&gt; ST11[Seleccionar Categor\u00eda]     ST11 --&gt; ST12[Buscar Producto]     ST12 --&gt; ST13[Mostrar Stock]     ST13 --&gt; ST14[Exportar Datos]      %% Ver Gr\u00e1ficas     ST2 --&gt; ST21[Generar Gr\u00e1fica]     ST21 --&gt; ST22[Mostrar Visualizaci\u00f3n]      %% Realizar Respaldo     ST3 --&gt; ST31[Generar Backup]     ST31 --&gt; ST32[Guardar Archivo]      %% Consultar Movimientos     ST4 --&gt; ST41[Seleccionar Fecha]     ST41 --&gt; ST42[Mostrar Historial]     ST42 --&gt; ST43[Exportar Reporte]      %% Estilos     classDef proceso fill:#bbf,stroke:#333,stroke-width:1px     classDef subproceso fill:#fbb,stroke:#333,stroke-width:1px     classDef documento fill:#bfb,stroke:#333,stroke-width:1px      class ST1,ST2,ST3,ST4 proceso     class ST11,ST12,ST13,ST14,ST21,ST22,ST31,ST32,ST41,ST42,ST43 proceso"},{"location":"modulos/cedis/#43-gestor-de-materiales-adicionales","title":"4.3 Gestor de Materiales Adicionales","text":"<p>Gesti\u00f3n de productos sin pedidos asociados y seguimiento de inventario.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Creaci\u00f3n de \u00f3rdenes independientes</li> <li>Gesti\u00f3n de productos</li> <li>Seguimiento de existencias</li> <li>Control de movimientos</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>Tokens: 80-84</li> <li>Archivos: <code>cds_g_materiales.php</code>, <code>cds_ajax.php</code></li> <li>Clases: <code>c_Add_cds</code>, <code>c_Rmv_cds</code></li> </ul> <p>Funciones principales:</p> <ul> <li><code>cds_add_gos_cedis_os_tit_reg</code>: Creaci\u00f3n de \u00f3rdenes</li> <li><code>cds_add_gos_cedis_os_prod</code>: Gesti\u00f3n de productos</li> <li><code>cds_view_query_x_scrip</code>: Seguimiento de inventario</li> </ul> <p>Diagrama</p>  graph TD     %% Nodos principales     MA[Gestor de Materiales Adicionales] --&gt; MA1[Crear Orden]     MA --&gt; MA2[Gestionar Productos]     MA --&gt; MA3[Seguimiento de Existencias]      %% Crear Orden     MA1 --&gt; MA11[Generar T\u00edtulo]     MA11 --&gt; MA12[Asignar Productos]     MA12 --&gt; MA13[Guardar Orden]      %% Gestionar Productos     MA2 --&gt; MA21[Seleccionar Producto]     MA21 --&gt; MA22[Actualizar Cantidad]     MA22 --&gt; MA23[Guardar Cambios]      %% Seguimiento de Existencias     MA3 --&gt; MA31[Consultar Stock]     MA31 --&gt; MA32[Mostrar Movimientos]     MA32 --&gt; MA33[Exportar Reporte]      %% Estilos     classDef proceso fill:#bbf,stroke:#333,stroke-width:1px     classDef subproceso fill:#fbb,stroke:#333,stroke-width:1px     classDef documento fill:#bfb,stroke:#333,stroke-width:1px      class MA1,MA2,MA3 proceso     class MA11,MA12,MA13,MA21,MA22,MA23,MA31,MA32,MA33 proceso"},{"location":"modulos/cedis/#44-gestor-de-texturizados","title":"4.4 Gestor de Texturizados","text":"<p>Gesti\u00f3n de productos texturizados desde producci\u00f3n hasta almacenamiento.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Entrada de productos desde producci\u00f3n</li> <li>Confirmaci\u00f3n de tarimas</li> <li>Actualizaci\u00f3n manual de productos</li> <li>Control de precios</li> <li>Consulta de movimientos</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>Tokens: 107-110</li> <li>Archivos: <code>cds_g_texturizados.php</code>, <code>cds_ajax.php</code></li> <li>Clases: <code>c_Ws_Up</code>, <code>c_View_cds</code>, <code>c_Add_cds</code></li> </ul> <p>Funciones principales:</p> <ul> <li><code>cds_gtex_prog_fol_tma_edo_up_x_ids</code>: Confirmaci\u00f3n de tarimas</li> <li><code>cds_add_gtex_cedis_ent_pt_prod</code>: Entrada de productos</li> <li><code>cds_add_gtex_cedis_ent_pt_tit</code>: Creaci\u00f3n de t\u00edtulos</li> <li><code>cds_up_gtex_prod_stk_cant_x_ids</code>: Actualizaci\u00f3n de precios</li> </ul> <p>Diagrama</p>  graph TD     %% Nodos principales     TX[Gestor de Texturizados] --&gt; TX1[Entrada de Productos]     TX --&gt; TX2[Entrada Manual]     TX --&gt; TX3[Actualizar Precios]     TX --&gt; TX4[Consultar Movimientos]      %% Entrada de Productos     TX1 --&gt; TX11[Recibir Datos]     TX11 --&gt; TX12[Validar Entrada]     TX12 --&gt; TX13[Confirmar Tarimas]     TX13 --&gt; TX14[Registrar Productos]     TX14 --&gt; TX15[Actualizar Stock]      %% Entrada Manual     TX2 --&gt; TX21[Seleccionar Producto]     TX21 --&gt; TX22[Ingresar Datos]     TX22 --&gt; TX23[Actualizar Stock]     TX23 --&gt; TX24[Guardar Cambios]      %% Actualizar Precios     TX3 --&gt; TX31[Seleccionar Producto]     TX31 --&gt; TX32[Actualizar Precio]     TX32 --&gt; TX33[Guardar Cambios]      %% Consultar Movimientos     TX4 --&gt; TX41[Seleccionar Fecha]     TX41 --&gt; TX42[Mostrar Historial]     TX42 --&gt; TX43[Exportar Reporte]      %% Estilos     classDef proceso fill:#bbf,stroke:#333,stroke-width:1px     classDef subproceso fill:#fbb,stroke:#333,stroke-width:1px     classDef documento fill:#bfb,stroke:#333,stroke-width:1px      class TX1,TX2,TX3,TX4 proceso     class TX11,TX12,TX13,TX14,TX15,TX21,TX22,TX23,TX24,TX31,TX32,TX33,TX41,TX42,TX43 proceso"},{"location":"modulos/cedis/#45-seguridad-y-control","title":"4.5 Seguridad y Control","text":"<p>Caracter\u00edsticas de seguridad:</p> <ul> <li>Validaci\u00f3n de sesi\u00f3n: <code>$_COOKIE['siacventas']</code></li> <li>Tokens por operaci\u00f3n</li> <li>Validaci\u00f3n de permisos</li> <li>Control de acceso</li> </ul> <p>Caracter\u00edsticas de control:</p> <ul> <li>Validaci\u00f3n en tiempo real</li> <li>Ajustes autom\u00e1ticos</li> <li>Historial de movimientos</li> <li>Respaldos JSON</li> </ul>"},{"location":"modulos/cedis/#46-integracion-y-reportes","title":"4.6 Integraci\u00f3n y Reportes","text":"<p>Integraci\u00f3n:</p> <ul> <li>Con m\u00f3dulo de contabilidad</li> <li>Con departamento de producci\u00f3n</li> <li>Con sistema de pedidos</li> </ul> <p>Reportes:</p> <ul> <li>Generaci\u00f3n de PDFs</li> <li>Gr\u00e1ficas din\u00e1micas</li> <li>Exportaci\u00f3n de datos</li> <li>Consultas hist\u00f3ricas</li> </ul>"},{"location":"modulos/cedis/#5-integraciones","title":"5. Integraciones","text":""},{"location":"modulos/cedis/#51-modulos-internos","title":"5.1 M\u00f3dulos Internos","text":""},{"location":"modulos/cedis/#modulo-de-ventas","title":"M\u00f3dulo de Ventas","text":"<p>Permite validar existencia de productos al momento de realizar ventas y sincronizar los movimientos de inventario.</p> <ul> <li>Caracter\u00edsticas: Validaci\u00f3n de stock en tiempo real, sincronizaci\u00f3n de precios</li> <li>Referencia: <code>cds_ajax.php</code>, l\u00edneas 312\u2013349</li> </ul>"},{"location":"modulos/cedis/#modulo-de-contabilidad","title":"M\u00f3dulo de Contabilidad","text":"<p>Ajustes contables autom\u00e1ticos seg\u00fan los movimientos de inventario, \u00f3rdenes de salida y devoluciones.</p> <ul> <li>Caracter\u00edsticas: Facturaci\u00f3n autom\u00e1tica, comprobantes de egreso, ajuste de inventarios con impacto contable</li> <li>Referencia: <code>cds_ajax.php</code>, l\u00edneas 212\u2013247</li> </ul>"},{"location":"modulos/cedis/#modulo-de-compras","title":"M\u00f3dulo de Compras","text":"<p>Automatiza la recepci\u00f3n de productos y su ingreso al inventario al cierre del ciclo de compras.</p> <ul> <li>Caracter\u00edsticas: Validaci\u00f3n de \u00f3rdenes, asignaci\u00f3n a ubicaciones, control de calidad</li> <li>Referencia: <code>cds_ajax.php</code>, l\u00edneas 142\u2013176</li> </ul>"},{"location":"modulos/cedis/#52-servicios-externos","title":"5.2 Servicios Externos","text":""},{"location":"modulos/cedis/#servicios-web","title":"Servicios Web","text":"<p>Sincronizaci\u00f3n con servicios externos para control de tarimas y env\u00edo de notificaciones.</p> <ul> <li>Caracter\u00edsticas: Comunicaci\u00f3n v\u00eda JSON, env\u00edo de etiquetas, respuesta a eventos externos</li> <li>Referencia: <code>cds_ajax.php</code>, l\u00edneas 1\u201330</li> </ul>"},{"location":"modulos/cedis/#facturacion-electronica","title":"Facturaci\u00f3n Electr\u00f3nica","text":"<p>Generaci\u00f3n de comprobantes y sincronizaci\u00f3n con el sistema fiscal externo.</p> <ul> <li>Caracter\u00edsticas: Generaci\u00f3n de CFDI, integraci\u00f3n con folios, emisi\u00f3n autom\u00e1tica</li> <li>Referencia: Integraci\u00f3n general (consultas cruzadas con m\u00f3dulo contable)</li> </ul>"},{"location":"modulos/cedis/#53-sistema-de-archivos","title":"5.3 Sistema de Archivos","text":"<p>Gesti\u00f3n documental para reportes e historiales del sistema, incluyendo exportaciones en formato PDF y respaldos autom\u00e1ticos.</p> <ul> <li>Caracter\u00edsticas: Exportaci\u00f3n, almacenamiento estructurado, control de versiones</li> <li>Referencia: <code>cds_ajax.php</code>, l\u00edneas 248\u2013277</li> </ul>"},{"location":"modulos/cedis/#54-flujo-de-integraciones","title":"5.4 Flujo de Integraciones","text":"graph TD     A[CEDIS] --&gt; B[Ventas]     B --&gt; C[Contabilidad]     C --&gt; D[Compras]     A --&gt; E[Servicios Web]     A --&gt; F[Facturaci\u00f3n]"},{"location":"modulos/cedis/#6-interaccion-cliente-servidor","title":"6. Interacci\u00f3n Cliente-Servidor","text":"<p>Ver detalles del patr\u00f3n de comunicaci\u00f3n en Interacci\u00f3n Cliente-Servidor.</p>"},{"location":"modulos/cedis/#7-seguridad-y-validaciones","title":"7. Seguridad y Validaciones","text":"<ul> <li>Validaci\u00f3n de sesi\u00f3n en cada llamada AJAX</li> <li>Control de acceso por tipo de usuario, empresa y sucursal</li> <li>Validaci\u00f3n de datos con HTML5 y JavaScript en frontend</li> <li>Validaci\u00f3n de existencia, disponibilidad y consistencia de datos en backend</li> </ul> <p>Ver est\u00e1ndares completos en Seguridad y Validaciones.</p>"},{"location":"modulos/cedis/#7-base-de-datos","title":"7. Base de Datos","text":"<p>Procedimientos Almacenados (SPs): <code>sp_cds_*</code></p> <p>Tablas clave:</p> <ul> <li>Tablas de Ordenes de Salida:<ul> <li><code>add_mini_stock_vendedor_temp</code> (almacena temporalmente productos para \u00f3rdenes)</li> <li><code>add_mini_stock_vendedor</code> (almacena productos de \u00f3rdenes)</li> <li><code>add_stock_ajuste</code> (almacena ajustes de stock)</li> </ul> </li> <li>Tablas de Productos:<ul> <li><code>add_descuento_prom_prod_his</code> (historial de descuentos y promociones)</li> <li><code>add_stock_ajuste</code> (ajustes de stock)</li> </ul> </li> <li>Tablas de Movimientos:<ul> <li><code>add_descuento_prom_prod_his</code> (historial de descuentos y promociones)</li> <li><code>add_stock_ajuste</code> (ajustes de stock)</li> </ul> </li> <li>Tablas de Agentes de Venta:<ul> <li><code>add_cc_myr</code> (agentes de venta y sus permisos)</li> </ul> </li> <li>Tablas de CEDIS:<ul> <li><code>add_stock_ajuste</code> (control de stock)</li> <li><code>add_mini_stock_vendedor</code> (stock por vendedor)</li> </ul> </li> <li>Tablas de Movimientos de Stock:<ul> <li><code>add_stock_ajuste</code> (registra ajustes de stock)</li> <li><code>add_mini_stock_vendedor</code> (movimientos de stock por vendedor)</li> </ul> </li> <li>Tablas de Historial:<ul> <li><code>add_descuento_prom_prod_his</code> (historial de descuentos)</li> <li><code>add_stock_ajuste</code> (historial de ajustes)</li> </ul> </li> <li>Tablas de Configuraci\u00f3n:<ul> <li><code>add_cc_myr</code> (configuraci\u00f3n de agentes y sucursales)</li> </ul> </li> </ul>"},{"location":"modulos/cedis/#8-diagrama-de-flujo-modulo-cedis","title":"8. Diagrama de Flujo \u2013 M\u00f3dulo CEDIS","text":"graph TD     A[Inicio] --&gt; B[Autenticaci\u00f3n]     B --&gt; C{Men\u00fa Principal CEDIS}      %% Entradas de Productos     C --&gt; |Entradas| E1[Entrada de Productos]     E1 --&gt; E2{\u00bfTipo de Entrada?}     E2 --&gt; |Producci\u00f3n| E3[Entrada por Producci\u00f3n]     E2 --&gt; |Manual| E4[Entrada Manual]     E3 --&gt; E5[Validar Producto]     E4 --&gt; E5     E5 --&gt; E6[Actualizar Stock]     E6 --&gt; E7[Registrar Movimiento]     E7 --&gt; E8[Generar Respaldos]      %% Salidas de Productos     C --&gt; |Salidas| S1[Salida de Productos]     S1 --&gt; S2{\u00bfTipo de Salida?}     S2 --&gt; |\u00d3rdenes| S3[\u00d3rdenes de Salida Ventas, Donaciones, Mermas, etc.]     S2 --&gt; |Traslados| S4[Traslados a Sucursales]     S3 --&gt; S5[Validar Existencia]     S4 --&gt; S5     S5 --&gt; S6{\u00bfSuficiente Stock?}     S6 --&gt; |S\u00ed| S7[Actualizar Stock]     S6 --&gt; |No| S8[Notificar Falta]     S7 --&gt; S9[Registrar Movimiento]     S9 --&gt; S10[Generar Documentos]     S10 --&gt; S11[Generar Respaldos]      %% Consultas y Reportes     C --&gt; |Consultas| R1[Consultar Stock]     R1 --&gt; R2[Generar Reporte]     R2 --&gt; R3[Exportar/Imprimir]      %% Estilos personalizados     classDef process fill:#e1f5fe,stroke:#01579b,color:#000;     classDef decision fill:#fff3e0,stroke:#e65100,color:#000;     classDef startend fill:#c8e6c9,stroke:#2e7d32,color:#000;     classDef database fill:#f5f5f5,stroke:#000000,color:#000;      class A startend;     class E2,S2,S6 decision;     class B,C,E1,E3,E4,E5,E6,E7,E8,S1,S3,S4,S5,S7,S8,S9,S10,S11,R1,R2,R3 process;"},{"location":"modulos/crm/","title":"Ficha T\u00e9cnica Unificada del M\u00f3dulo CRM - SIAC 2.0 Ventas","text":""},{"location":"modulos/crm/#1-proposito-general","title":"1. Prop\u00f3sito General","text":"<p>El m\u00f3dulo CRM (Customer Relationship Management) gestiona la informaci\u00f3n completa de clientes, incluyendo:</p> <p>Este m\u00f3dulo permite administrar de manera integral toda la informaci\u00f3n relacionada con los clientes de la empresa, desde sus datos b\u00e1sicos hasta su historial de ventas y preferencias.</p> <p>Funciones principales:</p> <ul> <li>Gesti\u00f3n completa de informaci\u00f3n de clientes</li> <li>Asignaci\u00f3n de agentes de ventas</li> <li>Gesti\u00f3n de rutas de visita</li> <li>Control de visitas y frecuencias</li> <li>Gesti\u00f3n de datos fiscales</li> <li>Manejo de contactos</li> <li>Historial de ventas</li> <li>Gesti\u00f3n de cr\u00e9dito</li> <li>Sincronizaci\u00f3n con otros m\u00f3dulos del sistema</li> </ul> <p>Ubicaci\u00f3n: <code>ventas/</code> Parte del sistema: <code>SIAC_2_0_Ventas</code></p>"},{"location":"modulos/crm/#2-arquitectura-tecnica","title":"2. Arquitectura T\u00e9cnica","text":"<p>Este m\u00f3dulo implementa la arquitectura est\u00e1ndar del sistema SIAC 2.0 definida en Arquitectura del Sistema, incluyendo:</p> <ul> <li>Separaci\u00f3n por capas (presentaci\u00f3n, l\u00f3gica de negocio, datos)</li> <li>Uso de AJAX con tokens para interacci\u00f3n din\u00e1mica</li> <li>Validaciones integradas de sesi\u00f3n, permisos y datos</li> </ul>"},{"location":"modulos/crm/#3-estructura-de-archivos-clave","title":"3. Estructura de Archivos Clave","text":"Archivos Funcionalidad <code>crm_ajax.php</code> Puente AJAX entre frontend y backend, validaci\u00f3n. <code>crm_forms.php</code> Formularios para alta/editar cliente, datos fiscales, etc. <code>crm_tablas.php</code> Renderizaci\u00f3n de tablas HTML. <code>crm_widgets.php</code> Visualizaci\u00f3n de KPIs y estad\u00edsticas. <code>crm_modals.php</code> Ventanas emergentes. <code>crm_select.php</code> Carga de datos en selects din\u00e1micos. <code>crm_select2.php</code> Select2 para b\u00fasquedas avanzadas. <code>crm_g_clientes.php</code> Vista principal de gesti\u00f3n de clientes. <code>crm_g_mtz_clientes.php</code> Gesti\u00f3n de clientes por sucursal. <code>crm_g_rutas.php</code> Gesti\u00f3n de rutas de visita. <code>crm_g_r_vtaav.php</code> Reportes de ventas por agente. <code>crm_g_r_vtaclie.php</code> Reportes de ventas por cliente. <code>crm_g_r_vtaprod.php</code> Reportes de ventas por producto. <code>crm_g_r_vtawork.php</code> Reportes de trabajo de visitas. <code>crm_ajax.js</code> Eventos y validaciones principales. <code>crm_ajax_1.js</code> Eventos adicionales y funciones auxiliares. <code>crm_av_ajax.js</code> Funciones de validaci\u00f3n avanzada. <code>crm_forms.php</code> Formularios y vistas. <code>crm_tablas.php</code> Generaci\u00f3n de listados. <code>crm_widgets.php</code> Componentes interactivos. <code>crm_select.php</code>, <code>crm_select2.php</code> Selectores din\u00e1micos."},{"location":"modulos/crm/#4-funcionalidades-principales","title":"4. Funcionalidades Principales","text":""},{"location":"modulos/crm/#41-gestion-de-clientes","title":"4.1 Gesti\u00f3n de Clientes","text":"<p>Permite el control integral de la informaci\u00f3n de clientes dentro del sistema. La funcionalidad incluye:</p> <p>Caracter\u00edsticas:</p> <ul> <li>Alta, edici\u00f3n y baja de clientes</li> <li>Asignaci\u00f3n de agentes de ventas</li> <li>Asignaci\u00f3n de rutas de visita</li> <li>Clasificaci\u00f3n de clientes por tipo</li> <li>Gesti\u00f3n de datos fiscales</li> <li>Control de visitas y frecuencia</li> <li>Historial de ventas</li> <li>Gesti\u00f3n de cr\u00e9dito</li> <li>Visualizaci\u00f3n en mapas geogr\u00e1ficos</li> <li>Sistema de copia de clientes</li> <li>Exportaci\u00f3n de datos a PDF y Excel</li> <li>Gesti\u00f3n de contactos m\u00faltiples por cliente</li> <li>Sistema de notificaciones y correos electr\u00f3nicos</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>L\u00f3gica principal: <code>crm_ajax.php</code> (L\u00edneas 177\u2013211)</li> <li>Clase: <code>class_crm.php</code>, m\u00e9todo <code>get_movimientos()</code></li> <li>Vista: <code>crm_g_clientes.php</code>, <code>crm_widgets.php</code></li> <li>Exportaci\u00f3n: <code>export/xls_crm_rutas.php</code>, <code>export/xls_crm_suc_clies.php</code></li> <li>Mapas: <code>modals/crm_cliente_maps.php</code>, <code>modals/crm_ruta_clies_maps.php</code></li> </ul>"},{"location":"modulos/crm/#42-datos-fiscales","title":"4.2 Datos Fiscales","text":"<p>Gesti\u00f3n completa de la informaci\u00f3n fiscal de los clientes, incluyendo:</p> <p>Caracter\u00edsticas:</p> <ul> <li>RFC y raz\u00f3n social</li> <li>Tipo de persona</li> <li>C\u00f3digo de uso</li> <li>Nombre de uso</li> <li>Direcci\u00f3n fiscal completa</li> <li>C\u00f3digo postal</li> <li>Municipio</li> <li>Estado</li> <li>Pa\u00eds</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>L\u00f3gica: <code>crm_ajax.php</code> (L\u00edneas 100\u2013141)</li> <li>Vistas: <code>crm_g_clientes.php</code></li> <li>Clase: <code>class_crm.php</code>, m\u00e9todo <code>crm_add_gclie_datos_fiscales()</code></li> </ul>"},{"location":"modulos/crm/#43-gestion-de-credito","title":"4.3 Gesti\u00f3n de Cr\u00e9dito","text":"<p>Control de l\u00edmites y condiciones crediticias de los clientes.</p> <p>Caracter\u00edsticas:</p> <ul> <li>L\u00edmite de cr\u00e9dito</li> <li>Tipo de cr\u00e9dito</li> <li>Condiciones de pago</li> <li>Estado de cr\u00e9dito</li> <li>Historial de aprobaciones</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>L\u00f3gica: <code>crm_ajax.php</code> (L\u00edneas 350\u2013384)</li> <li>Formularios: <code>crm_forms.php</code></li> <li>Clase: <code>class_crm.php</code>, funciones <code>crm_add_gclie_credito()</code></li> </ul>"},{"location":"modulos/crm/#44-gestion-de-contactos","title":"4.4 Gesti\u00f3n de Contactos","text":"<p>Administraci\u00f3n de contactos asociados a cada cliente.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Contacto principal</li> <li>Contacto de compras</li> <li>Contacto de pagos</li> <li>Contacto de ventas</li> <li>Informaci\u00f3n de contacto (tel\u00e9fono, email, WhatsApp)</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>L\u00f3gica: <code>crm_ajax.php</code> (L\u00edneas 470\u2013506)</li> <li>Clase: <code>class_crm.php</code>, funciones <code>crm_add_gclie_contactos()</code></li> </ul>"},{"location":"modulos/crm/#45-gestion-de-visitas","title":"4.5 Gesti\u00f3n de Visitas","text":"<p>Control de las visitas a clientes.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Programaci\u00f3n de visitas</li> <li>Frecuencia de visita</li> <li>Rutas de visita</li> <li>Historial de visitas</li> <li>Agentes asignados</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>L\u00f3gica: <code>crm_ajax.php</code> (L\u00edneas 528\u2013553)</li> <li>Clase: <code>class_crm.php</code>, funciones <code>crm_add_gclie_visitas()</code></li> </ul>"},{"location":"modulos/crm/#46-reportes-y-estadisticas","title":"4.6 Reportes y Estad\u00edsticas","text":"<p>Generaci\u00f3n de reportes y estad\u00edsticas sobre clientes.</p> <p>Referencias t\u00e9cnicas:</p> <ul> <li>M\u00e9todos: <code>get_movimientos()</code>, <code>get_estadisticas()</code> en <code>class_crm.php</code></li> <li>Visualizaci\u00f3n: <code>crm_graficas.php</code>, <code>crm_widgets.php</code></li> <li>Exportaci\u00f3n: <code>crm_export.php</code></li> </ul>"},{"location":"modulos/crm/#5-integraciones","title":"5. Integraciones","text":""},{"location":"modulos/crm/#51-modulos-internos","title":"5.1 M\u00f3dulos Internos","text":""},{"location":"modulos/crm/#modulo-de-ventas","title":"M\u00f3dulo de Ventas","text":"<p>Permite validar existencia de clientes al momento de realizar ventas y sincronizar los movimientos de cr\u00e9dito.</p> <ul> <li>Caracter\u00edsticas: Validaci\u00f3n de cliente en tiempo real, sincronizaci\u00f3n de ventas</li> <li>Referencia: <code>crm_ajax.php</code>, l\u00edneas 312\u2013349</li> </ul>"},{"location":"modulos/crm/#modulo-de-contabilidad","title":"M\u00f3dulo de Contabilidad","text":"<p>Ajustes contables autom\u00e1ticos seg\u00fan los movimientos de cr\u00e9dito y ventas.</p> <ul> <li>Caracter\u00edsticas: Actualizaci\u00f3n autom\u00e1tica de estados financieros</li> <li>Referencia: <code>crm_ajax.php</code>, l\u00edneas 283\u2013296</li> </ul>"},{"location":"modulos/crm/#modulo-de-inventario","title":"M\u00f3dulo de Inventario","text":"<p>Sincronizaci\u00f3n de informaci\u00f3n de productos y precios.</p> <ul> <li>Caracter\u00edsticas: Actualizaci\u00f3n autom\u00e1tica de informaci\u00f3n de productos</li> <li>Referencia: <code>crm_ajax.php</code>, l\u00edneas 400\u2013420</li> </ul>"},{"location":"modulos/crm/#52-servicios-externos","title":"5.2 Servicios Externos","text":"<ul> <li>Mapas: Integraci\u00f3n para mostrar la geolocalizaci\u00f3n de clientes.</li> <li>Correo Electr\u00f3nico: Env\u00edo y administraci\u00f3n de emails asociados a contactos.</li> <li>Exportaci\u00f3n: Generaci\u00f3n de archivos Excel y PDF.</li> </ul>"},{"location":"modulos/crm/#6-interaccion-cliente-servidor","title":"6. Interacci\u00f3n Cliente-Servidor","text":"<p>Para una descripci\u00f3n completa del flujo de datos y el manejo de tokens, consulta la secci\u00f3n Interacci\u00f3n Cliente-Servidor.</p>"},{"location":"modulos/crm/#7-base-de-datos","title":"7. Base de Datos","text":""},{"location":"modulos/crm/#71-tablas-principales","title":"7.1 Tablas Principales","text":"<ol> <li> <p>add_clientes</p> </li> <li> <p>add_clientes_tipos</p> </li> <li> <p>add_clientes_cred_check</p> </li> <li> <p>add_datos_facturas_clientes</p> </li> </ol>"},{"location":"modulos/crm/#72-tablas-de-relacion","title":"7.2 Tablas de Relaci\u00f3n","text":"<ol> <li> <p>add_rutas</p> </li> <li> <p>add_sucursal</p> </li> </ol>"},{"location":"modulos/crm/#73-tablas-de-configuracion","title":"7.3 Tablas de Configuraci\u00f3n","text":"<ol> <li> <p>add_ano_nuevo</p> </li> <li> <p>add_cfdi_reg_fiscal</p> </li> </ol>"},{"location":"modulos/crm/#74-tablas-de-contacto","title":"7.4 Tablas de Contacto","text":"<ol> <li> <p>add_emails_clientes</p> </li> <li> <p>add_clientes_maps</p> </li> </ol>"},{"location":"modulos/crm/#8-diagrama-de-flujo-del-modulo-crm","title":"8. Diagrama de Flujo del M\u00f3dulo CRM","text":"graph TD     A[Inicio] --&gt; B[Autenticaci\u00f3n]     B --&gt; C{Men\u00fa Principal CRM}      %% Gesti\u00f3n de Clientes     C --&gt; |Gesti\u00f3n de Clientes| D[Crear/Editar Cliente]     D --&gt; E[Validar Datos]     E --&gt; F{\u00bfDatos V\u00e1lidos?}     F --&gt; |S\u00ed| G[Guardar Cliente]     F --&gt; |No| H[Mostrar Errores]     G --&gt; I[Actualizar Listado]      %% Gesti\u00f3n de Datos Fiscales     C --&gt; |Datos Fiscales| J[Crear/Editar Datos]     J --&gt; K[Validar RFC]     K --&gt; L{\u00bfRFC V\u00e1lido?}     L --&gt; |S\u00ed| M[Guardar Datos]     L --&gt; |No| N[Mostrar Errores]      %% Gesti\u00f3n de Cr\u00e9dito     C --&gt; |Cr\u00e9dito| O[Crear/Editar Cr\u00e9dito]     O --&gt; P[Validar L\u00edmite]     P --&gt; Q{\u00bfL\u00edmite Aprobado?}     Q --&gt; |S\u00ed| R[Guardar Cr\u00e9dito]     Q --&gt; |No| S[Enviar a Aprobaci\u00f3n]      %% Gesti\u00f3n de Contactos     C --&gt; |Contactos| T[Crear/Editar Contacto]     T --&gt; U[Validar Email]     U --&gt; V{\u00bfEmail V\u00e1lido?}     V --&gt; |S\u00ed| W[Guardar Contacto]     V --&gt; |No| X[Mostrar Errores]      %% Reportes     C --&gt; |Reportes| Y[Seleccionar Tipo]     Y --&gt; Z[Generar Reporte]     Z --&gt; AA[Exportar/Imprimir]      %% Estilos personalizados     classDef process fill:#e1f5fe,stroke:#01579b,color:#000;     classDef decision fill:#fff3e0,stroke:#e65100,color:#000;     classDef startend fill:#c8e6c9,stroke:#2e7d32,color:#000;     classDef error fill:#ffebee,stroke:#c62828,color:#b71c1c;      class A,AA startend;     class F,L,Q,V decision;     class H,N,X error;     class B,C,D,E,G,I,J,K,M,O,P,R,S,T,U,W,Y,Z process;"},{"location":"modulos/facturacion/","title":"Ficha T\u00e9cnica del M\u00f3dulo Facturaci\u00f3n Electr\u00f3nica (CFDI)","text":""},{"location":"modulos/facturacion/#1-proposito-general","title":"1. Prop\u00f3sito General","text":"<p>El m\u00f3dulo Facturaci\u00f3n Electr\u00f3nica (CFDI) es un componente cr\u00edtico del sistema SIAC Ventas 2.0, dise\u00f1ado para la generaci\u00f3n, validaci\u00f3n y manejo de facturas electr\u00f3nicas (CFDI) seg\u00fan las normativas del SAT. Proporciona una interfaz segura y eficiente para la creaci\u00f3n, timbrado y almacenamiento de facturas electr\u00f3nicas.</p> <p>Referencia:</p> <ul> <li><code>clases/class_cfdi.php</code> (L\u00ednea 1): Sistema de facturaci\u00f3n electr\u00f3nica  </li> <li>Archivos principales: <code>cont_g_cfdi.php</code>, <code>pv_g_cfdi.php</code>, <code>rp_g_suc_cfdi.php</code></li> </ul>"},{"location":"modulos/facturacion/#2-arquitectura-tecnica","title":"2. Arquitectura T\u00e9cnica","text":"<p>Este m\u00f3dulo implementa la arquitectura est\u00e1ndar del sistema SIAC 2.0 definida en Arquitectura del Sistema, incluyendo:</p> <ul> <li>Separaci\u00f3n por capas (presentaci\u00f3n, l\u00f3gica de negocio, datos)</li> <li>Uso de AJAX con tokens para interacci\u00f3n din\u00e1mica</li> <li>Validaciones integradas de sesi\u00f3n, permisos y datos</li> </ul>"},{"location":"modulos/facturacion/#3-estructura-de-archivos-clave","title":"3. Estructura de Archivos Clave","text":"Archivo Funcionalidad <code>clases/class_cfdi.php</code> L\u00f3gica principal de CFDI <code>cont_g_cfdi.php</code> Generaci\u00f3n de CFDI <code>pv_g_cfdi.php</code> Facturaci\u00f3n punto de venta <code>rp_g_suc_cfdi.php</code> Reportes por sucursal <code>view_cfdi_cpago.php</code> Visualizaci\u00f3n de pagos <code>view_cfdi_doc_vta.php</code> Documentos de venta <code>view_cfdi_fg_doc.php</code> Documentos financieros <code>view_cfdi_ticket.php</code> Tickets electr\u00f3nicos <code>cont_ajax.js</code> Generaci\u00f3n de facturas <code>ajax_send_txt_info.js</code> Env\u00edo de informaci\u00f3n TXT ---"},{"location":"modulos/facturacion/#4-funcionalidades-principales","title":"4. Funcionalidades Principales","text":""},{"location":"modulos/facturacion/#41-generacion-de-cfdi","title":"4.1 Generaci\u00f3n de CFDI","text":"<ul> <li>Creaci\u00f3n de facturas electr\u00f3nicas  </li> <li>Integraci\u00f3n con PAC  </li> <li>Generaci\u00f3n de UUID  </li> </ul> <p>Referencia: <code>class_cfdi.php</code>, tokens 100\u2013107</p>"},{"location":"modulos/facturacion/#42-timbrado","title":"4.2 Timbrado","text":"<ul> <li>Validaci\u00f3n de datos  </li> <li>Generaci\u00f3n de XML  </li> <li>Creaci\u00f3n de CBB  </li> </ul> <p>Referencia: <code>class_cfdi.php</code>, tokens 200\u2013205</p>"},{"location":"modulos/facturacion/#43-generacion-de-documentos","title":"4.3 Generaci\u00f3n de Documentos","text":"<ul> <li>PDFs de facturas  </li> <li>Tickets electr\u00f3nicos  </li> </ul> <p>Referencia: <code>view_cfdi_*.php</code>, tokens 300\u2013305</p>"},{"location":"modulos/facturacion/#44-validacion","title":"4.4 Validaci\u00f3n","text":"<ul> <li>Verificaci\u00f3n de PAC  </li> <li>Validaci\u00f3n de UUID  </li> </ul> <p>Referencia: <code>class_cfdi.php</code>, tokens 400\u2013405</p>"},{"location":"modulos/facturacion/#45-facturacion-por-ticket","title":"4.5 Facturaci\u00f3n por ticket:","text":"<ul> <li>Implementada en cfdi_gcfdi_cpago_cli_crea_cfdi</li> <li>Genera CFDI para pagos individuales</li> <li>Maneja timbrado y generaci\u00f3n de documentos</li> </ul>"},{"location":"modulos/facturacion/#46-facturacion-multi-docs","title":"4.6 Facturaci\u00f3n Multi-Docs:","text":"<ul> <li>Implementada en cfdi_mdocs_vta_docs_crea_factura</li> <li>Procesa m\u00faltiples documentos en una sola factura</li> <li>Actualiza estados individuales por documento</li> </ul>"},{"location":"modulos/facturacion/#47-complementos-de-pago","title":"4.7 Complementos de pago:","text":"<ul> <li>Implementada en cfdi_cpago_cancela_uuid</li> <li>Maneja pagos y su relaci\u00f3n con CFDIs</li> <li>Actualiza estados de pagos y relaciona con facturas</li> </ul>"},{"location":"modulos/facturacion/#5-integraciones","title":"5. Integraciones","text":""},{"location":"modulos/facturacion/#51-modulos-internos","title":"5.1 M\u00f3dulos Internos","text":"<ul> <li>Ventas: <code>pv_g_cfdi.php</code>, token 500  </li> <li>Contabilidad: <code>cont_g_cfdi.php</code>, token 505</li> </ul>"},{"location":"modulos/facturacion/#52-servicios-externos","title":"5.2 Servicios Externos","text":"<ul> <li>Facturaci\u00f3n Moderna (PAC): <code>class_cfdi.php</code>, l\u00edneas 100\u2013150</li> </ul>"},{"location":"modulos/facturacion/#6-interaccion-cliente-servidor","title":"6. Interacci\u00f3n Cliente-Servidor","text":"<p>Para detalles sobre el patr\u00f3n de comunicaci\u00f3n cliente-servidor utilizado en este proceso, consulta la secci\u00f3n Interacci\u00f3n Cliente-Servidor.</p>"},{"location":"modulos/facturacion/#7-base-de-datos","title":"7. Base de Datos","text":""},{"location":"modulos/facturacion/#tablas-clave","title":"Tablas Clave","text":"Tabla Prop\u00f3sito <code>cfdi</code> Registro de CFDI <code>cfdi_rel</code> Relaciones de CFDI <code>pac</code> Configuraci\u00f3n PAC <code>docs_cfdi</code> Documentos <p>Relaciones:</p> <ul> <li>Llaves primarias: <code>idcfdi</code>, <code>uuid</code> </li> <li>Llaves for\u00e1neas: <code>idpac</code>, <code>iddoc</code> </li> <li>Relaciones: <code>cfdi</code> \u2192 <code>docs_cfdi</code></li> </ul>"},{"location":"modulos/facturacion/#8-diagrama-de-flujo-del-modulo","title":"8. Diagrama de Flujo del M\u00f3dulo","text":"graph TD     A[Inicio Facturaci\u00f3n Electr\u00f3nica] --&gt; B{Validar Sesi\u00f3n}     B --&gt;|S\u00ed| C[Verificar Archivo TXT]     C --&gt;|S\u00ed| D{Validar PAC}     D --&gt;|S\u00ed| E[Crear XML]     E --&gt; F[Timbrar con PAC]     F --&gt;|S\u00ed| G[Guardar Documentos]     G --&gt; H[Actualizar Estados]     H --&gt; I[Completar]      F --&gt;|No| J[Error: Timbrado]     J --&gt; K[Notificar Error]      D --&gt;|No| L[Error: Sin PAC]     C --&gt;|No| M[Error: TXT No Existe]      I --&gt; N{Necesita Cancelaci\u00f3n?}     N --&gt;|S\u00ed| O[Cancelar CFDI]     O --&gt; P{Motivo}     P --&gt;|01| Q[Generar Sustituci\u00f3n]     P --&gt;|02/03| R[Cancelar Directo]     Q --&gt; S[Actualizar Estado]     R --&gt; S     S --&gt; T[Completar Cancelaci\u00f3n]      %% Estilos     classDef process fill:#e1f5fe,stroke:#01579b,color:#000     classDef decision fill:#fff3e0,stroke:#e65100,color:#000     classDef startend fill:#c8e6c9,stroke:#2e7d32,color:#000     classDef error fill:#ffebee,stroke:#d32f2f,color:#000      %% Clases     class A startend     class B,D,N,P decision     class C,E,F,G,H,I,O,Q,R,S,T process     class J,K,L,M error"},{"location":"modulos/liquidacion/","title":"Ficha T\u00e9cnica del M\u00f3dulo Liquidaci\u00f3n de Ventas - SIAC 2.0 Ventas","text":""},{"location":"modulos/liquidacion/#1-proposito-general","title":"1. Prop\u00f3sito General","text":"<p>El m\u00f3dulo de Liquidaci\u00f3n de Ventas es un componente cr\u00edtico del sistema SIAC Ventas 2.0, dise\u00f1ado para gestionar el proceso de liquidaci\u00f3n de \u00f3rdenes de compra, verificando que todos los productos sacados de CEDIS hayan sido vendidos o devueltos. Proporciona un proceso estructurado para la validaci\u00f3n, liquidaci\u00f3n y control de \u00f3rdenes de compra.</p>"},{"location":"modulos/liquidacion/#2-arquitectura-tecnica","title":"2. Arquitectura T\u00e9cnica","text":"<p>Este m\u00f3dulo implementa la arquitectura est\u00e1ndar del sistema SIAC 2.0 definida en Arquitectura del Sistema, incluyendo:</p> <ul> <li>Separaci\u00f3n por capas (presentaci\u00f3n, l\u00f3gica de negocio, datos)</li> <li>Uso de AJAX con tokens para interacci\u00f3n din\u00e1mica</li> <li>Validaciones integradas de sesi\u00f3n, permisos y datos</li> </ul>"},{"location":"modulos/liquidacion/#3-estructura-de-archivos-clave","title":"3. Estructura de Archivos Clave","text":"Archivo Funcionalidad vta_g_liquidacion.php Gestor principal de liquidaci\u00f3n vta_wspace.php Espacio de trabajo view_os_liquidacion.php Visualizaci\u00f3n de \u00f3rdenes view_vta_os_liquidacion.php Liquidaci\u00f3n de ventas <code>vta_ajax.js</code> AJAX para liquidaci\u00f3n"},{"location":"modulos/liquidacion/#4-funcionalidades-principales","title":"4. Funcionalidades Principales","text":""},{"location":"modulos/liquidacion/#41-gestion-de-liquidacion-de-ordenes","title":"4.1 Gesti\u00f3n de Liquidaci\u00f3n de \u00d3rdenes","text":"<p>Caracter\u00edsticas:</p> <ul> <li>Validaci\u00f3n de \u00f3rdenes de compra</li> <li>Control de productos vendidos/devueltos</li> <li>Gesti\u00f3n de estados de liquidaci\u00f3n</li> <li>Cancelaci\u00f3n de \u00f3rdenes</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>Tokens: 100-110</li> <li>Archivos: vta_g_liquidacion.php, vta_ajax.php</li> <li>Clases: <code>c_Add_vta</code>, <code>c_Up_vta</code>, <code>c_Rmv_vta</code></li> </ul> <p>Funciones principales:</p> <ul> <li><code>vta_gliq_suc_av_os_act_widget_view_x_ids</code>: Gesti\u00f3n inicial de liquidaci\u00f3n</li> <li><code>vta_gliq_suc_av_os_liq_envia_x_ids</code>: Env\u00edo de liquidaci\u00f3n por correo</li> <li><code>vta_gliq_suc_av_os_liq_imprime_x_ids</code>: Impresi\u00f3n de liquidaci\u00f3n</li> <li><code>vta_gliq_suc_av_os_act_liquida_ok_x_ids</code>: Confirmaci\u00f3n de liquidaci\u00f3n</li> <li><code>vta_gliq_suc_av_os_act_rmv_x_ids</code>: Cancelaci\u00f3n de liquidaci\u00f3n</li> </ul> <p>Diagrama</p>  graph TD     A[Inicio Proceso de Liquidaci\u00f3n] --&gt; B[Seleccionar Orden de Salida]     B --&gt; C[Establecer Fecha de Liquidaci\u00f3n]     C --&gt; D[Confirmar]     D --&gt; E[Validar Productos]     E --&gt; F[Validar Documentos de Venta]     F --&gt; G[Generar Liquidaci\u00f3n]       G --&gt; H[Confirmar Liquidaci\u00f3n]     H --&gt; I[Enviar notificaci\u00f3n]       %% Estilos personalizados     classDef process fill:#e1f5fe,stroke:#01579b,color:#000;     classDef decision fill:#fff3e0,stroke:#e65100,color:#000;     classDef startend fill:#c8e6c9,stroke:#2e7d32,color:#000;      class A startend;      class B,C,D,F,E,+G,H,I,J,K process;"},{"location":"modulos/liquidacion/#42-control-de-cancelaciones","title":"4.2 Control de Cancelaciones","text":"<p>Caracter\u00edsticas:</p> <ul> <li>Validaci\u00f3n de remisiones</li> <li>Gesti\u00f3n de estados</li> <li>Solicitud de auditor\u00eda</li> <li>Cancelaci\u00f3n de liquidaci\u00f3n</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>Tablas: <code>liquidacion</code>, <code>add_orden_status_liquidacion</code></li> <li>Clases: <code>c_Rmv_vta</code>, <code>c_Up_vta</code></li> <li>Funciones: <code>vta_rmv_query_x_scrip</code>, <code>vta_up_docs_tit_val_x_ids</code></li> </ul> <p>Diagrama</p>  graph TD     A[Inicio Proceso Cancelaci\u00f3n Orden de Salida] --&gt; B[Seleccionar Orden de Salida]     B --&gt; C{\u00bfTiene Documentos de Venta Asociados?}     C --&gt;|S\u00ed| D[No se Puede Cancelar]     D --&gt; |Dir\u00edjase a| K[M\u00f3dulo Ventas]     C --&gt;|No| E[Petici\u00f3n al Auditor]     E --&gt; F[Acepta]     E --&gt; G[Rechaza]     F --&gt; H[Orden Cancelada]      %% Estilos personalizados     classDef process fill:#e1f5fe,stroke:#01579b,color:#000;     classDef decision fill:#fff3e0,stroke:#e65100,color:#000;     classDef startend fill:#c8e6c9,stroke:#2e7d32,color:#000;     classDef rejected fill:#ffcdd2,stroke:#b71c1c,color:#000;      class A,H startend;     class C,E decision;     class B,K,F process;     class D,G rejected;"},{"location":"modulos/liquidacion/#43-generacion-de-documentos","title":"4.3 Generaci\u00f3n de Documentos","text":"<p>Caracter\u00edsticas:</p> <ul> <li>Generaci\u00f3n de PDFs</li> <li>Exportaci\u00f3n de datos</li> <li>Env\u00edo por correo</li> <li>Historial de documentos</li> </ul> <p>Referencias t\u00e9cnicas:</p> <ul> <li>Directorio: <code>archivos/liquidacion/</code></li> <li>Archivos: <code>.json</code>, <code>.pdf</code></li> <li>Funciones: <code>vta_gliq_suc_av_os_liq_envia_x_ids</code></li> </ul>"},{"location":"modulos/liquidacion/#5-integraciones","title":"5. Integraciones","text":""},{"location":"modulos/liquidacion/#51-proceso-de-liquidacion-de-ordenes-de-salida","title":"5.1 Proceso de Liquidaci\u00f3n de Ordenes de Salida","text":""},{"location":"modulos/liquidacion/#511-validacion-de-documentos","title":"5.1.1 Validaci\u00f3n de Documentos","text":"<p>El proceso de liquidaci\u00f3n inicia con la validaci\u00f3n de remisiones en el sistema CRM:</p> <p>Caracter\u00edsticas</p> <ul> <li>Verificaci\u00f3n de remisiones por cliente</li> <li>Validaci\u00f3n de estado de documentos</li> <li>Consulta de historial de ventas</li> <li>Generaci\u00f3n de reportes de remisiones pendientes</li> </ul> <p>Referencias t\u00e9cnicas</p> <ul> <li>Tablas: <code>add_remision</code>, <code>add_remision_productos_orden</code></li> <li>Clase: <code>class_crm.php</code>, m\u00e9todos <code>crm_add_remision()</code>, <code>crm_add_remision_productos()</code></li> <li>Funciones: <code>crm_add_remision_status()</code>, <code>crm_add_remision_venta_neta()</code></li> </ul>"},{"location":"modulos/liquidacion/#512-validacion-de-productos","title":"5.1.2 Validaci\u00f3n de Productos","text":"<p>El sistema verifica el estado de los productos en CEDIS:</p> <p>Caracter\u00edsticas</p> <ul> <li>Validaci\u00f3n de productos vendidos</li> <li>Verificaci\u00f3n de devoluciones</li> <li>Control de stock disponible</li> <li>Actualizaci\u00f3n de movimientos</li> </ul> <p>Referencias t\u00e9cnicas</p> <ul> <li>Tablas: <code>inicia_ruta_stock_vendedor</code>, <code>add_mini_stock_vendedor</code></li> <li>Clase: <code>class_cds.php</code>, m\u00e9todos <code>cds_add_gos_cedis_osalida()</code>, <code>cds_add_gos_cedis_os_depa()</code></li> <li>Funciones: <code>cds_add_gos_cedis_av_os_prod_dev()</code>, <code>cds_add_gos_cedis_os_tit_reg()</code></li> </ul>"},{"location":"modulos/liquidacion/#513-gestion-de-cobros","title":"5.1.3 Gesti\u00f3n de Cobros","text":"<p>El proceso finaliza con la gesti\u00f3n de cobros en Caja:</p> <p>Caracter\u00edsticas</p> <ul> <li>Validaci\u00f3n de pagos</li> <li>Gesti\u00f3n de cobros</li> <li>Conciliaci\u00f3n de ventas</li> <li>Reportes de caja</li> </ul> <p>Referencias t\u00e9cnicas</p> <ul> <li>Tablas: <code>add_ticket_titulo</code>, <code>add_ticket_detalle</code></li> <li>Clase: <code>class_caja.php</code>, m\u00e9todos <code>caja_add_ticket_titulo()</code>, <code>caja_add_ticket_detalle()</code></li> <li>Funciones: <code>caja_add_ticket_status()</code>, <code>caja_add_ticket_movimientos()</code></li> </ul>  graph TD   %% Componentes principales   LIQ[\"Componente: M\u00f3dulo Liquidaci\u00f3n\"]   CRM[\"Componente: CRM\"]   CEDIS[\"Componente: CEDIS\"]   CAJA[\"Componente: CAJA\"]    %% Relaciones estructurales   LIQ --&gt;|Consulta remisiones| CRM   LIQ --&gt;|Valida productos devueltos| CEDIS   LIQ --&gt;|Genera liquidaci\u00f3n y remite a| CAJA    %% Estilos   classDef componente fill:#b3cde0,stroke:#333,stroke-width:2px,color:#000;   class LIQ,CRM,CEDIS,CAJA componente;"},{"location":"modulos/liquidacion/#52-funciones-de-integracion","title":"5.2 Funciones de Integraci\u00f3n","text":"<ul> <li><code>vta_gliq_suc_av_os_act_widget_view_x_ids</code>: Gesti\u00f3n inicial de liquidaci\u00f3n</li> <li><code>vta_gliq_suc_av_os_liq_envia_x_ids</code>: Env\u00edo de liquidaci\u00f3n por correo</li> <li><code>vta_gliq_suc_av_os_liq_imprime_x_ids</code>: Impresi\u00f3n de liquidaci\u00f3n</li> <li><code>vta_gliq_suc_av_os_act_liquida_ok_x_ids</code>: Confirmaci\u00f3n de liquidaci\u00f3n</li> </ul>"},{"location":"modulos/liquidacion/#6-interaccion-cliente-servidor","title":"6. Interacci\u00f3n Cliente-Servidor","text":"<p>Ver detalles del patr\u00f3n de comunicaci\u00f3n en Interacci\u00f3n Cliente-Servidor.</p>"},{"location":"modulos/liquidacion/#7-base-de-datos","title":"7. Base de datos","text":""},{"location":"modulos/liquidacion/#tablas-de-liquidacion","title":"Tablas de Liquidaci\u00f3n","text":"<ul> <li>liquidacion: Almacena informaci\u00f3n de las liquidaciones.</li> <li>add_orden_status_liquidacion: Mantiene el estado de las \u00f3rdenes en proceso de liquidaci\u00f3n.</li> </ul>"},{"location":"modulos/liquidacion/#tablas-de-ventas-y-remisiones","title":"Tablas de Ventas y Remisiones","text":"<ul> <li>inicia_ruta_stock_vendedor: Gestiona las rutas y stock de los vendedores.</li> <li>add_remision: Almacena informaci\u00f3n de las remisiones.</li> <li>add_remision_productos_orden: Detalles de productos en remisiones.</li> <li>add_remision_venta_neta: Informaci\u00f3n de ventas netas.</li> </ul>"},{"location":"modulos/liquidacion/#tablas-de-productos","title":"Tablas de Productos","text":"<ul> <li>add_productos: Cat\u00e1logo de productos.</li> <li>add_ct_productos: Categor\u00edas de productos.</li> <li>add_mini_stock_vendedor: Stock de productos por vendedor.</li> </ul>"},{"location":"modulos/liquidacion/#tablas-de-clientes","title":"Tablas de Clientes","text":"<ul> <li>add_clientes: Informaci\u00f3n de clientes.</li> <li>add_clientes_tipos: Tipos de clientes.</li> </ul>"},{"location":"modulos/liquidacion/#tablas-de-vendedores","title":"Tablas de Vendedores","text":"<ul> <li>add_cc_myr: Informaci\u00f3n de vendedores.</li> <li>add_comision_suc_meses: Comisiones por mes.</li> <li>add_comision_suc_av_prods_prom: Promedios de comisiones por producto.</li> </ul>"},{"location":"modulos/liquidacion/#tablas-de-tickets-y-documentos","title":"Tablas de Tickets y Documentos","text":"<ul> <li>add_ticket_titulo: T\u00edtulos de tickets.</li> <li>add_ticket_detalle: Detalles de tickets.</li> </ul>"},{"location":"modulos/liquidacion/#tablas-de-configuracion","title":"Tablas de Configuraci\u00f3n","text":"<ul> <li>add_sucursal: Informaci\u00f3n de sucursales.</li> <li>add_ano_nuevo: A\u00f1os de operaci\u00f3n.</li> <li>rel_ano_mes_nuevo: Relaci\u00f3n de a\u00f1os y meses.</li> </ul>"},{"location":"modulos/liquidacion/#tablas-de-estado","title":"Tablas de Estado","text":"<ul> <li>add_remision_venta_neta: Estado de ventas netas.</li> <li>add_comision_producto: Configuraci\u00f3n de comisiones por producto.</li> </ul>"},{"location":"modulos/liquidacion/#8-flujo-de-proceso","title":"8. Flujo de Proceso","text":"graph TD     A[Inicio] --&gt; B[Seleccionar Sucursal]     B --&gt; C[Verificar Permisos]     C --&gt;|S\u00ed| D[Mostrar Espacio de Trabajo]     D --&gt; E{\u00d3rdenes Pendientes?}     E --&gt;|S\u00ed| F[Seleccionar Orden]     F --&gt; G[Validar Productos]     G --&gt; H[Validar Documentos]     H --&gt; I[Generar Liquidaci\u00f3n]     I --&gt; J[Actualizar Estado]     E --&gt;|No| K[Mostrar Reportes]     %% Estilos personalizados     classDef process fill:#e1f5fe,stroke:#01579b,color:#000;     classDef decision fill:#fff3e0,stroke:#e65100,color:#000;     classDef startend fill:#c8e6c9,stroke:#2e7d32,color:#000;      class A startend;     class E decision;     class B,C,D,F,G,H,I,J,K process;"},{"location":"modulos/ventas/","title":"Ficha T\u00e9cnica del M\u00f3dulo Ventas","text":""},{"location":"modulos/ventas/#1-proposito-general","title":"1. Prop\u00f3sito General","text":"<p>El m\u00f3dulo Ventas es el componente central del sistema SIAC Ventas 2.0, dise\u00f1ado para gestionar todas las operaciones relacionadas con la venta de productos, desde la toma de pedidos hasta la facturaci\u00f3n y el seguimiento de ventas. Proporciona herramientas para la gesti\u00f3n de clientes, productos, pedidos, precios, facturaci\u00f3n y an\u00e1lisis de ventas.</p> <p>Referencias:</p> <ul> <li><code>ventas_ajax.php</code> (L\u00ednea 1): Sistema de ventas integrado  </li> <li>Archivos principales: <code>ventas_forms.php</code>, <code>ventas_tablas.php</code>, <code>ventas_widgets.php</code></li> </ul>"},{"location":"modulos/ventas/#2-arquitectura-general","title":"2. Arquitectura General","text":"<p>Este m\u00f3dulo implementa la arquitectura est\u00e1ndar del sistema SIAC 2.0 definida en Arquitectura del Sistema, incluyendo:</p> <ul> <li>Separaci\u00f3n por capas (presentaci\u00f3n, l\u00f3gica de negocio, datos)</li> <li>Uso de AJAX con tokens para interacci\u00f3n din\u00e1mica</li> <li>Validaciones integradas de sesi\u00f3n, permisos y datos</li> </ul>"},{"location":"modulos/ventas/#3-estructura-de-archivos-clave","title":"3. Estructura de Archivos Clave","text":""},{"location":"modulos/ventas/#31-archivos-php","title":"3.1 Archivos PHP","text":"Archivo Funcionalidad <code>vta_ajax.php</code> Controlador principal de operaciones <code>vta_forms.php</code> Formularios de ventas <code>vta_tablas.php</code> Tablas de datos <code>vta_widgets.php</code> Componentes visuales <code>vta_modals.php</code> Ventanas modales <code>class_vtas.php</code> L\u00f3gica de negocio <code>vta_select2.php</code> Selectores mejorados <code>vta_graficas.php</code> Gr\u00e1ficos y estad\u00edsticas <code>class_precio.php</code> Gesti\u00f3n de precios <code>class_factura.php</code> Facturaci\u00f3n electr\u00f3nica <code>vta_dtos_promos.php</code> Sistema de descuentos y promociones <code>vta_g_comisiones.php</code> Gesti\u00f3n de comisiones <code>vta_g_liquidacion.php</code> Liquidaci\u00f3n de ventas <code>vta_g_precios.php</code> Gesti\u00f3n de precios local/for\u00e1neo <code>vta_g_osalida.php</code> Gesti\u00f3n de \u00f3rdenes de salida"},{"location":"modulos/ventas/#32-archivos-javascript","title":"3.2 Archivos JavaScript","text":"Archivo Funcionalidad <code>vta_ajax.js</code> Eventos y validaciones <code>vta_dtos_promos.js</code> Gesti\u00f3n de descuentos <code>vta_graficas.js</code> Generaci\u00f3n de gr\u00e1ficos <code>vta_precios.js</code> Gesti\u00f3n de precios din\u00e1micos <code>vta_liquidacion.js</code> C\u00e1lculos de liquidaci\u00f3n <code>vta_comisiones.js</code> C\u00e1lculos de comisiones <code>vta_validaciones.js</code> Validaciones de formularios <code>vta_select2.js</code> Configuraci\u00f3n de select2 <code>vta_tablas.js</code> Configuraci\u00f3n de tablas <code>vta_modal.js</code> Manejo de ventanas modales <code>vta_forms.js</code> Eventos de formularios <code>vta_utils.js</code> Funciones utilitarias"},{"location":"modulos/ventas/#4-funcionalidades-principales","title":"4. Funcionalidades Principales","text":""},{"location":"modulos/ventas/#41-portal-de-agente-de-ventas","title":"4.1 Portal de Agente de Ventas","text":"<ul> <li>Registro de pedidos de clientes  </li> <li>Pedidos a CEDIS (integraci\u00f3n con m\u00f3dulo CEDIS)  </li> <li>Seguimiento de ventas  </li> <li>Generaci\u00f3n de CFDI (factura electr\u00f3nica)  </li> <li>Gesti\u00f3n de comisiones y liquidaciones</li> <li>Sistema de descuentos y promociones</li> </ul> <p>Referencias: </p> <ul> <li><code>vta_forms.php</code>, tokens 100\u2013107  </li> <li><code>class_cds.php</code>, tokens 200\u2013205  </li> <li><code>class_vtas.php</code>, tokens 300\u2013305  </li> <li><code>class_factura.php</code>, tokens 400\u2013405</li> </ul>"},{"location":"modulos/ventas/#42-sistema-de-precios","title":"4.2 Sistema de Precios","text":"<ul> <li>Gesti\u00f3n de precios locales</li> <li>Gesti\u00f3n de precios for\u00e1neos</li> <li>Precios especiales (globales)</li> <li>Sistema de descuentos por volumen</li> <li>Promociones temporales</li> <li>Validaci\u00f3n de precios contra costos</li> </ul> <p>Referencias:</p> <ul> <li><code>class_precio.php</code></li> <li><code>vta_dtos_promos.php</code></li> <li><code>vta_g_precios.php</code></li> </ul>"},{"location":"modulos/ventas/#43-gestor-de-precios","title":"4.3 Gestor de Precios","text":"<ul> <li>Precios locales, for\u00e1neos y especiales  </li> <li>Precios globales  </li> <li>Actualizaci\u00f3n masiva de precios  </li> </ul> <p>Referencias: - <code>class_precio.php</code>, tokens 600\u2013620 - <code>ventas_ajax.php</code>, tokens 621\u2013625</p>"},{"location":"modulos/ventas/#44-gestion-de-pedidos","title":"4.4 Gesti\u00f3n de Pedidos","text":"<ul> <li>Creaci\u00f3n y edici\u00f3n de pedidos  </li> <li>Asignaci\u00f3n de productos  </li> <li>C\u00e1lculo autom\u00e1tico de totales  </li> </ul> <p>Referencia: <code>ventas_forms.php</code>, tokens 100\u2013107</p>"},{"location":"modulos/ventas/#45-facturacion","title":"4.5 Facturaci\u00f3n","text":"<ul> <li>Generaci\u00f3n de facturas  </li> <li>Integraci\u00f3n con CFDI  </li> <li>Impresi\u00f3n de documentos  </li> </ul> <p>Referencia: <code>class_cfdi.php</code>, tokens 200\u2013205</p>"},{"location":"modulos/ventas/#46-analisis-de-ventas","title":"4.6 An\u00e1lisis de Ventas","text":"<ul> <li>Reportes de ventas  </li> <li>Gr\u00e1ficos de tendencias  </li> <li>An\u00e1lisis por producto o cliente  </li> </ul> <p>Referencia: <code>ventas_graficas.php</code>, tokens 300\u2013305</p>"},{"location":"modulos/ventas/#5-integraciones","title":"5. Integraciones","text":""},{"location":"modulos/ventas/#51-modulos-internos","title":"5.1 M\u00f3dulos Internos","text":"<ul> <li> <p>CRM: Integraci\u00f3n para gesti\u00f3n de clientes Referencia: <code>class_crm.php</code>, token 400</p> </li> <li> <p>Contabilidad: Registro fiscal de ventas Referencia: <code>class_cont.php</code>, token 500</p> </li> <li> <p>CEDIS: Manejo de pedidos y salidas Referencia: <code>class_cds.php</code>, tokens 200\u2013205</p> </li> </ul>"},{"location":"modulos/ventas/#52-servicios-externos","title":"5.2 Servicios Externos","text":"<ul> <li> <p>API de Facturaci\u00f3n: Generaci\u00f3n y timbrado de CFDI Referencia: <code>class_cfdi.php</code>, l\u00edneas 100\u2013150</p> </li> <li> <p>Servicios de Correo: Env\u00edo autom\u00e1tico de facturas Referencia: <code>class_mails.php</code>, l\u00edneas 200\u2013250</p> </li> </ul>"},{"location":"modulos/ventas/#52-proceso-de-creacion-de-documentos","title":"5.2 Proceso de Creaci\u00f3n de Documentos","text":""},{"location":"modulos/ventas/#521-seleccion-de-cliente-y-ruta","title":"5.2.1 Selecci\u00f3n de Cliente y Ruta","text":"<p>El proceso inicia con la selecci\u00f3n del cliente y ruta en CRM: - Caracter\u00edsticas   - Selecci\u00f3n de ruta y cliente   - Validaci\u00f3n de informaci\u00f3n del cliente   - Consulta de historial de ventas   - Generaci\u00f3n de reportes de clientes</p> <ul> <li>Referencias t\u00e9cnicas</li> <li>Tablas: <code>add_clientes</code>, <code>add_cc_myr</code></li> <li>Clase: <code>class_crm.php</code>, m\u00e9todos <code>crm_add_clientes()</code>, <code>crm_add_cc_myr()</code></li> <li>Funciones: <code>crm_add_clientes_tipos()</code>, <code>crm_add_clientes_status()</code></li> </ul>"},{"location":"modulos/ventas/#522-validacion-de-stock","title":"5.2.2 Validaci\u00f3n de Stock","text":"<p>El sistema verifica la disponibilidad de productos en CEDIS: - Caracter\u00edsticas   - Validaci\u00f3n de stock disponible   - Consulta de ubicaciones   - Reserva de productos   - Generaci\u00f3n de reportes de inventario</p> <ul> <li>Referencias t\u00e9cnicas</li> <li>Tablas: <code>inicia_ruta_stock_vendedor</code>, <code>add_mini_stock_vendedor</code></li> <li>Clase: <code>class_cds.php</code>, m\u00e9todos <code>cds_add_gos_cedis_osalida()</code>, <code>cds_add_gos_cedis_os_depa()</code></li> <li>Funciones: <code>cds_add_gos_cedis_av_os_prod_dev()</code>, <code>cds_add_gos_cedis_os_tit_reg()</code></li> </ul>"},{"location":"modulos/ventas/#523-gestion-de-pagos-y-facturacion","title":"5.2.3 Gesti\u00f3n de Pagos y Facturaci\u00f3n","text":"<p>El proceso finaliza con la gesti\u00f3n de pagos y facturaci\u00f3n: - Caracter\u00edsticas   - Validaci\u00f3n de condiciones de pago   - Gesti\u00f3n de descuentos   - Generaci\u00f3n de facturas CFDI   - Emisi\u00f3n de remisiones</p> <ul> <li>Referencias t\u00e9cnicas</li> <li>Tablas: <code>add_remision</code>, <code>add_remision_productos_orden</code></li> <li>Clase: <code>class_factura.php</code>, m\u00e9todos <code>fact_add_remision()</code>, <code>fact_add_remision_productos()</code></li> <li>Funciones: <code>fact_add_remision_venta_neta()</code>, <code>fact_add_remision_status()</code></li> </ul>  flowchart TD   LIQ[\"M\u00f3dulo Liquidaci\u00f3n\"]    subgraph Proceso_5_2[\"Proceso 5.2: Creaci\u00f3n de Documentos (Remisiones)\"]     LIQ_SEL_CLIENTE[\" Selecci\u00f3n Cliente y Ruta\"]     LIQ_VALID_STOCK[\" Agregar productos\"]     LIQ_GEST_PAGO_FACT[\" Gesti\u00f3n de Pago y Facturaci\u00f3n\"]      LIQ --&gt; LIQ_SEL_CLIENTE     LIQ_SEL_CLIENTE --&gt; LIQ_VALID_STOCK     LIQ_VALID_STOCK --&gt; LIQ_GEST_PAGO_FACT   end    %% M\u00f3dulos relacionados   CRM[\"CRM\"]   CEDIS[\"CEDIS\"]   FACT[\"Facturaci\u00f3n\"]    %% Conexiones de pasos con m\u00f3dulos   LIQ_SEL_CLIENTE --&gt; |Consulta|CRM   LIQ_VALID_STOCK --&gt; |Validado por|CEDIS   LIQ_GEST_PAGO_FACT --&gt; |De acuerdo a|CRM   LIQ_GEST_PAGO_FACT --&gt; |Gestionado por|FACT    %% Estilos   classDef modulo fill:#bbf,stroke:#333,stroke-width:2px;   classDef paso fill:#dfd,stroke:#333,stroke-width:2px;   class LIQ,CRM,CEDIS,FACT modulo;   class LIQ_SEL_CLIENTE,LIQ_VALID_STOCK,LIQ_GEST_PAGO_FACT paso;   graph TD   %% Componentes principales   LIQ[\"Componente: M\u00f3dulo Liquidaci\u00f3n\"]   CRM[\"Componente: CRM\"]   CEDIS[\"Componente: CEDIS\"]   FACT[\"Componente: Facturaci\u00f3n\"]    %% Interfaces/servicios que utiliza el m\u00f3dulo Liquidaci\u00f3n   LIQ --&gt;|Consulta Cliente y Ruta| CRM   LIQ --&gt;|Validaci\u00f3n de Stock| CEDIS   LIQ --&gt;|Consulta condiciones de pago| CRM   LIQ --&gt;|Gesti\u00f3n de Pago y Factura| FACT    %% Estilos   classDef componente fill:#b3cde0,stroke:#333,stroke-width:2px,color:#000;   class LIQ,CRM,CEDIS,FACT componente;"},{"location":"modulos/ventas/#6-interaccion-cliente-servidor","title":"6. Interacci\u00f3n Cliente-Servidor","text":"<p>Para una explicaci\u00f3n completa del modelo de comunicaci\u00f3n y procesamiento de tokens, consulta la secci\u00f3n Interacci\u00f3n Cliente-Servidor.</p>"},{"location":"modulos/ventas/#7-base-de-datos","title":"7. Base de Datos","text":""},{"location":"modulos/ventas/#tablas-clave","title":"Tablas Clave","text":"<p>Tablas de Productos y Stock:</p> <ul> <li>add_productos</li> <li>add_ct_productos</li> <li>add_stock_ajuste</li> <li>add_mini_stock_vendedor</li> <li>add_mini_stock_vendedor_temp</li> </ul> <p>Tablas de Entradas y Salidas:</p> <ul> <li>add_tit_entradas_stock</li> <li>add_entrada_producto_stock</li> <li>add_os_pa_titulo</li> <li>add_os_pa_productos</li> <li>add_os_pa_producto_dev</li> </ul> <p>Tablas de Precios y Descuentos: - ajuste_precio_pr - add_descuento_prom_prod_his - add_comision_producto</p> <p>Tablas de Empleados y Usuarios:</p> <ul> <li>add_empleados</li> <li>add_user</li> <li>rel_em_suc_empleado</li> </ul> <p>Tablas de Sucursales y Departamentos: - add_sucursal - add_depas</p> <p>Tablas de A\u00f1o y Configuraci\u00f3n:</p> <p>-add_ano_nuevo</p> <p>Tablas de Pedidos y Ventas:</p> <ul> <li>prodts_pedido_stock_temp</li> <li>add_cedis_os_prod_cont</li> </ul> <p>Tablas de Backup:</p> <ul> <li>add_backup_stock_almacen</li> </ul>"},{"location":"modulos/ventas/#8-diagrama-de-flujo-del-modulo","title":"8. Diagrama de Flujo del M\u00f3dulo","text":"graph TD     A[Inicio Ventas] --&gt; B[Verificar Sesi\u00f3n]     B --&gt; C{\u00bfUsuario Autenticado?}     C --&gt; |S\u00ed| D[Seleccionar Funci\u00f3n]      %% Portal de Agente     D --&gt; E{\u00bfPortal de Agente?}     E --&gt; |S\u00ed| F[Registrar Pedido]     F --&gt; G[Validar Pedido]     G --&gt; H[Enviar a CEDIS]     H --&gt; I[Generar Factura]     I --&gt; J[Integrar CFDI]     J --&gt; K[Enviar Factura]      %% Gesti\u00f3n de Precios     D --&gt; L{\u00bfGesti\u00f3n de Precios?}     L --&gt; |S\u00ed| M[Actualizar Precios]     M --&gt; N[Validar Precios]     N --&gt; O[Guardar Precios]      %% Liquidaci\u00f3n     D --&gt; P{\u00bfLiquidaci\u00f3n?}     P --&gt; |S\u00ed| Q[Calcular Comisi\u00f3n]     Q --&gt; R[Generar Reporte]     R --&gt; S[Registrar Liquidaci\u00f3n]      %% Estilos personalizados     classDef process fill:#e1f5fe,stroke:#01579b,color:#000;     classDef decision fill:#fff3e0,stroke:#e65100,color:#000;     classDef startend fill:#c8e6c9,stroke:#2e7d32,color:#000;      class A startend;     class C,E,L,P decision;     class B,D,F,G,H,I,J,K,M,N,O,Q,R,S process;"}]}